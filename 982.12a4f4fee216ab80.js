"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[982],{9982:(Fe,B,p)=>{p.r(B),p.d(B,{OperacoesModule:()=>Ie});var _=p(6814),f=p(132),ot=p(2832),m=p(708),q=p(8145),v=p(590),L=p(674),t=p(9291),at=p(8787),C=p(2828),nt=p(6599);const it=function(){return["exportar"]},rt=function(){return["importar"]},st=function(){return["cadastrar"]};function lt(o,s){1&o&&(t.TgZ(0,"div",13)(1,"a",14)(2,"span",15),t.O4$(),t.TgZ(3,"svg",16),t._UZ(4,"path",17)(5,"path",18),t.qZA()(),t.kcU(),t.TgZ(6,"span",19),t._uU(7," Exportar PDF"),t.qZA()()(),t.TgZ(8,"div",13)(9,"a",20)(10,"span",15),t.O4$(),t.TgZ(11,"svg",21),t._UZ(12,"path",17)(13,"path",22),t.qZA()(),t.kcU(),t.TgZ(14,"span",19),t._uU(15," Importar EXCEL"),t.qZA()()(),t.TgZ(16,"div",23)(17,"a",24)(18,"span",19),t._uU(19," Cadastrar Opera\xe7\xe3o"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("routerLink",t.DdM(3,it)),t.xp6(8),t.Q6J("routerLink",t.DdM(4,rt)),t.xp6(8),t.Q6J("routerLink",t.DdM(5,st)))}let pt=(()=>{class o{constructor(e,a,n){this.table=e,this.pessoaOperacaoService=a,this.isMobile=n,this.faFilePdf=v.gSj,this.maskType=ot.O,this.list=[],this.tableLinks=[],this.columns=q.Yv,this.subscription=[],this.screen=L.I.lg;var i=this.pessoaOperacaoService.list.subscribe(d=>{this.list=Object.assign([],d)});this.subscription.push(i);var l=this.isMobile.value.subscribe(d=>this.screen=d);this.subscription.push(l),(0,m.n)(this.pessoaOperacaoService.getList());var r=this.table.selected.subscribe(d=>{d&&(this.tableLinks=[{label:"Detalhes",routePath:["detalhes"],paramsFieldName:["id"]},{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(r)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(at.i),t.Y36(C.m),t.Y36(L.h))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:16,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mx-md-1","mb-2","px-0","ng-star-inserted"],[1,"btn","btn-danger","btn-pdf","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[1,"me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"],[2,"margin-top","-1px","margin-bottom","1px"],[1,"btn","btn-success","bg-success","border-success","btn-excel","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-upload",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"]],template:function(a,n){if(1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),t.qZA()(),t.kcU(),t.TgZ(8,"div",8)(9,"h3",9),t._uU(10,"Opera\xe7\xf5es"),t.qZA()()(),t.TgZ(11,"div",10),t.YNc(12,lt,20,6,"ng-template",null,11,t.W1O),t._UZ(14,"app-list-shared",12),t.qZA()(),t._UZ(15,"router-outlet")),2&a){const i=t.MAs(13);t.xp6(14),t.Q6J("list",n.list)("topActions",i)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[f.lC,f.rH,nt.o]})}return o})();var F=p(342),M=p(8008),A=p(2719),ct=p(1225),J=p(2667),w=p(2425),E=p(2352),Q=p(5219),c=p(6223),D=p(8839),dt=p(6044);const mt=["template"],ut=["icon"];function _t(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),t.qZA())}function gt(o,s){if(1&o&&(t.TgZ(0,"table",37)(1,"tbody")(2,"tr")(3,"td",38),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"tr")(11,"td",38),t._uU(12),t.qZA(),t.TgZ(13,"td",38),t._uU(14,"Situa\xe7\xe3o CPF: "),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()),2&o){const e=s.$implicit;let a;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(t.gM2(9,4,e.saldoAtual,"BRL","","1.2")),t.xp6(4),t.Oqu(e.cpf),t.xp6(4),t.Oqu(null!==(a=e.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function ht(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function ft(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ht,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(10);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function xt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function vt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,xt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(19);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Zt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function bt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Zt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(28);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ct(o,s){if(1&o&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("ngValue",e.id),t.xp6(1),t.Oqu(e.name)}}function Tt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Mt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Tt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(42);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function At(o,s){if(1&o&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function qt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function wt(o,s){if(1&o&&(t.TgZ(0,"div",40),t.YNc(1,At,2,1,"p",39),t.YNc(2,qt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!a.erro)}}function Ut(o,s){1&o&&t._UZ(0,"span",41)}function yt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.TgZ(2,"div",9)(3,"div",10)(4,"div",11)(5,"label",12),t._uU(6,"Pessoa: "),t.TgZ(7,"span",13),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"p-dropdown",14,15),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.pessoa_Id=n)}),t.YNc(11,gt,17,9,"ng-template",16),t.qZA(),t.YNc(12,ft,2,1,"div",17),t.qZA(),t.TgZ(13,"div",18)(14,"label",19),t._uU(15,"N\xba Opera\xe7\xe3o: "),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"input",20,21),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.num_Op=n)}),t.qZA(),t.YNc(20,vt,2,1,"div",17),t.qZA()(),t.TgZ(21,"div",10)(22,"div",22)(23,"label",23),t._uU(24,"Data: "),t.TgZ(25,"span",13),t._uU(26,"*"),t.qZA()(),t.TgZ(27,"input",24,25),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.data=n)}),t.qZA(),t.YNc(29,bt,2,1,"div",17),t.qZA(),t.TgZ(30,"div",22)(31,"label",26),t._uU(32,"Valor: "),t.TgZ(33,"span",13),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"app-input-number",27),t.NdJ("valueChanges",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.valor=n)}),t.qZA()(),t.TgZ(36,"div",22)(37,"label",28),t._uU(38,"Status: "),t.TgZ(39,"span",13),t._uU(40,"*"),t.qZA()(),t.TgZ(41,"select",29,30),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.operacao_Status_Id=n)}),t.TgZ(43,"option",31),t._uU(44,"Selecione"),t.qZA(),t.YNc(45,Ct,2,2,"option",32),t.qZA(),t.YNc(46,Mt,2,1,"div",17),t.qZA()()(),t.TgZ(47,"div",33),t.YNc(48,wt,3,2,"div",34),t.TgZ(49,"button",35),t.YNc(50,Ut,1,0,"span",36),t.TgZ(51,"span"),t._uU(52,"Salvar"),t.qZA()()()()}if(2&o){const e=t.MAs(1),a=t.MAs(10),n=t.MAs(19),i=t.MAs(28),l=t.MAs(42),r=t.oxw();t.xp6(9),t.Q6J("options",r.pessoas)("ngModel",r.objeto.pessoa_Id)("styleClass","form-control "+(r.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("disabled",r.isEditPage)("readonly",r.isEditPage)("required",!0),t.xp6(3),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(6),t.Q6J("ngModel",r.objeto.num_Op),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(7),t.Q6J("ngModel",r.objeto.data),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(6),t.Q6J("valueInput",r.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1),t.xp6(6),t.ekj("form-control-loading",r.loadingStatus),t.Q6J("ngModel",r.objeto.operacao_Status_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",r.status),t.xp6(1),t.Q6J("ngIf",l.touched&&l.errors),t.xp6(2),t.Q6J("ngIf",r.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}let j=(()=>{class o{constructor(e,a,n,i,l,r,d,h){this.activatedRoute=e,this.modal=a,this.pessoaService=n,this.pessoaSaldoService=i,this.pessoaOperacaoService=l,this.crypto=r,this.datepipe=d,this.toastr=h,this.objeto=new q.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.pessoas=[],this.loadingPessoa=!0,this.isEditPage=!0,this.pessoa_id=0,this.routeBackOptions={relativeTo:this.activatedRoute},(0,m.n)(this.pessoaOperacaoService.getStatus()).then(g=>{this.loadingStatus=!1,this.status=g}),(0,m.n)(this.pessoaService.getList()).then(g=>{this.loadingPessoa=!1,this.pessoas=g})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.style.next({"max-width":"600px",overflow:"visible"}),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon);var e=this.activatedRoute.params.subscribe(a=>{a.operacao_id?(this.objeto.id=this.crypto.decrypt(a.operacao_id),this.modal.title.next("Editar Opera\xe7\xe3o"),this.modal.routerBack.next(["../../"]),this.isEditPage=!0,(0,m.n)(this.pessoaOperacaoService.get(this.objeto.id)).then(n=>{n.data=this.datepipe.transform(n.data,"yyyy-MM-ddThh:mm"),n.num_Op=n.num_Op.toString().padStart(4,"0"),this.objeto=n,this.pessoa_id=this.objeto.pessoa_Id,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(n=>{this.voltar()})):(this.modal.title.next("Cadastrar Opera\xe7\xe3o"),this.modal.routerBack.next(["../"]),this.isEditPage=!1,this.objeto.data=this.datepipe.transform(this.objeto.data,"yyyy-MM-ddThh:mm"),setTimeout(()=>{this.modal.setOpen(!0)},200))});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}send(){this.loading=!0,this.erro="",this.request().then(e=>{1==e.successo?((0,m.n)(this.pessoaService.getList()),(0,m.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,m.n)(this.pessoaOperacaoService.getListById(this.objeto.pessoa_Id)),(0,m.n)(this.pessoaOperacaoService.getList()),this.voltar()):(this.erro=e.mensagem,this.toastr.error(e.mensagem)),this.loading=!1}).catch(e=>{this.loading=!1,this.erro=(0,F.b)(e)})}request(){return 0==this.objeto.id?(0,m.n)(this.pessoaOperacaoService.create(this.objeto)):(this.isEditPage&&(this.objeto.pessoa_Id=this.pessoa_id),(0,m.n)(this.pessoaOperacaoService.edit(this.objeto)))}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(f.gz),t.Y36(M.u),t.Y36(A.N),t.Y36(ct.R),t.Y36(C.m),t.Y36(J.w),t.Y36(_.uU),t.Y36(w._W))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(a,n){if(1&a&&(t.Gf(mt,5),t.Gf(ut,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-md-8","col-sm-8","col-12"],["for","pessoa_Id"],[1,"text-danger"],["filterBy","nome, saldoAtual, cpf, situacaoCPF","name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um pessoa",3,"options","ngModel","styleClass","showClear","filter","disabled","readonly","required","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"form-group","col-md-4","col-sm-4","col-sm-12"],["for","num_Op"],["mask","0000","name","num_Op","id","num_Op","required","",1,"form-control",3,"ngModel","ngModelChange"],["num_Op","ngModel"],[1,"form-group","col-md-4","col-sm-12"],["for","data"],["type","datetime-local","name","data","id","data","required","",1,"form-control",3,"ngModel","ngModelChange"],["data","ngModel"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],["class","text-danger",4,"ngIf"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.YNc(0,_t,5,0,"ng-template",null,0,t.W1O),t.YNc(2,yt,53,29,"ng-template",null,1,t.W1O))},dependencies:[_.sg,_.O5,E.Lt,Q.jx,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.On,c.F,D.hx,dt.l,_.H9]})}return o})();var Y=p(5597);const It=["template"],Ot=["icon"];function Nt(o,s){if(1&o&&t._UZ(0,"fa-icon",2),2&o){const e=t.oxw();t.Q6J("icon",e.faTrash)}}function Ft(o,s){if(1&o&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function Jt(o,s){1&o&&t._UZ(0,"span",9)}function Et(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,Ft,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(7,Jt,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading)}}let Qt=(()=>{class o{constructor(e,a,n,i,l){this.modal=e,this.crypto=a,this.activatedRoute=n,this.pessoaService=i,this.pessoaOperacaoService=l,this.faTrash=v.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.routeBackOptions={relativeTo:this.activatedRoute};var r=n.params.subscribe(d=>{d.operacao_id?(this.id=this.crypto.decrypt(d.operacao_id),(0,m.n)(this.pessoaService.get(this.id)).then(h=>{setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(h=>{this.voltar()})):this.voltar()});this.subscription.push(r)}ngAfterViewInit(){this.modal.title.next("Excluir registro"),this.modal.template.next(this.template),this.modal.style.next({"max-width":"400px"}),this.modal.routerBack.next(["../../"]),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}send(){this.loading=!0,this.erro="",(0,m.n)(this.pessoaOperacaoService.delete(this.id)).then(e=>{(0,m.n)(this.pessoaService.getList()),(0,m.n)(this.pessoaOperacaoService.getList()),this.voltar(),this.loading=!1}).catch(e=>{this.loading=!1,this.erro=(0,F.b)(e)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(M.u),t.Y36(J.w),t.Y36(f.gz),t.Y36(A.N),t.Y36(C.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(a,n){if(1&a&&(t.Gf(It,5),t.Gf(Ot,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.YNc(0,Nt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,Et,10,2,"ng-template",null,1,t.W1O))},dependencies:[_.O5,Y.BN]})}return o})();var P=p(1193),H=p(1486),U=p(4685),k=p(1532);const Yt=["template"],St=["icon"],Bt=["file"];function Lt(o,s){1&o&&t._UZ(0,"img",3)}function Dt(o,s){1&o&&(t.TgZ(0,"th")(1,"span",25),t._uU(2,"Retorno"),t.qZA(),t._UZ(3,"p-sortIcon",26)(4,"p-columnFilter",30),t.qZA()),2&o&&(t.xp6(3),t.Q6J("field","statusCadastro"),t.xp6(1),t.Q6J("type","text")("field","statusCadastro")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1))}function jt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"p-calendar",34),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw(4);return t.KtG(i.currentDateFilter.dataTransacao=n)})("onClear",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.currentDateFilter.dataTransacao=void 0)})("onBlur",function(){const i=t.CHM(e).filterCallback;t.oxw();const l=t.MAs(9),r=t.oxw(3);return t.KtG(r.primeNgDataFilter(r.currentDateFilter.dataTransacao,i,l))})("onSelect",function(){const i=t.CHM(e).filterCallback;t.oxw();const l=t.MAs(9),r=t.oxw(3);return t.KtG(r.primeNgDataFilter(r.currentDateFilter.dataTransacao,i,l))}),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("ngModel",e.currentDateFilter.dataTransacao)("showIcon",!0)}}function Pt(o,s){if(1&o&&(t.TgZ(0,"tr",23),t.YNc(1,Dt,5,7,"th",24),t.TgZ(2,"th")(3,"span",25),t._uU(4,"Data da "),t._UZ(5,"br"),t._uU(6," Transa\xe7\xe3o"),t.qZA(),t._UZ(7,"p-sortIcon",26),t.TgZ(8,"p-columnFilter",27,28),t.YNc(10,jt,1,2,"ng-template",29),t.qZA()(),t.TgZ(11,"th")(12,"span",25),t._uU(13,"Tipo de "),t._UZ(14,"br"),t._uU(15," Cliente no "),t._UZ(16,"br"),t._uU(17," Brasil"),t.qZA(),t._UZ(18,"p-sortIcon",26)(19,"p-columnFilter",30),t.qZA(),t.TgZ(20,"th")(21,"div",31)(22,"span",32),t._uU(23,"CPF/CNPJ do "),t._UZ(24,"br"),t._uU(25," cliente no "),t._UZ(26,"br"),t._uU(27," Brasil"),t.qZA(),t._UZ(28,"p-sortIcon",26)(29,"p-columnFilter",30),t.qZA()(),t.TgZ(30,"th")(31,"span",25),t._uU(32,"Nome do Cliente no Brasil"),t.qZA(),t._UZ(33,"p-sortIcon",26)(34,"p-columnFilter",30),t.qZA(),t.TgZ(35,"th")(36,"span",25),t._uU(37,"Nome do Comprador ou Vendedor no "),t._UZ(38,"br"),t._uU(39," Exterior"),t.qZA(),t._UZ(40,"p-sortIcon",26)(41,"p-columnFilter",30),t.qZA(),t.TgZ(42,"th")(43,"span",25),t._uU(44,"Pa\xeds do "),t._UZ(45,"br"),t._uU(46," Comprador "),t._UZ(47,"br"),t._uU(48," ou Vendedor "),t._UZ(49,"br"),t._uU(50," no Exterior"),t.qZA(),t._UZ(51,"p-sortIcon",26)(52,"p-columnFilter",30),t.qZA(),t.TgZ(53,"th")(54,"span",25),t._uU(55,"Moeda"),t.qZA(),t._UZ(56,"p-sortIcon",26)(57,"p-columnFilter",30),t.qZA(),t.TgZ(58,"th")(59,"span",25),t._uU(60,"Tipo de "),t._UZ(61,"br"),t._uU(62," Transa\xe7\xe3o"),t.qZA(),t._UZ(63,"p-sortIcon",26)(64,"p-columnFilter",30),t.qZA(),t.TgZ(65,"th")(66,"span",25),t._uU(67,"Forma de "),t._UZ(68,"br"),t._uU(69," Pagamento"),t.qZA(),t._UZ(70,"p-sortIcon",26)(71,"p-columnFilter",30),t.qZA(),t.TgZ(72,"th")(73,"span",25),t._uU(74,"Valor na "),t._UZ(75,"br"),t._uU(76," Moeda "),t._UZ(77,"br"),t._uU(78," Estrangeira"),t.qZA(),t._UZ(79,"p-sortIcon",26)(80,"p-columnFilter",30),t.qZA(),t.TgZ(81,"th")(82,"span",25),t._uU(83,"Valor na "),t._UZ(84,"br"),t._uU(85," Moeda "),t._UZ(86,"br"),t._uU(87," Nacional"),t.qZA(),t._UZ(88,"p-sortIcon",26)(89,"p-columnFilter",30),t.qZA(),t.TgZ(90,"th")(91,"span",25),t._uU(92,"Status Opera\xe7\xe3o"),t.qZA(),t._UZ(93,"p-sortIcon",26)(94,"p-columnFilter",30),t.qZA(),t._UZ(95,"th",33),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.retornoAPI),t.xp6(6),t.Q6J("field","dataTransacao"),t.xp6(1),t.Q6J("type","date")("field","dataTransacao")("display","menu")("matchMode","dateIs")("showMatchModes",!0)("showAddButton",!0)("showOperator",!1),t.xp6(10),t.Q6J("field","tipoCliente"),t.xp6(1),t.Q6J("type","text")("field","tipoCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(9),t.Q6J("field","docCliente"),t.xp6(1),t.Q6J("type","text")("field","docCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","nomeCliente"),t.xp6(1),t.Q6J("type","text")("field","nomeCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","nomeComprador"),t.xp6(1),t.Q6J("type","text")("field","nomeComprador")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(10),t.Q6J("field","paisCompradorVendedor"),t.xp6(1),t.Q6J("type","text")("field","paisCompradorVendedor")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","moeda"),t.xp6(1),t.Q6J("type","text")("field","moeda")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","tipoTransacao"),t.xp6(1),t.Q6J("type","text")("field","tipoTransacao")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","formaPagamento"),t.xp6(1),t.Q6J("type","text")("field","formaPagamento")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(8),t.Q6J("field","valorMoedaEstrangeira"),t.xp6(1),t.Q6J("type","text")("field","valorMoedaEstrangeira")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(8),t.Q6J("field","valorMoedaNacional"),t.xp6(1),t.Q6J("type","text")("field","valorMoedaNacional")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","statusOperacao"),t.xp6(1),t.Q6J("type","text")("field","statusOperacao")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1)}}function Ht(o,s){if(1&o&&t.YNc(0,Pt,96,86,"tr",22),2&o){const e=t.oxw(2);t.Q6J("ngIf",e.list.length>0)}}function kt(o,s){if(1&o&&(t.TgZ(0,"span",39),t._UZ(1,"fa-icon",40),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("icon",e.faCircleXmark)}}function Gt(o,s){if(1&o&&(t.TgZ(0,"span",41),t._UZ(1,"fa-icon",40),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("icon",e.faCircleCheck)}}function Rt(o,s){if(1&o&&(t.TgZ(0,"td")(1,"div",36),t.YNc(2,kt,2,1,"span",37),t.YNc(3,Gt,2,1,"span",38),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf","OK"!=e.statusCadastro),t.xp6(1),t.Q6J("ngIf","OK"==e.statusCadastro),t.xp6(2),t.Oqu(e.statusCadastro)}}function Vt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,Rt,6,3,"td",24),t.TgZ(2,"td"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"currency"),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.ALo(26,"currency"),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td",33)(30,"button",35),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.removeItem(i))}),t._uU(31,"excluir"),t.qZA()()()}if(2&o){const e=s.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.retornoAPI),t.xp6(2),t.Oqu(t.xi3(4,13,e.dataTransacao,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.tipoCliente),t.xp6(2),t.Oqu(e.docCliente),t.xp6(2),t.Oqu(e.nomeCliente),t.xp6(2),t.Oqu(e.nomeComprador),t.xp6(2),t.Oqu(e.paisCompradorVendedor),t.xp6(2),t.Oqu(e.moeda),t.xp6(2),t.Oqu(e.tipoTransacao),t.xp6(2),t.Oqu(e.formaPagamento),t.xp6(2),t.Oqu(t.gM2(23,16,e.valorMoedaEstrangeira,"BRL","","1.2")),t.xp6(3),t.Oqu(t.gM2(26,21,e.valorMoedaNacional,"BRL","","1.2")),t.xp6(3),t.Oqu(e.statusOperacao)}}function zt(o,s){if(1&o&&(t.TgZ(0,"p",44),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Kt(o,s){1&o&&(t.TgZ(0,"p",44),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar"),t.qZA())}function Wt(o,s){if(1&o&&(t.TgZ(0,"div",42),t.YNc(1,zt,2,1,"p",43),t.YNc(2,Kt,2,0,"p",43),t.qZA()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!a.erro)}}function $t(o,s){1&o&&t._UZ(0,"span",45)}function Xt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",4,5),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.TgZ(2,"label",6)(3,"p",7),t._UZ(4,"i",8),t.qZA(),t.TgZ(5,"h3"),t._uU(6,"Clique e arraste para selecionar arquivo"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"ou "),t.TgZ(9,"label",9),t._uU(10,"clique aqui"),t.qZA(),t._uU(11," para abrir explorador de arquivos"),t.qZA(),t.TgZ(12,"p")(13,"small"),t._uU(14,"Voc\xea tamb\xe9m pode copiar e colar as linhas aqui para importar os dados"),t.qZA()(),t.TgZ(15,"input",10,11),t.NdJ("change",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.readExcel1(n))}),t.qZA()(),t.TgZ(17,"div",12)(18,"p-table",13),t.YNc(19,Ht,1,1,"ng-template",14),t.YNc(20,Vt,32,26,"ng-template",15),t.qZA()(),t.TgZ(21,"div",16)(22,"div")(23,"p",17)(24,"a",18),t._uU(25,"Clique aqui para saber como deve ser o arquivo XLSX"),t.qZA()(),t.YNc(26,Wt,3,2,"div",19),t.qZA(),t.TgZ(27,"button",20),t.YNc(28,$t,1,0,"span",21),t.TgZ(29,"span"),t._uU(30,"Salvar"),t.qZA()()()()}if(2&o){const e=t.MAs(1),a=t.oxw();t.xp6(18),t.Q6J("value",a.list)("globalFilterFields",a.filters)("filterDelay",100),t.xp6(8),t.Q6J("ngIf",a.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||a.loading),t.xp6(1),t.Q6J("ngIf",a.loading)}}let te=(()=>{class o{constructor(e,a,n,i,l){this.toastr=e,this.modal=a,this.activatedRoute=n,this.pessoaOperacaoService=i,this.pessoaService=l,this.faUpload=v.cf$,this.faCircleXmark=v.WA2,this.faTriangleExclamation=v.ik8,this.faCircleCheck=v.fV7,this.loading=!1,this.modalOpen=!1,this.erro="",this.subscription=[],this.routerBack=["../"],this.list=[],this.filters=["cpf","nome","dataNascimento","situacaoCPF","dataInscricao","digito","anoObito","excel_Status","excel_Data_Cap","excel_Hora_Cap","excel_IdNum","excel_Erro"],this.currentDateFilter={dataTransacao:void 0},this.retornoAPI=!1,this.routeBackOptions={relativeTo:this.activatedRoute},this.modal.title.next("Importar Arquivo"),this.modal.style.next({width:"max-content","max-width":"95vw"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute),this.modal.onPaste.subscribe(r=>{this.paste(r)})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.icon.next(this.icon),setTimeout(()=>{this.modal.setOpen(!0)},200)}primeNgDataFilter(e,a,n){e?a(new Date(e)):n.clearFilter()}paste(e){var a=e.clipboardData?.getData("text/plain").split("\r\n")??[],n=this.setNewId(this.list);for(var i of a){var l=i.split("\t");try{var r=this.formataData(l[0]),d=l[1],h=l[2]?l[2].toString().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").padStart(11,"0"):"",g=l[3],Z=l[4],b=l[5],x=l[6],T=l[7],y=l[8],I=l[9],O=l[10],u=l[11];if(Number.isNaN(Date.parse(r.toString())))this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Data de transa\xe7\xe3o inv\xe1lida.");else if(d.trim())if((0,P.v)(h))if(g.trim())if(Z.trim())if(b.trim())if(x.trim())if(T.trim())if(y.trim())if(I.trim())if(O.trim())if(u.trim()){var N={id:n++,dataTransacao:r,tipoCliente:d,docCliente:h,nomeCliente:g,nomeComprador:Z,paisCompradorVendedor:b,moeda:x,tipoTransacao:T,formaPagamento:y,valorMoedaEstrangeira:I,valorMoedaNacional:O,statusOperacao:u};this.list.push(N)}else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Status opera\xe7\xe3o n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Valor na moeda nacional n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Valor na moeda estrangeira n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Forma de pagamento n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Tipo de transa\xe7\xe3o n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Moeda n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Pa\xeds do comprador ou vendedor no exterior n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Nome do comprador ou vendedor no exterior n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Nome do Cliente no Brasil n\xe3o foi preenchido corretamente.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> CPF inv\xe1lido.");else this.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Tipo de Cliente no Brasil n\xe3o foi preenchido corretamente.")}catch{this.toastr.error("N\xe3o foi poss\xedvel importar linha. <br> Ignorando linha e processando pr\xf3xima.")}}}ngOnDestroy(){this.modal.setOpen(!1),this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions),this.modal.resetModal()}readExcel1(e){var a=e.target.files,n=new FileReader;!function i(l,r){if(l>=a.length)r.file.reset();else{var d=a[l];n.onload=function(h){var Z=H.ij(n.result,{type:"binary"});Z.SheetNames.reduce((x,T)=>{const y=Z.Sheets[T];let I=r.setNewId(r.list);x[T]=H.P6.sheet_to_json(y,{rawNumbers:!1}),x[T].forEach(O=>{try{var u=Object.entries(O),N=r.formataData(u[0][1]),S=u[1][1],G=u[2][1]?u[2][1].toString().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").padStart(11,"0"):"",R=u[3][1],V=u[4][1],z=u[5][1],K=u[6][1],W=u[7][1],$=u[8][1],X=u[9][1],tt=u[10][1],et=u[11][1];if(Number.isNaN(Date.parse(N.toString())))r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Data de transa\xe7\xe3o inv\xe1lida.");else if(S.trim())if((0,P.v)(G))if(R.trim())if(V.trim())if(z.trim())if(K.trim())if(W.trim())if($.trim())if(X.trim())if(tt.trim())if(et.trim()){var Oe={id:I++,dataTransacao:N,tipoCliente:S,docCliente:G,nomeCliente:R,nomeComprador:V,paisCompradorVendedor:z,moeda:K,tipoTransacao:W,formaPagamento:$,valorMoedaEstrangeira:X,valorMoedaNacional:tt,statusOperacao:et};r.list.push(Oe)}else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Status opera\xe7\xe3o n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Valor na moeda nacional n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Valor na moeda estrangeira n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Forma de pagamento n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Tipo de transa\xe7\xe3o n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Moeda n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Pa\xeds do comprador ou vendedor no exterior n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Nome do comprador ou vendedor no exterior n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Nome do Cliente no Brasil n\xe3o foi preenchido corretamente.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> CPF inv\xe1lido.");else r.toastr.error("N\xe3o foi poss\xedvel importar essa linha. <br> Tipo de Cliente no Brasil n\xe3o foi preenchido corretamente.")}catch(Ne){console.error(Ne),r.toastr.error("N\xe3o foi poss\xedvel importar uma linha. <br> Ignorando linha e processando pr\xf3xima.")}return x})},{}),i(l+1,r)},n.readAsBinaryString(d)}}(0,this)}setNewId(e){return((e=this.sortList(e)).length>0?e[e.length-1].id:0)+1}sortList(e){return e.sort((a,n)=>a.id-n.id)}removeItem(e){var a=this.list.findIndex(n=>n.id==e.id&&n.docCliente==e.docCliente);-1!=a?this.list.splice(a,1):this.toastr.error("N\xe3o foi poss\xedvel remover item.")}formataData(e,a,n){var i=0,l=0,r=0,d=e.split("/"),h=parseInt(d[2]),g=parseInt(d[1]),Z=parseInt(d[0]);if(a){var b=a.split(":");i=parseInt(b[0]),l=parseInt(b[1]),r=parseInt(b[2])}return new Date(h,g,Z,i,l,r)}send(){this.loading=!0,this.erro="";var e=Object.assign([],this.list);if(0==(e=e.map(a=>(delete a.id,delete a.statusCadastro,a))).length)return this.toastr.error("Nenhum item selecionado."),void(this.erro="Nenhum item selecionado.");(0,m.n)(this.pessoaOperacaoService.importacao(e)).then(a=>{(0,m.n)(this.pessoaOperacaoService.getList()),(0,m.n)(this.pessoaService.getList()),this.loading=!1,a.find(n=>"OK"!=n.statusCadastro)?(this.toastr.clear(),this.toastr.error("Alguns registros n\xe3o puderam ser salvos."),this.erro="Alguns registros n\xe3o puderam ser salvos.",this.list=a,this.retornoAPI=!0):this.voltar()}).catch(a=>{this.loading=!1,this.erro=(0,F.b)(a)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(w._W),t.Y36(M.u),t.Y36(f.gz),t.Y36(C.m),t.Y36(A.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-importacao"]],viewQuery:function(a,n){if(1&a&&(t.Gf(Yt,5),t.Gf(St,5),t.Gf(Bt,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first),t.iGM(i=t.CRH())&&(n.file=i.first)}},hostBindings:function(a,n){1&a&&t.NdJ("paste",function(l){return n.paste(l)})},decls:5,vars:0,consts:[[3,"paste"],["icon",""],["template",""],["src","assets/img/icon-excel.png"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],["type","file","name","file","id","file","multiple","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"ngModel","change"],["file","ngModel"],[1,"table-responsive","content"],["styleClass","table table-stripped p-datatable-striped",3,"value","globalFilterFields","filterDelay"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],[1,"text-info"],["href","assets/modelos/modelo-importacao-operacao.xlsx","download","modelo-importacao-operacao.xlsx"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","grey",4,"ngIf"],[1,"grey"],[4,"ngIf"],[1,"me-3"],[3,"field"],[3,"type","field","display","matchMode","showMatchModes","showAddButton","showOperator"],["dataTransacaoFilter",""],["pTemplate","filter"],[3,"type","field","display","matchMode","showMatchModes","showAddButton"],[1,"d-flex","align-items-center","justify-content-between"],[1,"me-auto"],[1,"td-actions"],["inputId","dataTransacao","dateFormat","dd/mm/yy",3,"ngModel","showIcon","ngModelChange","onClear","onBlur","onSelect"],["type","button",1,"btn","btn-small","btn-dark",3,"click"],[1,"d-flex","align-items-center"],["class","me-2 flag flag-text flag-danger",4,"ngIf"],["class","me-2 flag flag-text flag-green",4,"ngIf"],[1,"me-2","flag","flag-text","flag-danger"],[3,"icon"],[1,"me-2","flag","flag-text","flag-green"],[1,"m-0"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t.NdJ("paste",function(l){return n.paste(l)}),t.YNc(1,Lt,1,0,"ng-template",null,1,t.W1O),t.YNc(3,Xt,31,6,"ng-template",null,2,t.W1O),t.qZA())},dependencies:[_.O5,Y.BN,Q.jx,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,U.iA,U.fz,U.xl,k.f,_.H9,_.uU],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}"]})}return o})();var ee=p(5861);const oe=["template"],ae=["icon"];function ne(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4),t.qZA())}function ie(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",null,5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),t._uU(6,"Nome:"),t.qZA(),t._UZ(7,"input",10),t.qZA(),t.TgZ(8,"div",11)(9,"label",12),t._uU(10,"CPF:"),t.qZA(),t._UZ(11,"input",13),t.qZA()(),t.TgZ(12,"div",7)(13,"div",14)(14,"label",15),t._uU(15,"Data da Opera\xe7\xe3o:"),t.qZA(),t._UZ(16,"input",16),t.qZA(),t.TgZ(17,"div",14)(18,"label",17),t._uU(19,"Valor da Opera\xe7\xe3o:"),t.qZA(),t._UZ(20,"input",18),t.qZA()(),t.TgZ(21,"div",7)(22,"div",19)(23,"label",20),t._uU(24,"Limite Concedido:"),t.qZA(),t._UZ(25,"input",21),t.qZA(),t.TgZ(26,"div",19)(27,"label",22),t._uU(28,"Limite Utilizado:"),t.qZA(),t._UZ(29,"input",23),t.qZA(),t.TgZ(30,"div",19)(31,"label",24),t._uU(32,"Limite Atual:"),t.qZA(),t._UZ(33,"input",25),t.qZA(),t.TgZ(34,"div",26)(35,"label",27),t._uU(36,"Status Opera\xe7\xe3o:"),t.qZA(),t._UZ(37,"input",28),t.qZA()(),t.TgZ(38,"div",29)(39,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportarPDF())}),t.TgZ(40,"span",31),t.O4$(),t.TgZ(41,"svg",32),t._UZ(42,"path",33)(43,"path",34),t.qZA()(),t._uU(44," Exportar relat\xf3rio "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("value",e.objetoList.nomeCliente),t.xp6(4),t.Q6J("value",e.objetoList.cpfCliente),t.xp6(5),t.Q6J("value",e.objeto.data),t.xp6(4),t.Q6J("value",e.objetoList.valorOperacao),t.xp6(5),t.Q6J("value",e.objetoList.limiteConcedido),t.xp6(4),t.Q6J("value",e.objetoList.limiteUtilizado),t.xp6(4),t.Q6J("value",e.objetoList.limiteAtual),t.xp6(4),t.Q6J("value",e.objetoList.statusOperacao)}}let re=(()=>{class o{constructor(e,a,n,i,l,r,d){this.activatedRoute=e,this.toastr=a,this.modal=n,this.crypto=i,this.datepipe=l,this.pessoaService=r,this.pessoaOperacaoService=d,this.faFile=v.gMD,this.modalOpen=!1,this.objeto=new q.fs,this.objetoList=new q.cU,this.loading=!1,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var h=this.modal.getOpen().subscribe(g=>this.modalOpen=g);this.subscription.push(h),this.modal.title.next("Detalhes"),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){var e=this,a=this.activatedRoute.params.subscribe(function(){var n=(0,ee.Z)(function*(i){if(i.operacao_id){if(e.objeto.id=e.crypto.decrypt(i.operacao_id),0==(l=e.pessoaOperacaoService.list.value).length)var l=yield(0,m.n)(e.pessoaOperacaoService.getList());if(e.objetoList=l.find(r=>r.id==e.objeto.id),!e.objetoList)return void e.voltar();e.objeto.data=e.datepipe.transform(new Date(e.objeto.data),"yyyy-MM-ddTHH:mm"),(0,m.n)(e.pessoaOperacaoService.get(e.objeto.id)).then(r=>{e.objeto=r}).catch(r=>{e.voltar()})}else e.voltar()});return function(i){return n.apply(this,arguments)}}());this.subscription.push(a),this.modal.template.next(this.template),this.modal.icon.next(this.icon),setTimeout(()=>{this.modal.setOpen(!0)},200)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}exportarPDF(){this.loading=!0,this.loading=!1}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(f.gz),t.Y36(w._W),t.Y36(M.u),t.Y36(J.w),t.Y36(_.uU),t.Y36(A.N),t.Y36(C.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-details"]],viewQuery:function(a,n){if(1&a&&(t.Gf(oe,5),t.Gf(ae,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-post",2,"margin-top","-6px"],["d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],["d","M4 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7zm0-3a.5.5 0 0 1 .5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5z"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-lg-9","col-md-6","col-12"],["for","nome"],["type","text","id","nome","name","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-3","col-md-6","col-12"],["for","cpfCliente"],["type","text","id","cpfCliente","name","cpfCliente","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-6","col-12"],["for","dataOperacao"],["type","datetime-local","id","dataOperacao","name","dataOperacao","readonly","",1,"form-control",3,"value"],["for","valorOperacao"],["type","text","id","valorOperacao","name","valorOperacao","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-4","col-md-6","col-sm-6","col-12"],["for","limiteConcedido"],["type","text","id","limiteConcedido","name","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado"],["type","text","id","limiteUtilizado","name","limiteUtilizado","readonly","",1,"form-control",3,"value"],["for","limiteAtual"],["type","text","id","limiteAtual","name","limiteAtual","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-6","col-md-6","col-sm-6","col-12"],["for","status"],["type","text","id","status","name","status","readonly","",1,"form-control",3,"value"],[1,"row","px-1","mt-2"],[1,"btn","btn-dark",3,"click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-down"],["fill-rule","evenodd","d","M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"],["fill-rule","evenodd","d","M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"]],template:function(a,n){1&a&&(t.YNc(0,ne,3,0,"ng-template",null,0,t.W1O),t.YNc(2,ie,45,8,"ng-template",null,1,t.W1O))},dependencies:[c._Y,c.JL,c.F]})}return o})();const se=["template"],le=["icon"];function pe(o,s){1&o&&t._UZ(0,"img",2)}function ce(o,s){if(1&o&&(t.TgZ(0,"table",38)(1,"tbody")(2,"tr")(3,"td",39),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"tr")(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14,"Situa\xe7\xe3o CPF: "),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()),2&o){const e=s.$implicit;let a;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(t.gM2(9,4,e.saldoAtual,"BRL","","1.2")),t.xp6(4),t.Oqu(e.cpf),t.xp6(4),t.Oqu(null!==(a=e.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function de(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function me(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,de,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(13);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function ue(o,s){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function _e(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function ge(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,_e,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(35);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function he(o,s){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function fe(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function xe(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,fe,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(42);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function ve(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Ze(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ve,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(55);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function be(o,s){if(1&o&&(t.TgZ(0,"p",40),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Ce(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,be,2,1,"p",23),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.erro)}}function Te(o,s){1&o&&t._UZ(0,"span",42)}function Me(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h6"),t._uU(3,"Escolha os dados que deseja exportar"),t.qZA()(),t.TgZ(4,"form",null,5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11,"Pessoa: "),t.qZA(),t.TgZ(12,"p-dropdown",11,12),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.pessoa_Id=n)}),t.YNc(14,ce,17,9,"ng-template",13),t.qZA(),t.YNc(15,me,2,1,"div",14),t.qZA()()(),t.TgZ(16,"div",7)(17,"div",8)(18,"div",15)(19,"input",16,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(21,"label",18),t._uU(22,"Exportar base completa"),t.qZA()()()(),t.TgZ(23,"div",7)(24,"div",8)(25,"div",15)(26,"input",19,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(28,"label",20),t._uU(29,"Exportar por Per\xedodo"),t.qZA()(),t.TgZ(30,"div",21)(31,"label",22),t._uU(32,"De: "),t.YNc(33,ue,2,0,"span",23),t.qZA(),t.TgZ(34,"input",24,25),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.de=n)}),t.qZA(),t.YNc(36,ge,2,1,"div",14),t.qZA(),t.TgZ(37,"div",21)(38,"label",26),t._uU(39,"At\xe9: "),t.YNc(40,he,2,0,"span",23),t.qZA(),t.TgZ(41,"input",27,28),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.ate=n)}),t.qZA(),t.YNc(43,xe,2,1,"div",14),t.qZA()()(),t.TgZ(44,"div",7)(45,"div",8)(46,"div",15)(47,"input",29,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(49,"label",30),t._uU(50,"Exportar por Data"),t.qZA()(),t.TgZ(51,"div",9)(52,"label",31),t._uU(53,"Data:"),t.qZA(),t.TgZ(54,"input",32,33),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.data=n)}),t.qZA(),t.YNc(56,Ze,2,1,"div",14),t.qZA()()()(),t.TgZ(57,"div",4)(58,"div",34),t.YNc(59,Ce,2,1,"div",35),t.TgZ(60,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportar())}),t.YNc(61,Te,1,0,"span",37),t.TgZ(62,"span"),t._uU(63,"Exportar"),t.qZA()()()()()()}if(2&o){const e=t.MAs(5),a=t.MAs(13),n=t.MAs(35),i=t.MAs(42),l=t.MAs(55),r=t.oxw();t.xp6(12),t.Q6J("options",r.pessoas)("ngModel",r.filtro.pessoa_Id)("styleClass","form-control "+(r.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0),t.xp6(3),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(4),t.Q6J("value",void 0)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("value",!0)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",r.filtro.de)("required",1==r.datasFiltro||i.value)("disabled",!r.datasFiltro),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(4),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",r.filtro.ate)("required",1==r.datasFiltro||n.value)("disabled",!r.datasFiltro),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(4),t.Q6J("value",!1)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("ngModel",r.filtro.data)("required",0==r.datasFiltro)("disabled",null==r.datasFiltro||r.datasFiltro),t.xp6(2),t.Q6J("ngIf",l.touched&&l.errors),t.xp6(3),t.Q6J("ngIf",r.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}let Ae=(()=>{class o{constructor(e,a,n,i,l,r){this.pessoaService=e,this.pessoaOperacaoService=a,this.activatedRoute=n,this.modal=i,this.toastr=l,this.datePipe=r,this.pessoas=[],this.loadingPessoa=!0,this.filtro=new qe,this.subscription=[],this.erro="",this.loading=!1,(0,m.n)(this.pessoaService.getList()).then(d=>{this.loadingPessoa=!1,this.pessoas=d,setTimeout(()=>{this.modal.setOpen(!0)},200)})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.style.next({"max-width":"400px",overflow:"visible"}),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon),this.modal.title.next("Exportar Opera\xe7\xf5es"),this.modal.routerBack.next(["../"])}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}datasChanged(){this.datasFiltro?delete this.filtro.data:0==this.datasFiltro?(delete this.filtro.de,delete this.filtro.ate):null==this.datasFiltro&&(delete this.filtro.data,delete this.filtro.de,delete this.filtro.ate)}exportar(){this.loading=!0,(0,m.n)(this.pessoaOperacaoService.exportacao(this.filtro)).then(e=>{var a=new Blob([e],{type:"application/pdf"});const n=window.URL.createObjectURL(a);var i=document.createElement("a");i.href=n,i.download=`Relatorio_Operacoes_${this.datePipe.transform(new Date,"yyyyMMddHHmmss")}`,i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),this.loading=!1}).catch(e=>{this.loading=!1})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(A.N),t.Y36(C.m),t.Y36(f.gz),t.Y36(M.u),t.Y36(w._W),t.Y36(_.uU))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-exportacao"]],viewQuery:function(a,n){if(1&a&&(t.Gf(se,5),t.Gf(le,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-pdf.png"],[1,"px-2"],[1,"row"],["form","ngForm"],[1,"row","mt-2"],[1,"col-12","my-2"],[1,"bg-light","d-flex","flex-wrap","border","py-2"],[1,"form-group","col-12"],["for","pessoa_Id",1,"text-info"],["filterBy","nome, saldoAtual, cpf, situacaoCPF","name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Todas",3,"options","ngModel","styleClass","showClear","filter","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"col-12"],["type","radio","name","datas","id","nao",3,"value","ngModel","ngModelChange"],["datas","ngModel"],["for","nao",1,"mb-1","ms-2","text-info"],["type","radio","name","datas","id","intervalo",3,"value","ngModel","ngModelChange"],["for","intervalo",1,"mb-1","ms-2","text-info"],[1,"form-group","col-sm-6","col-12"],["for","de"],["class","text-danger",4,"ngIf"],["type","date","name","de","id","de",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["de","ngModel"],["for","ate"],["type","date","name","ate","id","ate",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["ate","ngModel"],["type","radio","name","datas","id","ou",3,"value","ngModel","ngModelChange"],["for","ou",1,"mb-1","ms-2","text-info"],["for","data"],["type","date","name","data","id","data",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["data","ngModel"],[1,"px-1","d-flex","justify-content-between","align-items-start"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],[1,"text-danger"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div"),t.YNc(1,pe,1,0,"ng-template",null,0,t.W1O),t.YNc(3,Me,64,29,"ng-template",null,1,t.W1O),t.qZA())},dependencies:[_.O5,E.Lt,Q.jx,c._Y,c.Fj,c._,c.JJ,c.JL,c.Q7,c.On,c.F,_.H9]})}return o})();class qe{constructor(){this.pessoa_Id=void 0}}const we=[{path:"",component:pt,children:[{path:"cadastrar",component:j},{path:"exportar",component:Ae},{path:"importar",component:te},{path:"editar/:operacao_id",component:j},{path:"detalhes/:operacao_id",component:re},{path:"excluir/:operacao_id",component:Qt}]}];let Ue=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(we),f.Bz]})}return o})();var ye=p(6208);let Ie=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[_.ez,Ue,Y.uH,E.kW,c.u5,D.yI.forChild(),ye.m,U.U$,k._8]})}return o})()}}]);
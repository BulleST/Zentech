"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[531],{6531:(tt,h,i)=>{i.r(h),i.d(h,{OperacoesModule:()=>K});var d=i(6814),p=i(132),_=i(2832),c=i(708),g=i(8145),t=i(9291),b=i(8787),v=i(2828),x=i(6599);const T=function(){return["cadastrar"]};function Z(e,l){1&e&&(t.TgZ(0,"div",13)(1,"a",14)(2,"span",15),t._uU(3," Cadastrar Opera\xe7\xe3o"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,T)))}let C=(()=>{class e{constructor(o,a){this.table=o,this.pessoaOperacaoService=a,this.maskType=_.O,this.list=[],this.tableLinks=[],this.columns=g.c5,this.subscription=[];var s=this.pessoaOperacaoService.list.subscribe(m=>{this.list=Object.assign([],m)});this.subscription.push(s),(0,c.n)(this.pessoaOperacaoService.getList());var n=this.table.selected.subscribe(m=>{m&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(n),this.table.currentPage.next(1)}ngOnDestroy(){this.subscription.forEach(o=>o.unsubscribe())}ngAfterViewChecked(){setTimeout(()=>{this.table.currentPageChange()},200)}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(b.i),t.Y36(v.m))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:16,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-4","col-md-4","col-sm-12","col-12","mb-2","me-md-2","mx-md-1","px-0"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(a,s){if(1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),t.qZA()(),t.kcU(),t.TgZ(8,"div",8)(9,"h3",9),t._uU(10,"Opera\xe7\xf5es"),t.qZA()()(),t.TgZ(11,"div",10),t.YNc(12,Z,4,2,"ng-template",null,11,t.W1O),t._UZ(14,"app-list-shared",12),t.qZA()(),t._UZ(15,"router-outlet")),2&a){const n=t.MAs(13);t.xp6(14),t.Q6J("list",s.list)("topActions",n)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",s.columns)("tableLinks",s.tableLinks)("selectable",!0)}},dependencies:[p.lC,p.rH,x.o]})}return e})();var M=i(342),A=i(8008),F=i(2719),y=i(1225),O=i(2667),S=i(2425),r=i(6223),J=i(6044);const j=["template"],I=["icon"];function N(e,l){1&e&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),t.qZA())}function w(e,l){1&e&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function U(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,w,2,0,"p",32),t.qZA()),2&e){t.oxw();const o=t.MAs(10);t.xp6(1),t.Q6J("ngIf",o.errors.required)}}function Y(e,l){if(1&e&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.Q6J("ngValue",o.id),t.xp6(1),t.Oqu(o.name)}}function Q(e,l){1&e&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function L(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Q,2,0,"p",32),t.qZA()),2&e){t.oxw();const o=t.MAs(24);t.xp6(1),t.Q6J("ngIf",o.errors.required)}}function z(e,l){if(1&e&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&e){const o=t.oxw(3);t.xp6(1),t.Oqu(o.erro)}}function B(e,l){1&e&&(t.TgZ(0,"p",13),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function E(e,l){if(1&e&&(t.TgZ(0,"div",33),t.YNc(1,z,2,1,"p",32),t.YNc(2,B,2,0,"p",32),t.qZA()),2&e){t.oxw();const o=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",o.invalid&&!a.erro)}}function V(e,l){1&e&&t._UZ(0,"span",34)}function k(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.send())}),t.TgZ(2,"div",9)(3,"div",10)(4,"div",11)(5,"label",12),t._uU(6,"Data: "),t.TgZ(7,"span",13),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",14,15),t.NdJ("ngModelChange",function(s){t.CHM(o);const n=t.oxw();return t.KtG(n.objeto.data=s)}),t.qZA(),t.YNc(11,U,2,1,"div",16),t.qZA(),t.TgZ(12,"div",11)(13,"label",17),t._uU(14,"Valor: "),t.TgZ(15,"span",13),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"app-input-number",18),t.NdJ("valueChanges",function(s){t.CHM(o);const n=t.oxw();return t.KtG(n.objeto.valor=s)}),t.qZA()(),t.TgZ(18,"div",11)(19,"label",19),t._uU(20,"Status: "),t.TgZ(21,"span",13),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"select",20,21),t.NdJ("ngModelChange",function(s){t.CHM(o);const n=t.oxw();return t.KtG(n.objeto.operacao_Status_Id=s)}),t.TgZ(25,"option",22),t._uU(26,"Selecione"),t.qZA(),t.YNc(27,Y,2,2,"option",23),t.qZA(),t.YNc(28,L,2,1,"div",16),t.qZA()(),t.TgZ(29,"div",10)(30,"div",24)(31,"input",25,26),t.NdJ("ngModelChange",function(s){t.CHM(o);const n=t.oxw();return t.KtG(n.objeto.chargeback=s)}),t.qZA(),t.TgZ(33,"label",27),t._uU(34,"Charge Back:"),t.qZA()()()(),t.TgZ(35,"div",28),t.YNc(36,E,3,2,"div",29),t.TgZ(37,"button",30),t.YNc(38,V,1,0,"span",31),t.TgZ(39,"span"),t._uU(40,"Salvar"),t.qZA()()()()}if(2&e){const o=t.MAs(1),a=t.MAs(10),s=t.MAs(24),n=t.oxw();t.xp6(9),t.Q6J("ngModel",n.objeto.data),t.xp6(2),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(6),t.Q6J("valueInput",n.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1),t.xp6(6),t.ekj("form-control-loading",n.loadingStatus),t.Q6J("ngModel",n.objeto.operacao_Status_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",n.status),t.xp6(1),t.Q6J("ngIf",s.touched&&s.errors),t.xp6(3),t.Q6J("ngModel",n.objeto.chargeback)("value",!0),t.xp6(5),t.Q6J("ngIf",n.erro||o.invalid),t.xp6(1),t.Q6J("disabled",o.invalid||n.loading),t.xp6(1),t.Q6J("ngIf",n.loading)}}let f=(()=>{class e{constructor(o,a,s,n,m,W,X,$){this.activatedRoute=o,this.modal=a,this.pessoaService=s,this.pessoaSaldoService=n,this.pessoaOperacaoService=m,this.crypto=W,this.datepipe=X,this.toastr=$,this.objeto=new g.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.pessoas=[],this.loadingPessoa=!0,this.routeBackOptions={relativeTo:this.activatedRoute},(0,c.n)(this.pessoaOperacaoService.getStatus()).then(u=>{this.loadingStatus=!1,this.status=u}),(0,c.n)(this.pessoaService.getList()).then(u=>{this.loadingPessoa=!1,this.pessoas=u})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.style.next({"max-width":"600px",overflow:"visible"}),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon);var o=this.activatedRoute.params.subscribe(a=>{a.operacao_id?(this.objeto.id=this.crypto.decrypt(a.operacao_id),this.modal.title.next("Editar Opera\xe7\xe3o"),this.modal.routerBack.next(["../../"]),(0,c.n)(this.pessoaOperacaoService.get(this.objeto.id)).then(s=>{this.objeto=s,this.objeto.data=this.datepipe.transform(this.objeto.data,"yyyy-MM-ddThh:mm"),setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(s=>{this.voltar()})):(this.modal.title.next("Cadastrar Opera\xe7\xe3o"),this.modal.routerBack.next(["../"]),this.objeto.data=this.datepipe.transform(this.objeto.data,"yyyy-MM-ddThh:mm"),setTimeout(()=>{this.modal.setOpen(!0)},200))});this.subscription.push(o),setTimeout(()=>{this.modal.setOpen(!0)},200)}ngOnDestroy(){this.subscription.forEach(o=>o.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}send(){this.loading=!0,this.erro="",this.request().then(o=>{1==o.successo?((0,c.n)(this.pessoaService.getList()),(0,c.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,c.n)(this.pessoaOperacaoService.getListById(this.objeto.pessoa_Id)),this.voltar()):(this.erro=o.mensagem,this.toastr.error(o.mensagem)),this.loading=!1}).catch(o=>{this.loading=!1,this.erro=(0,M.b)(o)})}request(){return(0,c.n)(0==this.objeto.id?this.pessoaOperacaoService.create(this.objeto):this.pessoaOperacaoService.edit(this.objeto))}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(p.gz),t.Y36(A.u),t.Y36(F.N),t.Y36(y.R),t.Y36(v.m),t.Y36(O.w),t.Y36(d.uU),t.Y36(S._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],viewQuery:function(a,s){if(1&a&&(t.Gf(j,5),t.Gf(I,5)),2&a){let n;t.iGM(n=t.CRH())&&(s.template=n.first),t.iGM(n=t.CRH())&&(s.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-md-4","col-sm-12"],["for","data"],[1,"text-danger"],["type","datetime-local","name","data","id","data","required","",1,"form-control",3,"ngModel","ngModelChange"],["data","ngModel"],[4,"ngIf"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-12","d-flex"],["type","checkbox","name","chargeBack","id","chargeBack",3,"ngModel","value","ngModelChange"],["chargeBack","ngModel"],["for","chargeBack",1,"mb-0","ms-2"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,s){1&a&&(t.YNc(0,N,5,0,"ng-template",null,0,t.W1O),t.YNc(2,k,41,20,"ng-template",null,1,t.W1O))},dependencies:[d.sg,d.O5,r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r.JJ,r.JL,r.Q7,r.On,r.F,J.l]})}return e})();const q=[{path:"",component:C,children:[{path:"cadastrar",component:f},{path:"editar/:id",component:f},{path:"excluir/:id",component:(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-delete"]],decls:2,vars:0,template:function(a,s){1&a&&(t.TgZ(0,"p"),t._uU(1,"delete works!"),t.qZA())}})}return e})()}]}];let H=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(q),p.Bz]})}return e})();var R=i(5597),G=i(2352),P=i(8839),D=i(6208);let K=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[d.ez,H,R.uH,G.kW,r.u5,P.yI.forChild(),D.m]})}return e})()}}]);
"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[879],{1064:(B,b,i)=>{i.d(b,{V:()=>x}),i(5219),i(2832);class x{constructor(){this.id=0,this.nome="",this.simbolo="",this.codigo=""}}},9952:(B,b,i)=>{i.r(b),i.d(b,{BeneficiarioModule:()=>ae});var u=i(6814),l=i(5597),x=i(2352),m=i(6223),t=i(4685),v=i(1532),r=i(132),_=i(5861),T=i(9296),L=i(2832),M=i(708),Z=i(590),e=i(9291),N=i(8787),y=i(6793),P=i(6434),d=i(5038),S=i(6599),a=i(9901);function p(s,A){if(1&s&&(e.TgZ(0,"p",13)(1,"small"),e._uU(2,"Benefici\xe1rios cadastrados em "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&s){const n=e.oxw();e.xp6(4),e.Oqu(n.empresaSelected.nome||"Empresa X")}}function h(s,A){1&s&&e._UZ(0,"span",14)}const f=function(){return["cadastrar"]};function R(s,A){1&s&&(e.TgZ(0,"div",15)(1,"a",16)(2,"span",17),e._uU(3," Cadastrar Benefici\xe1rio"),e.qZA()()()),2&s&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,f)))}let J=(()=>{class s{constructor(n,o,c,g){var F=this;this.table=n,this.beneficiarioService=o,this.accountService=c,this.empresaService=g,this.faUsers=Z.FVb,this.maskType=L.O,this.list=[],this.tableLinks=[],this.columns=T.XM,this.subscription=[],this.loading=!1;var oe=this.beneficiarioService.list.subscribe(C=>this.list=Object.assign([],C));this.subscription.push(oe);var re=this.beneficiarioService.loading.subscribe(C=>this.loading=C);this.subscription.push(re);var le=this.empresaService.getEmpresa().subscribe(function(){var C=(0,_.Z)(function*(D){F.empresaSelected=D.empresa,D&&D.id&&(yield(0,M.n)(F.beneficiarioService.getList(!0)))});return function(D){return C.apply(this,arguments)}}());this.subscription.push(le);var ce=this.table.selected.subscribe(C=>{C&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(ce)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}getList(){(0,M.n)(this.beneficiarioService.getList(!0))}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(N.i),e.Y36(y.i),e.Y36(P.B),e.Y36(d.P))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-list"]],decls:18,vars:14,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["class","page__header-subtitle",4,"ngIf"],[1,"ms-auto","mt-auto",2,"margin-bottom","7px"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"page__header-subtitle"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"col-xl-4","col-lg-4","col-md-7","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",2,"width","-1px",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(o,c){if(1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Benefici\xe1rios"),e.qZA(),e.YNc(7,p,5,1,"p",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return c.getList()}),e.YNc(10,h,1,0,"span",9),e._uU(11,"Atualizar"),e.qZA()(),e._UZ(12,"app-empresa-selected"),e.qZA(),e.TgZ(13,"div",10),e.YNc(14,R,4,2,"ng-template",null,11,e.W1O),e._UZ(16,"app-list-shared",12),e.qZA()(),e._UZ(17,"router-outlet")),2&o){const g=e.MAs(15);e.xp6(3),e.Q6J("icon",c.faUsers),e.xp6(4),e.Q6J("ngIf",c.empresaSelected),e.xp6(2),e.Q6J("disabled",c.loading),e.xp6(1),e.Q6J("ngIf",c.loading),e.xp6(6),e.Q6J("list",c.list)("topActions",g)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",c.columns)("tableLinks",c.tableLinks)("selectable",!0)}},dependencies:[u.O5,r.lC,r.rH,l.BN,S.o,a.j]})}return s})();var U=i(8902),E=i(2855),O=i(342),j=i(9324),G=i(2667);const V=["template"],H=["icon"];function w(s,A){if(1&s&&e._UZ(0,"fa-icon",2),2&s){const n=e.oxw();e.Q6J("icon",n.faTrash)}}function z(s,A){if(1&s&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&s){const n=e.oxw(2);e.xp6(2),e.Oqu(n.erro)}}function X(s,A){1&s&&e._UZ(0,"span",9)}function $(s,A){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,z,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.send())}),e.YNc(7,X,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&s){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.erro),e.xp6(2),e.Q6J("ngIf",n.loading)}}let k=(()=>{class s{constructor(n,o,c,g){this.activatedRoute=n,this.modalService=o,this.beneficiarioService=c,this.crypto=g,this.faTrash=Z.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new E.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var n=this.activatedRoute.params.subscribe(o=>{if(o.beneficiario_id)try{this.id=this.crypto.decrypt(o.beneficiario_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete beneficiario")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(n)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,M.n)(this.beneficiarioService.delete(this.id)).then(n=>{this.loading=!1,n.sucesso?(n.objeto?(0,j.Od)(this.beneficiarioService,n.objeto):(0,M.n)(this.beneficiarioService.getList()),this.voltar()):this.erro=n.mensagem}).catch(n=>{this.loading=!1,this.erro=(0,O.b)(n)})}static#e=this.\u0275fac=function(o){return new(o||s)(e.Y36(r.gz),e.Y36(E.Z),e.Y36(y.i),e.Y36(G.w))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-delete"]],viewQuery:function(o,c){if(1&o&&(e.Gf(V,5),e.Gf(H,5)),2&o){let g;e.iGM(g=e.CRH())&&(c.template=g.first),e.iGM(g=e.CRH())&&(c.icon=g.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,c){1&o&&(e.YNc(0,w,1,1,"ng-template",null,0,e.W1O),e.YNc(2,$,10,2,"ng-template",null,1,e.W1O))},dependencies:[u.O5,l.BN]})}return s})();var K=i(2996),I=i(2951),Q=i(8410),q=i(7280),Y=i(490),W=i(9742);const ee=[{path:"",component:J,title:"Zentech - Benefici\xe1rios",children:[{path:"cadastrar",component:U.U,title:"Zentech - Cadastrar Benefici\xe1rio",data:{modalOrder:1},children:[{path:"banco",component:K.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:I.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}},{path:"representante/:representante_id",component:I.U,title:"Zentech - Editar Representante",data:{modalOrder:2}},{path:"representante/excluir/:representante_id",component:Q.T,title:"Zentech - Excluir Representante",data:{modalOrder:2,data:[Y.uU.Admin]},canActivate:[W.p]}]},{path:"editar/:beneficiario_id",title:"Zentech - Editar Benefici\xe1rio",component:U.U,data:{modalOrder:1},children:[{path:"banco",component:K.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:I.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}},{path:"representante/:representante_id",component:I.U,title:"Zentech - Editar Representante",data:{modalOrder:2}},{path:"representante/excluir/:representante_id",component:Q.T,title:"Zentech - Excluir Representante",data:{modalOrder:2,data:[Y.uU.Admin]},canActivate:[W.p]}]},{path:"excluir/:beneficiario_id",title:"Zentech - Excluir Benefici\xe1rio",component:k,data:{modalOrder:1,data:[Y.uU.Admin]},canActivate:[W.p]},q.D]}];let te=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[r.Bz.forChild(ee),r.Bz]})}return s})();var ie=i(5805),se=i(3735),ne=i(5096);let ae=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({providers:[(0,se.e$)()],imports:[u.ez,te,l.uH,x.kW,m.u5,ie.m,t.U$,v._8,ne.O]})}return s})()},9901:(B,b,i)=>{i.d(b,{j:()=>P});var u=i(5861),l=i(708),x=i(490),m=i(5038),t=i(9291),v=i(6434),r=i(4939),_=i(6814),T=i(6223),L=i(5219),M=i(2352);function Z(d,S){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const a=t.oxw(3);t.xp6(1),t.Oqu(null==a.empresaSelected.empresa?null:a.empresaSelected.empresa.nome)}}function e(d,S){if(1&d&&t.YNc(0,Z,2,1,"span",7),2&d){const a=t.oxw(2);t.Q6J("ngIf",a.empresaSelected.id)}}function N(d,S){if(1&d&&(t.TgZ(0,"p"),t._uU(1),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA()),2&d){const a=S.$implicit;t.xp6(1),t.Oqu(a.nome),t.xp6(2),t.Oqu(a.logo)}}function y(d,S){if(1&d){const a=t.EpF();t.TgZ(0,"div",1)(1,"label",2),t._uU(2,"Selecione a Empresa para carregar dados"),t.qZA(),t.TgZ(3,"p-dropdown",3,4),t.NdJ("ngModelChange",function(h){t.CHM(a);const f=t.oxw();return t.KtG(f.empresaChange(h))})("ngModelChange",function(h){t.CHM(a);const f=t.oxw();return t.KtG(f.empresaSelected.id=h)}),t.YNc(5,e,1,1,"ng-template",5),t.YNc(6,N,4,2,"ng-template",6),t.qZA()()}if(2&d){const a=t.oxw();t.xp6(3),t.Q6J("options",a.empresas)("ngModel",a.empresaSelected.id)("filter",!0)("showClear",!1)("required",!0)}}let P=(()=>{class d{constructor(a,p,h){var f=this;this.empresaService=a,this.accountService=p,this.colors=h,this.empresaSelected=new m.I,this.empresas=[],this.loading=!1,this.Role=x.uU,this.subscription=[];var R=this.accountService.accountSubject.subscribe(function(){var E=(0,u.Z)(function*(O){f.account=O,O&&(1==O.perfilAcesso_Id&&0==f.empresaService.list.value.length&&(yield(0,l.n)(f.empresaService.getList())),(1!=O.perfilAcesso_Id||!f.empresaService.getEmpresa().value.empresa)&&f.empresaService.setEmpresa({id:O.empresa_Id,empresa:O.empresa}))});return function(O){return E.apply(this,arguments)}}());this.subscription.push(R);var J=this.empresaService.getEmpresa().subscribe(E=>{this.empresaSelected=E,E&&this.setColorsJquery()});this.subscription.push(J);var U=this.empresaService.list.subscribe(E=>{this.empresas=E});this.subscription.push(U)}ngOnDestroy(){this.subscription.forEach(a=>a.unsubscribe())}empresaChange(a){var p=this;return(0,u.Z)(function*(){if(p.accountService.accountValue&&1==p.accountService.accountValue?.perfilAcesso_Id&&a){0==p.empresas.length&&(yield(0,l.n)(p.empresaService.getList()));var h=p.empresas.find(f=>f.id==a);p.empresaService.setEmpresa({empresa:h,id:a})}})()}setColorsJquery(){this.colors.setColorsJquery(this.empresaSelected.empresa)}static#e=this.\u0275fac=function(p){return new(p||d)(t.Y36(m.P),t.Y36(v.B),t.Y36(r.w))};static#t=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-empresa-selected"]],decls:1,vars:1,consts:[["class","form-group ms-2",4,"ngIf"],[1,"form-group","ms-2"],["for","empresa_Id"],["name","empresa_Id","id","empresa_Id","optionValue","id","filterBy","nome","styleClass","form-control","placeholder","Selecione uma empresa",3,"options","ngModel","filter","showClear","required","ngModelChange"],["empresa_Id","ngModel"],["pTemplate","selectedItem"],["pTemplate","item"],[4,"ngIf"]],template:function(p,h){1&p&&t.YNc(0,y,7,5,"div",0),2&p&&t.Q6J("ngIf",h.account&&1==(null==h.account?null:h.account.perfilAcesso_Id))},dependencies:[_.O5,T.JJ,T.Q7,T.On,L.jx,M.Lt]})}return d})()},9324:(B,b,i)=>{function u(m,t,v="list"){var r=JSON.parse(JSON.stringify(m[v].value));r=r.filter(_=>!t.includes(_.id)),console.log("list",r),m[v].next(r)}function l(m,t,v="list"){var r=JSON.parse(JSON.stringify(m[v].value)),_=r.findIndex(T=>T.id==t.id);r.splice(_,1),m[v].next(r)}function x(m,t,v="list"){var r=JSON.parse(JSON.stringify(m[v].value));if(t.id){var _=r.findIndex(T=>T.id==t.id);-1==_&&r.push(t),r.splice(_,1,t)}else r.push(t);m[v].next(r)}i.d(b,{Od:()=>l,UB:()=>u,fb:()=>x})}}]);
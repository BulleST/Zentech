"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[143],{1143:(j,A,c)=>{c.r(A),c.d(A,{OperacoesModule:()=>lt});var i=c(6814),C=c(132),q=c(2832),f=c(708),M=c(8145),T=c(590),y=c(674),e=c(9291),I=c(8787),w=c(2828),O=c(6599);const N=function(){return["exportar"]},E=function(){return["importar"]},U=function(){return["cadastrar"]};function S(o,l){1&o&&(e.TgZ(0,"div",13)(1,"a",14)(2,"span",15),e.O4$(),e.TgZ(3,"svg",16),e._UZ(4,"path",17)(5,"path",18),e.qZA()(),e.kcU(),e.TgZ(6,"span",19),e._uU(7," Exportar PDF"),e.qZA()()(),e.TgZ(8,"div",13)(9,"a",20)(10,"span",15),e.O4$(),e.TgZ(11,"svg",21),e._UZ(12,"path",17)(13,"path",22),e.qZA()(),e.kcU(),e.TgZ(14,"span",19),e._uU(15," Importar EXCEL"),e.qZA()()(),e.TgZ(16,"div",23)(17,"a",24)(18,"span",19),e._uU(19," Cadastrar Opera\xe7\xe3o"),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,N)),e.xp6(8),e.Q6J("routerLink",e.DdM(4,E)),e.xp6(8),e.Q6J("routerLink",e.DdM(5,U)))}let k=(()=>{class o{constructor(t,a,n){this.table=t,this.pessoaOperacaoService=a,this.isMobile=n,this.faFilePdf=T.gSj,this.maskType=q.O,this.list=[],this.tableLinks=[],this.columns=M.Yv,this.subscription=[],this.screen=y.I.lg;var r=this.pessoaOperacaoService.list.subscribe(x=>{this.list=Object.assign([],x)});this.subscription.push(r);var b=this.isMobile.value.subscribe(x=>this.screen=x);this.subscription.push(b),(0,f.n)(this.pessoaOperacaoService.getList());var d=this.table.selected.subscribe(x=>{x&&(this.tableLinks=[{label:"Detalhes",routePath:["detalhes"],paramsFieldName:["id"]},{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(d)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(I.i),e.Y36(w.m),e.Y36(y.h))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-list"]],decls:18,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon",2,"font-size","36px"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mx-md-1","mb-2","px-0","ng-star-inserted"],[1,"btn","btn-danger","btn-pdf","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[1,"me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"],[2,"margin-top","-1px","margin-bottom","1px"],[1,"btn","btn-success","bg-success","border-success","btn-excel","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-upload",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"]],template:function(a,n){if(1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),e.qZA()(),e.kcU(),e.TgZ(8,"div",8)(9,"h3",9),e._uU(10,"Opera\xe7\xf5es"),e.qZA(),e.TgZ(11,"p"),e._uU(12,"Painel CPF"),e.qZA()()(),e.TgZ(13,"div",10),e.YNc(14,S,20,6,"ng-template",null,11,e.W1O),e._UZ(16,"app-list-shared",12),e.qZA()(),e._UZ(17,"router-outlet")),2&a){const r=e.MAs(15);e.xp6(16),e.Q6J("list",n.list)("topActions",r)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[C.lC,C.rH,O.o]})}return o})();var u=c(5861),h=c(2855),s=c(342),Z=c(2719),p=c(1225),v=c(2667),g=c(2425),m=c(8839),F=c(2352),L=c(5219),_=c(6223),D=c(6044);const H=["template"],R=["icon"];function G(o,l){1&o&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),e.qZA())}function z(o,l){if(1&o&&(e.TgZ(0,"table",36)(1,"tbody")(2,"tr")(3,"td",37),e._uU(4),e.qZA(),e.TgZ(5,"td",37),e._uU(6,"Saldo atual: "),e.TgZ(7,"strong"),e._uU(8),e.qZA()()(),e.TgZ(9,"tr")(10,"td",37),e._uU(11),e.qZA(),e.TgZ(12,"td",37),e._uU(13,"Situa\xe7\xe3o CPF: "),e.TgZ(14,"strong"),e._uU(15),e.qZA()()()()()),2&o){const t=l.$implicit;e.xp6(4),e.Oqu(t.nome),e.xp6(4),e.Oqu(t.saldoAtual),e.xp6(3),e.Oqu(t.cpf),e.xp6(4),e.Oqu(t.situacaoCPF)}}function B(o,l){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function K(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,B,2,0,"p",38),e.qZA()),2&o){e.oxw();const t=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}const W=function(){return["nome","saldoAtual","cpf","situacaoCPF"]};function $(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"label",32),e._uU(2,"Pessoa: "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"p-dropdown",33,34),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.objeto.pessoa_Id=n)}),e.YNc(7,z,16,4,"ng-template",35),e.qZA(),e.YNc(8,K,2,1,"div",17),e.qZA()}if(2&o){const t=e.MAs(6),a=e.oxw(2);e.xp6(5),e.Q6J("options",a.pessoas)("ngModel",a.objeto.pessoa_Id)("styleClass","form-control "+(a.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",e.DdM(14,W))("disabled",a.isEditPage)("readonly",a.isEditPage)("required",!0)("showClear",!0)("virtualScroll",!0)("virtualScrollItemSize",50)("scrollHeight","500px"),e.xp6(3),e.Q6J("ngIf",t.touched&&t.errors)}}function X(o,l){if(1&o&&(e.TgZ(0,"div",31)(1,"label",39),e._uU(2,"Pessoa: "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",40),e.qZA()),2&o){const t=e.oxw(2);let a;e.xp6(5),e.Q6J("value",null!==(a=null==t.pessoaSelected?null:t.pessoaSelected.nomeCliente)&&void 0!==a?a:"N/A")}}function ee(o,l){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function te(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ee,2,0,"p",38),e.qZA()),2&o){e.oxw();const t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function oe(o,l){if(1&o&&(e.TgZ(0,"div",19)(1,"label",41),e._uU(2,"Data: "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",42),e.ALo(6,"date"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(5),e.Q6J("value",e.xi3(6,1,t.objeto.data,"dd/MM/yyyy hh:mm"))}}function ae(o,l){if(1&o&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function ie(o,l){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function ne(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ie,2,0,"p",38),e.qZA()),2&o){e.oxw();const t=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function re(o,l){if(1&o&&(e.TgZ(0,"p",14),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function se(o,l){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),e.qZA())}function le(o,l){if(1&o&&(e.TgZ(0,"div",43),e.YNc(1,re,2,1,"p",38),e.YNc(2,se,2,0,"p",38),e.qZA()),2&o){e.oxw();const t=e.MAs(1),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.erro),e.xp6(1),e.Q6J("ngIf",t.invalid&&!a.erro)}}function pe(o,l){1&o&&e._UZ(0,"span",44)}function ue(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",7,8),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.send())}),e.TgZ(2,"div",9)(3,"div",10),e.YNc(4,$,9,15,"div",11),e.YNc(5,X,6,1,"div",11),e.TgZ(6,"div",12)(7,"label",13),e._uU(8,"N\xba Opera\xe7\xe3o: "),e.TgZ(9,"span",14),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"input",15,16),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.objeto.num_Op=n)}),e.qZA(),e.YNc(13,te,2,1,"div",17),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,oe,7,4,"div",18),e.TgZ(16,"div",19)(17,"label",20),e._uU(18,"Valor: "),e.TgZ(19,"span",14),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"app-input-number",21),e.NdJ("valueChanges",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.objeto.valor=n)}),e.qZA()(),e.TgZ(22,"div",19)(23,"label",22),e._uU(24,"Status: "),e.TgZ(25,"span",14),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"select",23,24),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.objeto.operacao_Status_Id=n)}),e.TgZ(29,"option",25),e._uU(30,"Selecione"),e.qZA(),e.YNc(31,ae,2,2,"option",26),e.qZA(),e.YNc(32,ne,2,1,"div",17),e.qZA()()(),e.TgZ(33,"div",27),e.YNc(34,le,3,2,"div",28),e.TgZ(35,"button",29),e.YNc(36,pe,1,0,"span",30),e.TgZ(37,"span"),e._uU(38,"Salvar"),e.qZA()()()()}if(2&o){const t=e.MAs(1),a=e.MAs(12),n=e.MAs(28),r=e.oxw();e.xp6(4),e.Q6J("ngIf",!r.isEditPage),e.xp6(1),e.Q6J("ngIf",r.isEditPage),e.xp6(6),e.Q6J("ngModel",r.objeto.num_Op),e.xp6(2),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(2),e.Q6J("ngIf",r.isEditPage),e.xp6(6),e.Q6J("valueInput",r.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1),e.xp6(6),e.ekj("form-control-loading",r.loadingStatus),e.Q6J("ngModel",r.objeto.operacao_Status_Id),e.xp6(2),e.Q6J("ngValue",void 0),e.xp6(2),e.Q6J("ngForOf",r.status),e.xp6(1),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(2),e.Q6J("ngIf",r.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}}let P=(()=>{class o{constructor(t,a,n,r,b,d,x,J,Y,Q){this.activatedRoute=t,this.modalService=a,this.pessoaService=n,this.pessoaSaldoService=r,this.pessoaOperacaoService=b,this.crypto=d,this.datepipe=x,this.toastr=J,this.mask=Y,this.currencyPipe=Q,this.objeto=new M.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.pessoas=[],this.loadingPessoa=!1,this.isEditPage=!0,this.pessoa_id=0,this.modal=new h.u,(0,f.n)(this.pessoaOperacaoService.getStatus()).then(pt=>{this.loadingStatus=!1,this.status=pt})}ngAfterViewInit(){var t=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var a=this.activatedRoute.params.subscribe(function(){var n=(0,u.Z)(function*(r){if(r.operacao_id)t.objeto.id=t.crypto.decrypt(r.operacao_id),t.modal.title="Editar Opera\xe7\xe3o",t.modal.routerBack=["../../"],t.isEditPage=!0,t.pessoaChange(),(0,f.n)(t.pessoaOperacaoService.get(t.objeto.id)).then(d=>{d.num_Op=d.num_Op?d.num_Op.toString().padStart(4,"0"):"",t.objeto=d,t.pessoa_id=t.objeto.pessoa_Id,setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"moeda")},200)}).catch(d=>{t.voltar()});else{var b=t.pessoaService.list.subscribe(d=>t.pessoas=d);t.subscription.push(b),0==t.pessoas.length&&(t.loadingPessoa=!0,yield(0,f.n)(t.pessoaService.getList(!0)).then(d=>{t.loadingPessoa=!1,t.pessoas=JSON.parse(JSON.stringify(d)),t.pessoas=t.pessoas.map(x=>(x.dataCadastro=t.mask.applyMask(new Date(x.dataCadastro),"dd/MM/yyyy"),x.saldoAtual=t.currencyPipe.transform(x.saldoAtual,"BRL","","1.2"),x.cpf=t.mask.applyMask(x.cpf.toString().padStart(11,"0"),"000.000.000-00"),x))})),t.modal.title="Cadastrar Opera\xe7\xe3o",t.modal.routerBack=["../"],t.isEditPage=!1,t.objeto.data=t.datepipe.transform(t.objeto.data,"yyyy-MM-ddThh:mm"),setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"moeda")},200)}});return function(r){return n.apply(this,arguments)}}());this.subscription.push(a)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}pessoaChange(){this.pessoaSelected=this.pessoaOperacaoService.list.value.find(t=>t.id==this.objeto.id)}send(){this.loading=!0,this.erro="",this.request().then(t=>{1==t.sucesso?((0,f.n)(this.pessoaService.getList()),(0,f.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,f.n)(this.pessoaOperacaoService.getListById(this.objeto.pessoa_Id)),(0,f.n)(this.pessoaOperacaoService.getList()),this.voltar()):(this.erro=t.mensagem,this.toastr.error(t.mensagem)),this.loading=!1}).catch(t=>{this.loading=!1,this.erro=(0,s.b)(t)})}request(){return 0==this.objeto.id?(0,f.n)(this.pessoaOperacaoService.create(this.objeto)):(this.isEditPage&&(this.objeto.pessoa_Id=this.pessoa_id),(0,f.n)(this.pessoaOperacaoService.edit(this.objeto)))}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(C.gz),e.Y36(h.Z),e.Y36(Z.N),e.Y36(p.R),e.Y36(w.m),e.Y36(v.w),e.Y36(i.uU),e.Y36(g._W),e.Y36(m.d6),e.Y36(i.H9))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(a,n){if(1&a&&(e.Gf(H,5),e.Gf(R,5)),2&a){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.icon=r.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],["class","form-group col-md-8 col-sm-8 col-12",4,"ngIf"],[1,"form-group","col-md-4","col-sm-4","col-sm-12"],["for","num_Op"],[1,"text-danger"],["mask","0000","name","num_Op","id","num_Op","required","",1,"form-control",3,"ngModel","ngModelChange"],["num_Op","ngModel"],[4,"ngIf"],["class","form-group col-md-4 col-sm-12 ",4,"ngIf"],[1,"form-group","col-md-4","col-sm-12"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"form-group","col-md-8","col-sm-8","col-12"],["for","pessoa_Id"],["name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um pessoa",3,"options","ngModel","styleClass","showClear","filter","filterFields","disabled","readonly","required","virtualScroll","virtualScrollItemSize","scrollHeight","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[1,"w-100"],[1,"pe-2"],["class","text-danger",4,"ngIf"],["for","pessoa"],["type","text","id","pessoa","name","pessoa","readonly","","disabled","",1,"form-control",3,"value"],["for","data"],["type","text","name","data","id","data","disabled","",1,"form-control",3,"value"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(e.YNc(0,G,5,0,"ng-template",null,0,e.W1O),e.YNc(2,ue,39,21,"ng-template",null,1,e.W1O))},dependencies:[i.sg,i.O5,F.Lt,L.jx,_._Y,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.JL,_.Q7,_.On,_.F,m.hx,D.l,i.uU]})}return o})();var V=c(5597);const de=["template"],ce=["icon"];function me(o,l){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faTrash)}}function _e(o,l){if(1&o&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.erro)}}function ge(o,l){1&o&&e._UZ(0,"span",9)}function fe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,_e,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.send())}),e.YNc(7,ge,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.erro),e.xp6(2),e.Q6J("ngIf",t.loading)}}let he=(()=>{class o{constructor(t,a,n,r,b){this.activatedRoute=t,this.modalService=a,this.pessoaService=n,this.pessoaOperacaoService=r,this.crypto=b,this.faTrash=T.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new h.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var t=this.activatedRoute.params.subscribe(a=>{if(a.operacao_id)try{this.id=this.crypto.decrypt(a.operacao_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete operacao")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(t)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,f.n)(this.pessoaOperacaoService.delete(this.id)).then(t=>{if(this.loading=!1,t.sucesso){var a=this.pessoaOperacaoService.list.value,n=a.findIndex(r=>r.id==this.id);-1!=n&&(a.splice(n,1),this.pessoaOperacaoService.list.next(a)),(0,f.n)(this.pessoaService.getList()),(0,f.n)(this.pessoaOperacaoService.getList()),this.voltar()}else this.erro=t.mensagem}).catch(t=>{this.loading=!1,this.erro=(0,s.b)(t)})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(C.gz),e.Y36(h.Z),e.Y36(Z.N),e.Y36(w.m),e.Y36(v.w))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(a,n){if(1&a&&(e.Gf(de,5),e.Gf(ce,5)),2&a){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.icon=r.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(e.YNc(0,me,1,1,"ng-template",null,0,e.W1O),e.YNc(2,fe,10,2,"ng-template",null,1,e.W1O))},dependencies:[i.O5,V.BN]})}return o})();const ve=["template"],xe=["icon"];function be(o,l){1&o&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"path",3)(2,"path",4),e.qZA())}function Ce(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",null,5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),e._uU(6,"Nome:"),e.qZA(),e._UZ(7,"input",10),e.qZA(),e.TgZ(8,"div",11)(9,"label",12),e._uU(10,"CPF:"),e.qZA(),e._UZ(11,"input",13),e.qZA()(),e.TgZ(12,"div",7)(13,"div",14)(14,"label",15),e._uU(15,"Data da Opera\xe7\xe3o:"),e.qZA(),e._UZ(16,"input",16),e.qZA(),e.TgZ(17,"div",14)(18,"label",17),e._uU(19,"Valor da Opera\xe7\xe3o:"),e.qZA(),e._UZ(20,"input",18),e.ALo(21,"currency"),e.qZA()(),e.TgZ(22,"div",7)(23,"div",19)(24,"label",20),e._uU(25,"Limite Concedido:"),e.qZA(),e._UZ(26,"input",21),e.ALo(27,"currency"),e.qZA(),e.TgZ(28,"div",19)(29,"label",22),e._uU(30,"Limite Utilizado:"),e.qZA(),e._UZ(31,"input",23),e.ALo(32,"currency"),e.qZA(),e.TgZ(33,"div",19)(34,"label",24),e._uU(35,"Limite Atual:"),e.qZA(),e._UZ(36,"input",25),e.ALo(37,"currency"),e.qZA(),e.TgZ(38,"div",26)(39,"label",27),e._uU(40,"Status Opera\xe7\xe3o:"),e.qZA(),e._UZ(41,"input",28),e.qZA()(),e.TgZ(42,"div",29)(43,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.exportarPDF())}),e.TgZ(44,"span",31),e.O4$(),e.TgZ(45,"svg",32),e._UZ(46,"path",33)(47,"path",34),e.qZA()(),e._uU(48," Exportar relat\xf3rio "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("value",t.objetoList.nomeCliente),e.xp6(4),e.Q6J("value",t.objetoList.cpfCliente),e.xp6(5),e.Q6J("value",t.objeto.data),e.xp6(4),e.Q6J("value",e.gM2(21,9,t.objetoList.valorOperacao,"BRL","","1.0-2")),e.xp6(6),e.Q6J("value",e.gM2(27,14,t.objetoList.limiteConcedido,"BRL","","1.0-2")),e.xp6(5),e.Q6J("value",e.gM2(32,19,t.objetoList.limiteUtilizado,"BRL","","1.0-2")),e.xp6(5),e.Q6J("value",e.gM2(37,24,t.objetoList.limiteAtual,"BRL","","1.0-2")),e.xp6(5),e.Q6J("value",t.objetoList.statusOperacao),e.xp6(2),e.Q6J("disabled",t.loading)}}let Ze=(()=>{class o{constructor(t,a,n,r,b,d,x){this.activatedRoute=t,this.toastr=a,this.modalService=n,this.crypto=r,this.datepipe=b,this.pessoaService=d,this.pessoaOperacaoService=x,this.faFile=T.gMD,this.modalOpen=!1,this.objeto=new M.fs,this.objetoList=new M.cU,this.loading=!1,this.subscription=[],this.modal=new h.u}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}ngAfterViewInit(){var t=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.title="Detalhes",this.modal.routerBack=["../../"];var a=this.activatedRoute.params.subscribe(function(){var n=(0,u.Z)(function*(r){if(r.operacao_id){if(t.objeto.id=t.crypto.decrypt(r.operacao_id),0==(b=t.pessoaOperacaoService.list.value).length)var b=yield(0,f.n)(t.pessoaOperacaoService.getList());if(t.objetoList=b.find(d=>d.id==t.objeto.id),!t.objetoList)return void t.voltar();t.objeto.data=t.datepipe.transform(new Date(t.objeto.data),"yyyy-MM-ddTHH:mm"),(0,f.n)(t.pessoaOperacaoService.get(t.objeto.id)).then(d=>{t.objeto=d,setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"moeda")},200)}).catch(d=>{t.voltar()})}else t.voltar()});return function(r){return n.apply(this,arguments)}}());this.subscription.push(a)}voltar(){this.modalService.removeModal(this.modal)}exportarPDF(){var t=this;return(0,u.Z)(function*(){t.loading=!0,yield(0,f.n)(t.pessoaOperacaoService.exportacaoOperacao(t.objeto.id)),t.loading=!1})()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(C.gz),e.Y36(g._W),e.Y36(h.Z),e.Y36(v.w),e.Y36(i.uU),e.Y36(Z.N),e.Y36(w.m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-details"]],viewQuery:function(a,n){if(1&a&&(e.Gf(ve,5),e.Gf(xe,5)),2&a){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.icon=r.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-post",2,"margin-top","-6px"],["d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],["d","M4 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7zm0-3a.5.5 0 0 1 .5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5z"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-lg-9","col-md-6","col-12"],["for","nome"],["type","text","id","nome","name","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-3","col-md-6","col-12"],["for","cpfCliente"],["type","text","id","cpfCliente","name","cpfCliente","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-6","col-12"],["for","dataOperacao"],["type","datetime-local","id","dataOperacao","name","dataOperacao","readonly","",1,"form-control",3,"value"],["for","valorOperacao"],["type","text","id","valorOperacao","name","valorOperacao","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-4","col-md-6","col-sm-6","col-12"],["for","limiteConcedido"],["type","text","id","limiteConcedido","name","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado"],["type","text","id","limiteUtilizado","name","limiteUtilizado","readonly","",1,"form-control",3,"value"],["for","limiteAtual"],["type","text","id","limiteAtual","name","limiteAtual","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-6","col-md-6","col-sm-6","col-12"],["for","status"],["type","text","id","status","name","status","readonly","",1,"form-control",3,"value"],[1,"row","px-1","my-2"],[1,"btn","btn-dark",3,"disabled","click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-down"],["fill-rule","evenodd","d","M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"],["fill-rule","evenodd","d","M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"]],template:function(a,n){1&a&&(e.YNc(0,be,3,0,"ng-template",null,0,e.W1O),e.YNc(2,Ce,49,29,"ng-template",null,1,e.W1O))},dependencies:[_._Y,_.JL,_.F,i.H9]})}return o})();const Te=["template"],we=["icon"];function Me(o,l){1&o&&e._UZ(0,"img",2)}function Ae(o,l){if(1&o&&(e.TgZ(0,"table",38)(1,"tbody")(2,"tr")(3,"td",39),e._uU(4),e.qZA(),e.TgZ(5,"td",39),e._uU(6,"Saldo atual: "),e.TgZ(7,"strong"),e._uU(8),e.ALo(9,"currency"),e.qZA()()(),e.TgZ(10,"tr")(11,"td",39),e._uU(12),e.qZA(),e.TgZ(13,"td",39),e._uU(14,"Situa\xe7\xe3o CPF: "),e.TgZ(15,"strong"),e._uU(16),e.qZA()()()()()),2&o){const t=l.$implicit;let a;e.xp6(4),e.Oqu(t.nome),e.xp6(4),e.Oqu(e.gM2(9,4,t.saldoAtual,"BRL","","1.2")),e.xp6(4),e.Oqu(t.cpf),e.xp6(4),e.Oqu(null!==(a=t.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function ye(o,l){1&o&&(e.TgZ(0,"p",40),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function qe(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ye,2,0,"p",23),e.qZA()),2&o){e.oxw();const t=e.MAs(13);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Ie(o,l){1&o&&(e.TgZ(0,"span",40),e._uU(1,"*"),e.qZA())}function Oe(o,l){1&o&&(e.TgZ(0,"p",40),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Ne(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Oe,2,0,"p",23),e.qZA()),2&o){e.oxw();const t=e.MAs(35);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Ee(o,l){1&o&&(e.TgZ(0,"span",40),e._uU(1,"*"),e.qZA())}function Ue(o,l){1&o&&(e.TgZ(0,"p",40),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Se(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ue,2,0,"p",23),e.qZA()),2&o){e.oxw();const t=e.MAs(42);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Fe(o,l){1&o&&(e.TgZ(0,"p",40),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Je(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Fe,2,0,"p",23),e.qZA()),2&o){e.oxw();const t=e.MAs(55);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Ye(o,l){if(1&o&&(e.TgZ(0,"p",40),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function Qe(o,l){if(1&o&&(e.TgZ(0,"div",41),e.YNc(1,Ye,2,1,"p",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.erro)}}function ke(o,l){1&o&&e._UZ(0,"span",42)}const Le=function(){return["nome","saldoAtual","cpf","situacaoCPF"]};function Pe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h6"),e._uU(3,"Escolha os dados que deseja exportar"),e.qZA()(),e.TgZ(4,"form",null,5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),e._uU(11,"Pessoa: "),e.qZA(),e.TgZ(12,"p-dropdown",11,12),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.filtro.pessoa_Id=n)}),e.YNc(14,Ae,17,9,"ng-template",13),e.qZA(),e.YNc(15,qe,2,1,"div",14),e.qZA()()(),e.TgZ(16,"div",7)(17,"div",8)(18,"div",15)(19,"input",16,17),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.datasFiltro=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.datasChanged())}),e.qZA(),e.TgZ(21,"label",18),e._uU(22,"Exportar base completa"),e.qZA()()()(),e.TgZ(23,"div",7)(24,"div",8)(25,"div",15)(26,"input",19,17),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.datasFiltro=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.datasChanged())}),e.qZA(),e.TgZ(28,"label",20),e._uU(29,"Exportar por Per\xedodo"),e.qZA()(),e.TgZ(30,"div",21)(31,"label",22),e._uU(32,"De: "),e.YNc(33,Ie,2,0,"span",23),e.qZA(),e.TgZ(34,"input",24,25),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.filtro.de=n)}),e.qZA(),e.YNc(36,Ne,2,1,"div",14),e.qZA(),e.TgZ(37,"div",21)(38,"label",26),e._uU(39,"At\xe9: "),e.YNc(40,Ee,2,0,"span",23),e.qZA(),e.TgZ(41,"input",27,28),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.filtro.ate=n)}),e.qZA(),e.YNc(43,Se,2,1,"div",14),e.qZA()()(),e.TgZ(44,"div",7)(45,"div",8)(46,"div",15)(47,"input",29,17),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.datasFiltro=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.datasChanged())}),e.qZA(),e.TgZ(49,"label",30),e._uU(50,"Exportar por Data"),e.qZA()(),e.TgZ(51,"div",9)(52,"label",31),e._uU(53,"Data:"),e.qZA(),e.TgZ(54,"input",32,33),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.filtro.data=n)}),e.qZA(),e.YNc(56,Je,2,1,"div",14),e.qZA()()()(),e.TgZ(57,"div",4)(58,"div",34),e.YNc(59,Qe,2,1,"div",35),e.TgZ(60,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.exportar())}),e.YNc(61,ke,1,0,"span",37),e.TgZ(62,"span"),e._uU(63,"Exportar"),e.qZA()()()()()()}if(2&o){const t=e.MAs(5),a=e.MAs(13),n=e.MAs(35),r=e.MAs(42),b=e.MAs(55),d=e.oxw();e.xp6(12),e.Q6J("options",d.pessoas)("ngModel",d.filtro.pessoa_Id)("styleClass","form-control "+(d.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",e.DdM(34,Le))("showClear",!0)("virtualScroll",!0)("virtualScrollItemSize",50)("scrollHeight","500px"),e.xp6(3),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(4),e.Q6J("value",void 0)("ngModel",d.datasFiltro),e.xp6(7),e.Q6J("value",!0)("ngModel",d.datasFiltro),e.xp6(7),e.Q6J("ngIf",n.value||r.value),e.xp6(1),e.Q6J("ngModel",d.filtro.de)("required",1==d.datasFiltro||r.value)("disabled",!d.datasFiltro),e.xp6(2),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(4),e.Q6J("ngIf",n.value||r.value),e.xp6(1),e.Q6J("ngModel",d.filtro.ate)("required",1==d.datasFiltro||n.value)("disabled",!d.datasFiltro),e.xp6(2),e.Q6J("ngIf",r.touched&&r.errors),e.xp6(4),e.Q6J("value",!1)("ngModel",d.datasFiltro),e.xp6(7),e.Q6J("ngModel",d.filtro.data)("required",0==d.datasFiltro)("disabled",null==d.datasFiltro||d.datasFiltro),e.xp6(2),e.Q6J("ngIf",b.touched&&b.errors),e.xp6(3),e.Q6J("ngIf",d.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||d.loading),e.xp6(1),e.Q6J("ngIf",d.loading)}}let Ve=(()=>{class o{constructor(t,a,n,r,b,d,x,J){this.pessoaService=t,this.pessoaOperacaoService=a,this.activatedRoute=n,this.toastr=r,this.datePipe=b,this.modalService=d,this.mask=x,this.currencyPipe=J,this.pessoas=[],this.loadingPessoa=!0,this.filtro=new je,this.subscription=[],this.erro="",this.loading=!1,this.modal=new h.u;var Y=this.pessoaService.list.subscribe(Q=>this.pessoas=Q);this.subscription.push(Y)}ngAfterViewInit(){var t=this;return(0,u.Z)(function*(){t.modal.id=0,t.modal.template=t.template,t.modal.style={"max-width":"400px"},t.modal.activatedRoute=t.activatedRoute,t.modal.icon=t.icon,t.modal.title="Exportar Opera\xe7\xf5es",t.modal.routerBack=["../"],t.modal.routerBackOptions={relativeTo:t.activatedRoute},0==t.pessoas.length&&(t.loadingPessoa=!0,yield(0,f.n)(t.pessoaService.getList(!0)).then(a=>{t.loadingPessoa=!1,t.pessoas=JSON.parse(JSON.stringify(a)),t.pessoas=t.pessoas.map(n=>(n.dataCadastro=t.mask.applyMask(new Date(n.dataCadastro),"dd/MM/yyyy"),n.saldoAtual=t.currencyPipe.transform(n.saldoAtual,"BRL","","1.2"),n.cpf=t.mask.applyMask(n.cpf.toString().padStart(11,"0"),"000.000.000-00"),n))})),setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"exportar operacao")},200)})()}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}datasChanged(){this.datasFiltro?delete this.filtro.data:0==this.datasFiltro?(delete this.filtro.de,delete this.filtro.ate):null==this.datasFiltro&&(delete this.filtro.data,delete this.filtro.de,delete this.filtro.ate)}exportar(){var t=this;return(0,u.Z)(function*(){t.loading=!0,yield(0,f.n)(t.pessoaOperacaoService.exportacao(t.filtro)),t.loading=!1})()}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(Z.N),e.Y36(w.m),e.Y36(C.gz),e.Y36(g._W),e.Y36(i.uU),e.Y36(h.Z),e.Y36(m.d6),e.Y36(i.H9))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-exportacao"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Te,5),e.Gf(we,5)),2&a){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.icon=r.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-pdf.png"],[1,"px-2"],[1,"row"],["form","ngForm"],[1,"row","mt-2"],[1,"col-12","my-2"],[1,"bg-light","d-flex","flex-wrap","border","py-2"],[1,"form-group","col-12"],["for","pessoa_Id",1,"text-info"],["name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Todas",3,"options","ngModel","styleClass","showClear","filter","filterFields","virtualScroll","virtualScrollItemSize","scrollHeight","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"col-12"],["type","radio","name","datas","id","nao",3,"value","ngModel","ngModelChange"],["datas","ngModel"],["for","nao",1,"mb-1","ms-2","text-info"],["type","radio","name","datas","id","intervalo",3,"value","ngModel","ngModelChange"],["for","intervalo",1,"mb-1","ms-2","text-info"],[1,"form-group","col-sm-6","col-12"],["for","de"],["class","text-danger",4,"ngIf"],["type","date","name","de","id","de",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["de","ngModel"],["for","ate"],["type","date","name","ate","id","ate",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["ate","ngModel"],["type","radio","name","datas","id","ou",3,"value","ngModel","ngModelChange"],["for","ou",1,"mb-1","ms-2","text-info"],["for","data"],["type","date","name","data","id","data",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["data","ngModel"],[1,"px-1","d-flex","justify-content-between","align-items-start"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],[1,"text-danger"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(e.TgZ(0,"div"),e.YNc(1,Me,1,0,"ng-template",null,0,e.W1O),e.YNc(3,Pe,64,35,"ng-template",null,1,e.W1O),e.qZA())},dependencies:[i.O5,F.Lt,L.jx,_._Y,_.Fj,_._,_.JJ,_.JL,_.Q7,_.On,_.F,i.H9]})}return o})();class je{constructor(){this.pessoa_Id=void 0}}const De=["template"],He=["icon"],Re=["form"];function Ge(o,l){1&o&&e._UZ(0,"img",2)}function ze(o,l){if(1&o&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Nome do arquivo:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.hij(" ",t.fileUpload.name,"")}}function Be(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"label",14)(1,"p",15),e._UZ(2,"i",16),e.qZA(),e.TgZ(3,"h3"),e._uU(4,"Clique e arraste para selecionar arquivo"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"ou "),e.TgZ(7,"label",17),e._uU(8,"clique aqui"),e.qZA(),e._uU(9," para abrir explorador de arquivos"),e.qZA(),e.YNc(10,ze,4,1,"p",18),e.TgZ(11,"input",19),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.fileChange(n))}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(10),e.Q6J("ngIf",t.fileUpload)}}function Ke(o,l){if(1&o&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function We(o,l){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,Ke,2,1,"p",11),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.erro)}}function $e(o,l){1&o&&(e.TgZ(0,"p",21),e._uU(1,"Selecione um arquivo para enviar."),e.qZA())}function Xe(o,l){1&o&&e._UZ(0,"span",22)}function et(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.send())}),e.YNc(2,Be,12,1,"label",5),e.TgZ(3,"div",6)(4,"div",7)(5,"p",8)(6,"a",9),e._uU(7,"Clique aqui para saber como deve ser o arquivo XLSX"),e.qZA()(),e.YNc(8,We,2,1,"div",10),e.YNc(9,$e,2,0,"p",11),e.qZA(),e.TgZ(10,"button",12),e.YNc(11,Xe,1,0,"span",13),e.TgZ(12,"span"),e._uU(13,"Salvar"),e.qZA()()()()}if(2&o){const t=e.MAs(1),a=e.oxw();e.xp6(2),e.Q6J("ngIf",!a.loading),e.xp6(6),e.Q6J("ngIf",a.erro||t.invalid),e.xp6(1),e.Q6J("ngIf",!a.fileUpload||t.invalid&&t.errors&&t.errors.fileRequired),e.xp6(1),e.Q6J("disabled",t.invalid||a.loading),e.xp6(1),e.Q6J("ngIf",a.loading)}}const at=[{path:"",component:k,children:[{path:"cadastrar",component:P,data:{modalOrder:1}},{path:"exportar",component:Ve,data:{modalOrder:1}},{path:"importar",component:(()=>{class o{constructor(t,a,n,r){this.toastr=t,this.modalService=a,this.activatedRoute=n,this.operacaoService=r,this.faUpload=T.cf$,this.faCircleXmark=T.WA2,this.faTriangleExclamation=T.ik8,this.faCircleCheck=T.fV7,this.loading=!1,this.modalOpen=!1,this.erro="",this.subscription=[],this.modal=new h.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.title="Importar Arquivo",this.modal.icon=this.icon,this.modal.style={width:"max-content","max-width":"95vw"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBack=[".."],this.modal.routerBackOptions={relativeTo:this.activatedRoute},setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}fileChange(t){t&&t.target&&t.target.files&&t.target.files.length>0?(this.fileUpload=t.target.files[0],this.form.control.setErrors(null)):(this.form.control.setErrors({fileRequired:!0}),this.toastr.error("Selecione um arquivo para importa\xe7\xe3o."),delete this.fileUpload)}send(){if(this.loading=!0,this.erro="",!this.fileUpload)return this.toastr.error("Selecione um arquivo para enviar."),void(this.erro="Selecione um arquivo para enviar.");(0,f.n)(this.operacaoService.importarArquivo(this.fileUpload)).then(t=>{(0,f.n)(this.operacaoService.getList()),this.loading=!1,t.sucesso?this.voltar():(this.toastr.error(t.mensagem),this.toastr.error("Alguns registros n\xe3o puderam ser salvos."),this.erro=t.mensagem)}).catch(t=>{this.loading=!1,this.erro=(0,s.b)(t)})}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(g._W),e.Y36(h.Z),e.Y36(C.gz),e.Y36(w.m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-importacao-arquivo"]],viewQuery:function(a,n){if(1&a&&(e.Gf(De,5),e.Gf(He,5),e.Gf(Re,5)),2&a){let r;e.iGM(r=e.CRH())&&(n.template=r.first),e.iGM(r=e.CRH())&&(n.icon=r.first),e.iGM(r=e.CRH())&&(n.form=r.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-excel.png"],["enctype","multipart/form-data",1,"needs-validation",3,"ngSubmit"],["form","ngForm"],["for","file","class","input-file-container",4,"ngIf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1"],[1,"me-3"],[1,"text-info"],["href","assets/modelos/modelo-importacao-operacao.xlsx","download","modelo-importacao-pessoa.xlsx"],["class","m-0",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],[4,"ngIf"],["type","file","name","file","id","file","required","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"input"],[1,"m-0"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(e.TgZ(0,"div"),e.YNc(1,Ge,1,0,"ng-template",null,0,e.W1O),e.YNc(3,et,14,5,"ng-template",null,1,e.W1O),e.qZA())},dependencies:[i.O5,_._Y,_.JL,_.F],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}"]})}return o})(),data:{modalOrder:1}},{path:"editar/:operacao_id",component:P,data:{modalOrder:1}},{path:"detalhes/:operacao_id",component:Ze,data:{modalOrder:1}},{path:"excluir/:operacao_id",component:he,data:{modalOrder:1}},c(7280).D]}];let it=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[C.Bz.forChild(at),C.Bz]})}return o})();var nt=c(6208),rt=c(4685),st=c(1532);let lt=(()=>{class o{static#e=this.\u0275fac=function(a){return new(a||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[i.ez,it,V.uH,F.kW,_.u5,m.yI.forChild(),nt.m,rt.U$,st._8]})}return o})()},6044:(j,A,c)=>{c.d(A,{l:()=>E});var i=c(9291),C=c(6223),q=c(2425),f=c(6814),M=c(8839);const T=["input"];function y(u,h){1&u&&(i.TgZ(0,"p",4),i._uU(1,"Este campo \xe9 obrigat\xf3rio."),i.qZA())}function e(u,h){1&u&&(i.TgZ(0,"p",4),i._uU(1,"Valor inv\xe1lido."),i.qZA())}function I(u,h){if(1&u&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&u){const s=i.oxw(2);i.xp6(1),i.hij("Valor m\xednimo \xe9 ",s.min,".")}}function w(u,h){if(1&u&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&u){const s=i.oxw(2);i.xp6(1),i.hij("Valor m\xe1ximo \xe9 ",s.max,".")}}function O(u,h){if(1&u&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&u){i.oxw(2);const s=i.MAs(1);i.xp6(1),i.Oqu(s.errors.message)}}function N(u,h){if(1&u&&(i.TgZ(0,"div"),i.YNc(1,y,2,0,"p",3),i.YNc(2,e,2,0,"p",3),i.YNc(3,I,2,1,"p",3),i.YNc(4,w,2,1,"p",3),i.YNc(5,O,2,1,"p",3),i.qZA()),2&u){i.oxw();const s=i.MAs(1);i.xp6(1),i.Q6J("ngIf",s.errors.required),i.xp6(1),i.Q6J("ngIf",s.errors.mask),i.xp6(1),i.Q6J("ngIf",s.errors.min),i.xp6(1),i.Q6J("ngIf",s.errors.max),i.xp6(1),i.Q6J("ngIf",s.errors.message)}}let E=(()=>{class u{constructor(s){this.toastrService=s,this.thousandSeparator=".",this.decimalMarker=",",this.inputId="",this.required=!1,this.arrowControls=!0,this.showErrorMessage=!0,this.showPopover=!0,this.allowNegativeNumbers=!1,this.placeholder="",this.readonly=!1,this.disabled=!1,this.autoReplaceValue=!1,this.valueChanges=new i.vpe,this.ngModelChanged=new i.vpe,this.viewInit=!1}ngOnChanges(s){s.valueInput&&(this.valueInput=s.valueInput.currentValue),s.mask&&(this.mask=s.mask.currentValue),s.suffix&&(this.suffix=s.suffix.currentValue),s.prefix&&(this.prefix=s.prefix.currentValue),s.thousandSeparator&&(this.thousandSeparator=s.thousandSeparator.currentValue),s.decimalMarker&&(this.decimalMarker=s.decimalMarker.currentValue),s.inputId&&(this.inputId=s.inputId.currentValue),s.min&&(this.min=s.min.currentValue),s.max&&(this.max=s.max.currentValue),s.required&&(this.required=s.required.currentValue),s.arrowControls&&(this.arrowControls=s.arrowControls.currentValue),s.showErrorMessage&&(this.showErrorMessage=s.showErrorMessage.currentValue),s.showPopover&&(this.showPopover=s.showPopover.currentValue),s.placeholder&&(this.placeholder=s.placeholder.currentValue),s.allowNegativeNumbers&&(this.allowNegativeNumbers=s.allowNegativeNumbers.currentValue),s.readonly&&(this.readonly=s.readonly.currentValue),s.disabled&&(this.disabled=s.disabled.currentValue),s.autoReplaceValue&&(this.autoReplaceValue=s.autoReplaceValue.currentValue)}ngAfterViewInit(){this.viewInit=!0}setErrors(s){this.error=s,this.input.control.setErrors(this.error)}validate(s){if(this.input.control.setValue(this.valueInput),1==this.required&&!this.valueInput.toString().trim())return this.input.control.setErrors(Object.assign({},{required:!0})),!1;if(null!=this.max&&this.valueInput>this.max){if(this.toastrService.error("O valor m\xe1ximo \xe9 "+this.max),!this.autoReplaceValue)return this.input.control.setErrors(Object.assign({},{max:!0})),!1;this.input.control.setValue(this.max),this.inputChanged()}else if(null!=this.min&&this.valueInput<this.min){if(this.toastrService.error("O valor m\xednimo \xe9 "+this.min),1!=this.autoReplaceValue)return this.input.control.setErrors(Object.assign({},{min:!0})),!1;this.input.control.setValue(this.min),this.inputChanged()}return!0}inputChanged(){this.valueChanges.emit(this.valueInput),this.ngModelChanged.emit(this.input)}arrowUp(s,Z=1,p=void 0,v=void 0,g=this.allowNegativeNumbers){var m=function U(u){return u.value+=u.skip,null!=u.max&&null!=u.max&&u.value>u.max&&(u.value=u.max),u.value}({value:s,skip:Z,min:p,max:v,allowNegativeNumbers:g??!1});return this.valueInput=parseFloat(m),setTimeout(()=>this.validate("arrowUp"),500),m}arrowDown(s,Z=1,p=void 0,v=void 0,g=this.allowNegativeNumbers){var m=function S(u){var h=u.value-u.skip;return!u.allowNegativeNumbers&&h<1?h=0:null!=u.min&&null!=u.min&&h<u.min&&(h=u.min),h}({value:s,skip:Z,min:p,max:v,allowNegativeNumbers:g??!1});return this.valueInput=parseFloat(m),setTimeout(()=>this.validate("arrowDown"),500),s}static#e=this.\u0275fac=function(Z){return new(Z||u)(i.Y36(q._W))};static#t=this.\u0275cmp=i.Xpm({type:u,selectors:[["app-input-number"]],viewQuery:function(Z,p){if(1&Z&&i.Gf(T,5),2&Z){let v;i.iGM(v=i.CRH())&&(p.input=v.first)}},inputs:{valueInput:"valueInput",mask:"mask",suffix:"suffix",prefix:"prefix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",inputId:"inputId",min:"min",max:"max",required:"required",arrowControls:"arrowControls",showErrorMessage:"showErrorMessage",showPopover:"showPopover",allowNegativeNumbers:"allowNegativeNumbers",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",autoReplaceValue:"autoReplaceValue",error:"error"},outputs:{valueChanges:"valueChanges",ngModelChanged:"ngModelChanged"},features:[i._Bn([],[{provide:C.gN,useExisting:C.F}]),i.TTD],decls:3,vars:16,consts:[["type","text",1,"form-control","form-control-number",3,"id","name","ngModel","mask","thousandSeparator","decimalMarker","suffix","prefix","allowNegativeNumbers","min","max","required","placeholder","readonly","disabled","ngModelChange","change","focusout","keyup.arrowup","keyup.arrowdown","keyup.shift.arrowup","keyup.shift.arrowdown","keyup.control.arrowup","keyup.control.arrowdown","keyup.alt.arrowUp","keyup.alt.arrowdown"],["input","ngModel"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(Z,p){if(1&Z){const v=i.EpF();i.TgZ(0,"input",0,1),i.NdJ("ngModelChange",function(m){return p.valueInput=m})("change",function(){return p.inputChanged(),p.validate("change")})("focusout",function(){return p.validate("focusout")})("keyup.arrowup",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowUp(m.value):void 0)})("keyup.arrowdown",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowDown(m.value):void 0)})("keyup.shift.arrowup",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowUp(m.value,10):void 0)})("keyup.shift.arrowdown",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowDown(m.value,10):void 0)})("keyup.control.arrowup",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowUp(m.value,100):void 0)})("keyup.control.arrowdown",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowDown(m.value,100):void 0)})("keyup.alt.arrowUp",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowUp(m.value,.1):void 0)})("keyup.alt.arrowdown",function(){i.CHM(v);const m=i.MAs(1);return i.KtG(p.arrowControls?p.arrowDown(m.value,.1):void 0)}),i.qZA(),i.YNc(2,N,6,5,"div",2)}if(2&Z){const v=i.MAs(1);let g;i.Q6J("id",p.inputId)("name",p.inputId)("ngModel",p.valueInput)("mask",p.mask?p.mask:"")("thousandSeparator",p.thousandSeparator?p.thousandSeparator:"")("decimalMarker",p.decimalMarker)("suffix",p.suffix?p.suffix:"")("prefix",p.prefix?p.prefix:"")("allowNegativeNumbers",null!==(g=p.allowNegativeNumbers)&&void 0!==g&&g)("min",p.min)("max",p.max)("required",p.required)("placeholder",p.placeholder)("readonly",p.readonly)("disabled",p.disabled),i.xp6(2),i.Q6J("ngIf",v.touched&&v.errors&&p.showErrorMessage)}},dependencies:[f.O5,C.Fj,C.JJ,C.Q7,C.On,M.hx]})}return u})()}}]);
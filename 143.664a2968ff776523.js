"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[143],{1143:(Me,E,p)=>{p.r(E),p.d(E,{OperacoesModule:()=>Ze});var u=p(6814),_=p(132),Q=p(2832),d=p(708),Z=p(8145),f=p(590),I=p(674),t=p(9291),Y=p(8787),h=p(2828),C=p(5597),L=p(6599);const j=function(){return["exportar"]},P=function(){return["importar"]},H=function(){return["cadastrar"]};function G(o,r){if(1&o&&(t.TgZ(0,"div",13)(1,"a",14)(2,"span",15),t._UZ(3,"fa-icon",16),t.qZA(),t.TgZ(4,"span",17),t._uU(5," Exportar PDF"),t.qZA()()(),t.TgZ(6,"div",13)(7,"a",18),t._UZ(8,"img",19),t.TgZ(9,"span",17),t._uU(10," Importar Excel"),t.qZA()()(),t.TgZ(11,"div",20)(12,"a",21)(13,"span",17),t._uU(14," Cadastrar Opera\xe7\xe3o"),t.qZA()()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("routerLink",t.DdM(4,j)),t.xp6(2),t.Q6J("icon",e.faFilePdf),t.xp6(4),t.Q6J("routerLink",t.DdM(5,P)),t.xp6(5),t.Q6J("routerLink",t.DdM(6,H))}}let D=(()=>{class o{constructor(e,a,n){this.table=e,this.pessoaOperacaoService=a,this.isMobile=n,this.faFilePdf=f.gSj,this.maskType=Q.O,this.list=[],this.tableLinks=[],this.columns=Z.Yv,this.subscription=[],this.screen=I.I.lg;var i=this.pessoaOperacaoService.list.subscribe(m=>{this.list=Object.assign([],m)});this.subscription.push(i);var l=this.isMobile.value.subscribe(m=>this.screen=m);this.subscription.push(l),(0,d.n)(this.pessoaOperacaoService.getList());var s=this.table.selected.subscribe(m=>{m&&(this.tableLinks=[{label:"Detalhes",routePath:["detalhes"],paramsFieldName:["id"]},{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(s)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(Y.i),t.Y36(h.m),t.Y36(I.h))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:18,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon",2,"font-size","36px"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mx-md-1","mb-2","px-0","ng-star-inserted"],[1,"btn","btn-dark","exportar-pdf","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[1,"me-2"],[3,"icon"],[2,"margin-top","-1px","margin-bottom","1px"],[1,"btn","btn-dark","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],["src","assets/img/icon-excel-white.png","alt","excel.png",1,"me-2"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"]],template:function(a,n){if(1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),t.qZA()(),t.kcU(),t.TgZ(8,"div",8)(9,"h3",9),t._uU(10,"Opera\xe7\xf5es"),t.qZA(),t.TgZ(11,"p"),t._uU(12,"Painel CPF"),t.qZA()()(),t.TgZ(13,"div",10),t.YNc(14,G,15,7,"ng-template",null,11,t.W1O),t._UZ(16,"app-list-shared",12),t.qZA()(),t._UZ(17,"router-outlet")),2&a){const i=t.MAs(15);t.xp6(16),t.Q6J("list",n.list)("topActions",i)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[_.lC,_.rH,C.BN,L.o]})}return o})();var v=p(5861),g=p(2855),y=p(342),T=p(2719),R=p(1225),q=p(2667),b=p(2425),M=p(8839),z=p(1433),U=p(2352),S=p(5219),c=p(6223),k=p(2916),B=p(6044);const K=["template"],V=["icon"];function W(o,r){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),t.qZA())}function $(o,r){if(1&o&&(t.TgZ(0,"table",55)(1,"tbody")(2,"tr")(3,"td",56),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.qZA()()(),t.TgZ(9,"tr")(10,"td",56),t._uU(11),t.qZA(),t.TgZ(12,"td",56),t._uU(13,"Situa\xe7\xe3o CPF: "),t.TgZ(14,"strong"),t._uU(15),t.qZA()()()()()),2&o){const e=r.$implicit;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(e.saldoAtual),t.xp6(3),t.Oqu(e.cpf),t.xp6(4),t.Oqu(e.situacaoCPF)}}function X(o,r){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function tt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,X,2,0,"p",57),t.qZA()),2&o){t.oxw();const e=t.MAs(6);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}const et=function(){return["nome","saldoAtual","cpf","situacaoCPF"]};function ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",51)(1,"label",52),t._uU(2,"Pessoa: "),t.TgZ(3,"span",14),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"p-dropdown",53,54),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw(2);return t.KtG(i.objeto.pessoa_Id=n)}),t.YNc(7,$,16,4,"ng-template",39),t.qZA(),t.YNc(8,tt,2,1,"div",25),t.qZA()}if(2&o){const e=t.MAs(6),a=t.oxw(2);t.xp6(5),t.Q6J("options",a.pessoas)("ngModel",a.objeto.pessoa_Id)("styleClass","form-control "+(a.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",t.DdM(14,et))("disabled",a.isEditPage)("readonly",a.isEditPage)("required",!0)("showClear",!0)("virtualScroll",!0)("virtualScrollItemSize",50)("scrollHeight","500px"),t.xp6(3),t.Q6J("ngIf",e.touched&&e.errors)}}function at(o,r){if(1&o&&(t.TgZ(0,"div",51)(1,"label",58),t._uU(2,"Pessoa: "),t.TgZ(3,"span",14),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",59),t.qZA()),2&o){const e=t.oxw(2);let a;t.xp6(5),t.Q6J("value",null!==(a=null==e.pessoaSelected?null:e.pessoaSelected.nomeCliente)&&void 0!==a?a:"N/A")}}function nt(o,r){if(1&o&&(t.TgZ(0,"div",60)(1,"label",61),t._uU(2,"Data de cadastro no sistema: "),t.TgZ(3,"span",14),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",62),t.ALo(6,"date"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("value",t.xi3(6,1,e.objeto.dataCadastro,"dd/MM/yyyy hh:mm"))}}function it(o,r){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("ngValue",e.id),t.xp6(1),t.Oqu(e.name)}}function rt(o,r){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function st(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,rt,2,0,"p",57),t.qZA()),2&o){t.oxw();const e=t.MAs(26);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function lt(o,r){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Valor inv\xe1lido."),t.qZA())}function pt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,lt,2,0,"p",57),t.qZA()),2&o){t.oxw();const e=t.MAs(36);t.xp6(1),t.Q6J("ngIf",e.errors.mask)}}function ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",63)(1,"div",64)(2,"span",65),t._uU(3),t.qZA(),t.TgZ(4,"span",66),t._uU(5),t.qZA(),t.TgZ(6,"span",67),t._uU(7),t.qZA()(),t.TgZ(8,"div",68)(9,"a",69),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.moedaEditar(i))}),t._UZ(10,"fa-icon",70),t.qZA(),t.TgZ(11,"a",69),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.moedaExcluir(i.id))}),t._UZ(12,"fa-icon",70),t.qZA()()()}if(2&o){const e=r.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("title",e.nome),t.xp6(2),t.Oqu(e.codigo),t.xp6(2),t.Oqu(e.nome),t.xp6(2),t.Oqu(e.simbolo),t.xp6(3),t.Q6J("icon",a.faEdit),t.xp6(2),t.Q6J("icon",a.faTrash)}}const dt=function(){return["./moeda"]};function mt(o,r){1&o&&(t.TgZ(0,"div",71),t._uU(1," N\xe3o encontrou? Clique para "),t.TgZ(2,"a",72),t._uU(3,"adicionar"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,dt)))}function ut(o,r){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function _t(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ut,2,0,"p",57),t.qZA()),2&o){t.oxw();const e=t.MAs(52);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function gt(o,r){if(1&o&&t._UZ(0,"p",75),2&o){const e=t.oxw(3);t.Q6J("innerHTML",e.erro,t.oJD)}}function ft(o,r){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function ht(o,r){if(1&o&&(t.TgZ(0,"div",73),t.YNc(1,gt,1,1,"p",74),t.YNc(2,ft,2,0,"p",57),t.qZA()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!a.erro)}}function vt(o,r){1&o&&t._UZ(0,"span",76)}const xt=function(){return["nome","codigo","simbolo"]};function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.TgZ(2,"div",9)(3,"div",10),t.YNc(4,ot,9,15,"div",11),t.YNc(5,at,6,1,"div",11),t.TgZ(6,"div",12)(7,"label",13),t._uU(8,"Data da Transa\xe7\xe3o: "),t.TgZ(9,"span",14),t._uU(10,"*"),t.qZA()(),t.TgZ(11,"app-input-date",15),t.NdJ("valueChanges",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.dataTransacao=n)}),t.qZA()()(),t.TgZ(12,"div",10),t.YNc(13,nt,7,4,"div",16),t.TgZ(14,"div",17)(15,"label",18),t._uU(16,"Valor: "),t.TgZ(17,"span",14),t._uU(18,"*"),t.qZA()(),t.TgZ(19,"app-input-number",19),t.NdJ("valueChanges",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.valor=n)}),t.qZA()(),t.TgZ(20,"div",17)(21,"label",20),t._uU(22,"Status: "),t.TgZ(23,"span",14),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"select",21,22),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.operacao_Status_Id=n)}),t.TgZ(27,"option",23),t._uU(28,"Selecione"),t.qZA(),t.YNc(29,it,2,2,"option",24),t.qZA(),t.YNc(30,st,2,1,"div",25),t.qZA()(),t.TgZ(31,"div",10)(32,"div",26)(33,"label",27),t._uU(34,"N\xba Opera\xe7\xe3o: "),t.qZA(),t.TgZ(35,"input",28,29),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.num_Op=n)}),t.qZA(),t.YNc(37,pt,2,1,"div",25),t.qZA(),t.TgZ(38,"div",26)(39,"label",30),t._uU(40,"Tipo de Transa\xe7\xe3o: "),t.qZA(),t.TgZ(41,"input",31,32),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.tipoTransacao=n)}),t.qZA()(),t.TgZ(43,"div",26)(44,"label",33),t._uU(45,"Forma de Pagamento: "),t.qZA(),t.TgZ(46,"input",34,35),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.formaPagamento=n)}),t.qZA()(),t.TgZ(48,"div",26)(49,"label",36),t._uU(50,"Moeda: "),t.qZA(),t.TgZ(51,"p-dropdown",37,38),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.moeda=n)}),t.YNc(53,ct,13,6,"ng-template",39),t.YNc(54,mt,4,2,"ng-template",40),t.qZA(),t.YNc(55,_t,2,1,"div",25),t.qZA(),t.TgZ(56,"div",26)(57,"label",41),t._uU(58,"Nome do Comprador: "),t.qZA(),t.TgZ(59,"input",42,43),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.nomeComprador=n)}),t.qZA()(),t.TgZ(61,"div",26)(62,"label",44),t._uU(63,"Pa\xeds do Comprador: "),t.qZA(),t.TgZ(64,"input",45,46),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.paisComprador=n)}),t.qZA()()()(),t.TgZ(66,"div",47),t.YNc(67,ht,3,2,"div",48),t.TgZ(68,"button",49),t.YNc(69,vt,1,0,"span",50),t.TgZ(70,"span"),t._uU(71,"Salvar"),t.qZA()()()()}if(2&o){const e=t.MAs(1),a=t.MAs(26),n=t.MAs(36),i=t.MAs(52),l=t.oxw();t.xp6(4),t.Q6J("ngIf",!l.isEditPage),t.xp6(1),t.Q6J("ngIf",l.isEditPage),t.xp6(6),t.Q6J("valueInput",l.objeto.dataTransacao)("inputId","dataTransacao")("showErrorMessage",!0)("required",!0),t.xp6(2),t.Q6J("ngIf",l.isEditPage),t.xp6(1),t.Q6J("classList",l.isEditPage?"form-group col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12":"form-group col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"),t.xp6(5),t.Q6J("valueInput",l.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1)("min",.1)("max",999999999),t.xp6(1),t.Q6J("classList",l.isEditPage?"form-group col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12":"form-group col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12"),t.xp6(5),t.ekj("form-control-loading",l.loadingStatus),t.Q6J("ngModel",l.objeto.operacao_Status_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",l.status),t.xp6(1),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(5),t.Q6J("ngModel",l.objeto.num_Op),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(4),t.Q6J("ngModel",l.objeto.tipoTransacao),t.xp6(5),t.Q6J("ngModel",l.objeto.formaPagamento),t.xp6(5),t.Q6J("options",l.moedas)("ngModel",l.objeto.moeda)("styleClass","form-control "+(l.loadingMoedas?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",t.DdM(41,xt))("showClear",!0),t.xp6(4),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(4),t.Q6J("ngModel",l.objeto.nomeComprador),t.xp6(5),t.Q6J("ngModel",l.objeto.paisComprador),t.xp6(3),t.Q6J("ngIf",l.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||l.loading),t.xp6(1),t.Q6J("ngIf",l.loading)}}let F=(()=>{class o{constructor(e,a,n,i,l,s,m,w,O,J,Ce,Te){this.activatedRoute=e,this.modalService=a,this.pessoaService=n,this.pessoaSaldoService=i,this.pessoaOperacaoService=l,this.crypto=s,this.datepipe=m,this.toastr=w,this.mask=O,this.currencyPipe=J,this.moedaService=Ce,this.router=Te,this.faEdit=f.Xcf,this.faTrash=f.$aW,this.objeto=new Z.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.pessoas=[],this.loadingPessoa=!1,this.isEditPage=!0,this.pessoa_id=0,this.modal=new g.u,this.moedas=[],this.loadingMoedas=!1,(0,d.n)(this.pessoaOperacaoService.getStatus()).then(x=>{this.loadingStatus=!1,this.status=x}),(0,d.n)(this.moedaService.getList()).then(x=>this.moedas=x).finally(()=>this.loadingMoedas=!1);var be=this.moedaService.list.subscribe(x=>this.moedas=x);this.subscription.push(be)}ngAfterViewInit(){var e=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"700px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var a=this.activatedRoute.params.subscribe(function(){var n=(0,v.Z)(function*(i){if(i.operacao_id)e.objeto.id=e.crypto.decrypt(i.operacao_id),e.modal.title="Editar Opera\xe7\xe3o",e.modal.routerBack=["../../"],e.isEditPage=!0,e.pessoaChange(),(0,d.n)(e.pessoaOperacaoService.get(e.objeto.id)).then(s=>{s.num_Op=s.num_Op?s.num_Op.toString().padStart(4,"0"):"",s.dataCadastro=e.datepipe.transform(s.dataCadastro,"yyyy-MM-ddThh:mm"),s.dataTransacao=e.datepipe.transform(s.dataTransacao,"yyyy-MM-dd"),e.objeto=s,e.pessoa_id=e.objeto.pessoa_Id,setTimeout(()=>{e.modal=e.modalService.addModal(e.modal,"moeda")},200)}).catch(s=>{e.voltar()});else{var l=e.pessoaService.list.subscribe(s=>e.pessoas=s);e.subscription.push(l),0==e.pessoas.length&&(e.loadingPessoa=!0,yield(0,d.n)(e.pessoaService.getList(!0)).then(s=>{e.loadingPessoa=!1,e.pessoas=JSON.parse(JSON.stringify(s)),e.pessoas=e.pessoas.map(m=>(m.dataCadastro=e.datepipe.transform(m.dataCadastro,"yyyy-MM-ddThh:mm"),m.saldoAtual=e.currencyPipe.transform(m.saldoAtual,"BRL","","1.2"),m.cpf=e.mask.applyMask(m.cpf.toString().padStart(11,"0"),"000.000.000-00"),m))})),e.modal.title="Cadastrar Opera\xe7\xe3o",e.modal.routerBack=["../"],e.isEditPage=!1,e.objeto.dataCadastro=e.datepipe.transform(e.objeto.dataCadastro,"yyyy-MM-ddThh:mm"),e.objeto.dataTransacao=e.datepipe.transform(e.objeto.dataTransacao,"yyyy-MM-dd"),setTimeout(()=>{e.modal=e.modalService.addModal(e.modal,"moeda")},200)}});return function(i){return n.apply(this,arguments)}}());this.subscription.push(a)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}pessoaChange(){this.pessoaSelected=this.pessoaOperacaoService.list.value.find(e=>e.id==this.objeto.id)}moedaEditar(e){var a=this.crypto.encrypt(e.id);this.router.navigate(["moeda",a],{relativeTo:this.activatedRoute})}moedaExcluir(e){var a=this.crypto.encrypt(e);this.router.navigate(["moeda","excluir",a],{relativeTo:this.activatedRoute})}send(){this.loading=!0,this.erro="",this.request().then(e=>{1==e.sucesso?((0,d.n)(this.pessoaService.getList()),(0,d.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,d.n)(this.pessoaOperacaoService.getListById(this.objeto.pessoa_Id)),(0,d.n)(this.pessoaOperacaoService.getList()),this.voltar()):(this.erro=e.mensagem,this.toastr.error(e.mensagem)),this.loading=!1}).catch(e=>{this.loading=!1,this.erro=(0,y.b)(e)})}request(){return 0==this.objeto.id?(0,d.n)(this.pessoaOperacaoService.create(this.objeto)):(this.isEditPage&&(this.objeto.pessoa_Id=this.pessoa_id),(0,d.n)(this.pessoaOperacaoService.edit(this.objeto)))}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(_.gz),t.Y36(g.Z),t.Y36(T.N),t.Y36(R.R),t.Y36(h.m),t.Y36(q.w),t.Y36(u.uU),t.Y36(b._W),t.Y36(M.d6),t.Y36(u.H9),t.Y36(z.g),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(a,n){if(1&a&&(t.Gf(K,5),t.Gf(V,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],["class","form-group col-xl-8 col-lg-8 col-md-8 col-sm-8 col-12",4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],["for","dataTransacao"],[1,"text-danger"],["type","date",3,"valueInput","inputId","showErrorMessage","required","valueChanges"],["class","form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 ",4,"ngIf"],[3,"classList"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","min","max","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-6","col-12"],["for","num_Op"],["name","num_Op","id","num_Op","mask","0000",1,"form-control",3,"ngModel","ngModelChange"],["num_Op","ngModel"],["for","tipoTransacao"],["name","tipoTransacao","id","tipoTransacao",1,"form-control",3,"ngModel","ngModelChange"],["tipoTransacao","ngModel"],["for","formaPagamento"],["name","formaPagamento","id","formaPagamento",1,"form-control",3,"ngModel","ngModelChange"],["formaPagamento","ngModel"],["for","moeda"],["name","moeda","inputId","moeda","optionLabel","codigo","optionValue","codigo","placeholder","Selecione uma moeda",3,"options","ngModel","styleClass","showClear","filter","filterFields","ngModelChange"],["moeda","ngModel"],["pTemplate","item"],["pTemplate","footer"],["for","nomeComprador"],["name","nomeComprador","id","nomeComprador",1,"form-control",3,"ngModel","ngModelChange"],["nomeComprador","ngModel"],["for","paisComprador"],["name","paisComprador","id","paisComprador",1,"form-control",3,"ngModel","ngModelChange"],["paisComprador","ngModel"],[1,"d-flex","align-items-start","flex-wrap","p-0","my-2"],["class","me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"form-group","col-xl-8","col-lg-8","col-md-8","col-sm-8","col-12"],["for","pessoa_Id"],["name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um pessoa",3,"options","ngModel","styleClass","showClear","filter","filterFields","disabled","readonly","required","virtualScroll","virtualScrollItemSize","scrollHeight","ngModelChange"],["pessoa_Id","ngModel"],[1,"w-100"],[1,"pe-2"],["class","text-danger",4,"ngIf"],["for","pessoa"],["type","text","id","pessoa","name","pessoa","readonly","","disabled","",1,"form-control",3,"value"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-12","col-12"],["for","dataCadastro"],["type","text","name","dataCadastro","id","dataCadastro","disabled","",1,"form-control",3,"value"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center","w-100",3,"title"],[1,"flag","flag-info","px-2","me-2"],[1,"text-ellipsis"],[1,"flag","flag-info","px-2","ms-auto"],[1,"ms-2"],["title","Editar",1,"py-1","px-1","text-dark",3,"click"],[3,"icon"],[1,"py-2","px-3","border-top","bg-light"],[1,"link","text-info",3,"routerLink"],[1,"me-3"],["class","text-danger",3,"innerHTML",4,"ngIf"],[1,"text-danger",3,"innerHTML"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(t.YNc(0,W,5,0,"ng-template",null,0,t.W1O),t.YNc(2,Zt,72,42,"ng-template",null,1,t.W1O),t._UZ(4,"router-outlet"))},dependencies:[u.sg,u.O5,_.lC,_.rH,C.BN,U.Lt,S.jx,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.On,c.F,M.hx,k.K,B.l,u.uU]})}return o})();const Ct=["template"],Tt=["icon"];function bt(o,r){if(1&o&&t._UZ(0,"fa-icon",2),2&o){const e=t.oxw();t.Q6J("icon",e.faTrash)}}function Mt(o,r){if(1&o&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function At(o,r){1&o&&t._UZ(0,"span",9)}function yt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,Mt,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(7,At,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading)}}let qt=(()=>{class o{constructor(e,a,n,i,l){this.activatedRoute=e,this.modalService=a,this.pessoaService=n,this.pessoaOperacaoService=i,this.crypto=l,this.faTrash=f.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new g.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var e=this.activatedRoute.params.subscribe(a=>{if(a.operacao_id)try{this.id=this.crypto.decrypt(a.operacao_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete operacao")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,d.n)(this.pessoaOperacaoService.delete(this.id)).then(e=>{if(this.loading=!1,e.sucesso){var a=this.pessoaOperacaoService.list.value,n=a.findIndex(i=>i.id==this.id);-1!=n&&(a.splice(n,1),this.pessoaOperacaoService.list.next(a)),(0,d.n)(this.pessoaService.getList()),(0,d.n)(this.pessoaOperacaoService.getList()),this.voltar()}else this.erro=e.mensagem}).catch(e=>{this.loading=!1,this.erro=(0,y.b)(e)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(_.gz),t.Y36(g.Z),t.Y36(T.N),t.Y36(h.m),t.Y36(q.w))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(a,n){if(1&a&&(t.Gf(Ct,5),t.Gf(Tt,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(t.YNc(0,bt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,yt,10,2,"ng-template",null,1,t.W1O))},dependencies:[u.O5,C.BN]})}return o})();const Ut=["template"],wt=["icon"];function Ot(o,r){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4),t.qZA())}function Jt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",null,5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),t._uU(6,"Nome:"),t.qZA(),t._UZ(7,"input",10),t.qZA(),t.TgZ(8,"div",11)(9,"label",12),t._uU(10,"CPF:"),t.qZA(),t._UZ(11,"input",13),t.qZA()(),t.TgZ(12,"div",7)(13,"div",14)(14,"label",15),t._uU(15,"Data da Transa\xe7\xe3o:"),t.qZA(),t._UZ(16,"input",16),t.qZA(),t.TgZ(17,"div",14)(18,"label",17),t._uU(19,"Valor da Opera\xe7\xe3o:"),t.qZA(),t._UZ(20,"input",18),t.ALo(21,"currency"),t.qZA()(),t.TgZ(22,"div",7)(23,"div",19)(24,"label",20),t._uU(25,"Limite Concedido:"),t.qZA(),t._UZ(26,"input",21),t.ALo(27,"currency"),t.qZA(),t.TgZ(28,"div",19)(29,"label",22),t._uU(30,"Limite Utilizado:"),t.qZA(),t._UZ(31,"input",23),t.ALo(32,"currency"),t.qZA(),t.TgZ(33,"div",19)(34,"label",24),t._uU(35,"Limite Atual:"),t.qZA(),t._UZ(36,"input",25),t.ALo(37,"currency"),t.qZA(),t.TgZ(38,"div",26)(39,"label",27),t._uU(40,"Status Opera\xe7\xe3o:"),t.qZA(),t._UZ(41,"input",28),t.qZA(),t.TgZ(42,"div",14)(43,"label",29),t._uU(44,"Data de cadastro no sistema:"),t.qZA(),t._UZ(45,"input",30),t.qZA()(),t.TgZ(46,"div",31)(47,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportarPDF())}),t.TgZ(48,"span",33),t.O4$(),t.TgZ(49,"svg",34),t._UZ(50,"path",35)(51,"path",36),t.qZA()(),t._uU(52," Exportar relat\xf3rio "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("value",e.objetoList.nomeCliente),t.xp6(4),t.Q6J("value",e.objetoList.cpfCliente),t.xp6(5),t.Q6J("value",e.objeto.dataTransacao),t.xp6(4),t.Q6J("value",t.gM2(21,10,e.objetoList.valorOperacao,"BRL","","1.2")),t.xp6(6),t.Q6J("value",t.gM2(27,15,e.objetoList.limiteConcedido,"BRL","","1.2")),t.xp6(5),t.Q6J("value",t.gM2(32,20,e.objetoList.limiteUtilizado,"BRL","","1.2")),t.xp6(5),t.Q6J("value",t.gM2(37,25,e.objetoList.limiteAtual,"BRL","","1.2")),t.xp6(5),t.Q6J("value",e.objetoList.statusOperacao),t.xp6(4),t.Q6J("value",e.objeto.dataCadastro),t.xp6(2),t.Q6J("disabled",e.loading)}}let Et=(()=>{class o{constructor(e,a,n,i,l,s,m){this.activatedRoute=e,this.toastr=a,this.modalService=n,this.crypto=i,this.datepipe=l,this.pessoaService=s,this.pessoaOperacaoService=m,this.faFile=f.gMD,this.modalOpen=!1,this.objeto=new Z.fs,this.objetoList=new Z.cU,this.loading=!1,this.subscription=[],this.modal=new g.u}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){var e=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.title="Detalhes",this.modal.routerBack=["../../"];var a=this.activatedRoute.params.subscribe(function(){var n=(0,v.Z)(function*(i){if(i.operacao_id){if(e.objeto.id=e.crypto.decrypt(i.operacao_id),0==(l=e.pessoaOperacaoService.list.value).length)var l=yield(0,d.n)(e.pessoaOperacaoService.getList());if(e.objetoList=l.find(s=>s.id==e.objeto.id),!e.objetoList)return void e.voltar();(0,d.n)(e.pessoaOperacaoService.get(e.objeto.id)).then(s=>{s.dataCadastro=e.datepipe.transform(s.dataCadastro,"yyyy-MM-ddThh:mm"),s.dataTransacao=e.datepipe.transform(s.dataTransacao,"yyyy-MM-dd"),e.objeto=s,setTimeout(()=>{e.modal=e.modalService.addModal(e.modal,"moeda")},200)}).catch(s=>{e.voltar()})}else e.voltar()});return function(i){return n.apply(this,arguments)}}());this.subscription.push(a)}voltar(){this.modalService.removeModal(this.modal)}exportarPDF(){var e=this;return(0,v.Z)(function*(){e.loading=!0,yield(0,d.n)(e.pessoaOperacaoService.exportacaoOperacao(e.objeto.id)),e.loading=!1})()}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(_.gz),t.Y36(b._W),t.Y36(g.Z),t.Y36(q.w),t.Y36(u.uU),t.Y36(T.N),t.Y36(h.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-details"]],viewQuery:function(a,n){if(1&a&&(t.Gf(Ut,5),t.Gf(wt,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-post",2,"margin-top","-6px"],["d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],["d","M4 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7zm0-3a.5.5 0 0 1 .5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5z"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-lg-9","col-md-6","col-12"],["for","nome"],["type","text","id","nome","name","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-3","col-md-6","col-12"],["for","cpfCliente"],["type","text","id","cpfCliente","name","cpfCliente","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-6","col-12"],["for","dataTransacao"],["type","date","id","dataTransacao","name","dataTransacao","readonly","",1,"form-control",3,"value"],["for","valorOperacao"],["type","text","id","valorOperacao","name","valorOperacao","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-4","col-md-6","col-sm-6","col-12"],["for","limiteConcedido"],["type","text","id","limiteConcedido","name","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado"],["type","text","id","limiteUtilizado","name","limiteUtilizado","readonly","",1,"form-control",3,"value"],["for","limiteAtual"],["type","text","id","limiteAtual","name","limiteAtual","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-6","col-md-6","col-sm-6","col-12"],["for","status"],["type","text","id","status","name","status","readonly","",1,"form-control",3,"value"],["for","dataCadastro"],["type","datetime-local","id","dataCadastro","name","dataCadastro","readonly","",1,"form-control",3,"value"],[1,"row","px-1","my-2"],[1,"btn","btn-dark",3,"disabled","click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-down"],["fill-rule","evenodd","d","M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"],["fill-rule","evenodd","d","M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"]],template:function(a,n){1&a&&(t.YNc(0,Ot,3,0,"ng-template",null,0,t.W1O),t.YNc(2,Jt,53,30,"ng-template",null,1,t.W1O))},dependencies:[c._Y,c.JL,c.F,u.H9]})}return o})();const It=["template"],St=["icon"];function Ft(o,r){1&o&&t._UZ(0,"img",2)}function Nt(o,r){if(1&o&&(t.TgZ(0,"table",38)(1,"tbody")(2,"tr")(3,"td",39),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"tr")(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14,"Situa\xe7\xe3o CPF: "),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()),2&o){const e=r.$implicit;let a;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(t.gM2(9,4,e.saldoAtual,"BRL","","1.2")),t.xp6(4),t.Oqu(e.cpf),t.xp6(4),t.Oqu(null!==(a=e.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function Qt(o,r){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Yt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Qt,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(13);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Lt(o,r){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function jt(o,r){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Pt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,jt,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(35);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ht(o,r){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function Gt(o,r){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Dt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Gt,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(42);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Rt(o,r){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function zt(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Rt,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(55);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function kt(o,r){if(1&o&&(t.TgZ(0,"p",40),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Bt(o,r){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,kt,2,1,"p",23),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.erro)}}function Kt(o,r){1&o&&t._UZ(0,"span",42)}const Vt=function(){return["nome","saldoAtual","cpf","situacaoCPF"]};function Wt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h6"),t._uU(3,"Escolha os dados que deseja exportar"),t.qZA()(),t.TgZ(4,"form",null,5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11,"Pessoa: "),t.qZA(),t.TgZ(12,"p-dropdown",11,12),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.pessoa_Id=n)}),t.YNc(14,Nt,17,9,"ng-template",13),t.qZA(),t.YNc(15,Yt,2,1,"div",14),t.qZA()()(),t.TgZ(16,"div",7)(17,"div",8)(18,"div",15)(19,"input",16,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(21,"label",18),t._uU(22,"Exportar base completa"),t.qZA()()()(),t.TgZ(23,"div",7)(24,"div",8)(25,"div",15)(26,"input",19,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(28,"label",20),t._uU(29,"Exportar por Per\xedodo"),t.qZA()(),t.TgZ(30,"div",21)(31,"label",22),t._uU(32,"De: "),t.YNc(33,Lt,2,0,"span",23),t.qZA(),t.TgZ(34,"input",24,25),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.de=n)}),t.qZA(),t.YNc(36,Pt,2,1,"div",14),t.qZA(),t.TgZ(37,"div",21)(38,"label",26),t._uU(39,"At\xe9: "),t.YNc(40,Ht,2,0,"span",23),t.qZA(),t.TgZ(41,"input",27,28),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.ate=n)}),t.qZA(),t.YNc(43,Dt,2,1,"div",14),t.qZA()()(),t.TgZ(44,"div",7)(45,"div",8)(46,"div",15)(47,"input",29,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(49,"label",30),t._uU(50,"Exportar por Data"),t.qZA()(),t.TgZ(51,"div",9)(52,"label",31),t._uU(53,"Data:"),t.qZA(),t.TgZ(54,"input",32,33),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.data=n)}),t.qZA(),t.YNc(56,zt,2,1,"div",14),t.qZA()()()(),t.TgZ(57,"div",4)(58,"div",34),t.YNc(59,Bt,2,1,"div",35),t.TgZ(60,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportar())}),t.YNc(61,Kt,1,0,"span",37),t.TgZ(62,"span"),t._uU(63,"Exportar"),t.qZA()()()()()()}if(2&o){const e=t.MAs(5),a=t.MAs(13),n=t.MAs(35),i=t.MAs(42),l=t.MAs(55),s=t.oxw();t.xp6(12),t.Q6J("options",s.pessoas)("ngModel",s.filtro.pessoa_Id)("styleClass","form-control "+(s.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",t.DdM(34,Vt))("showClear",!0)("virtualScroll",!0)("virtualScrollItemSize",50)("scrollHeight","500px"),t.xp6(3),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(4),t.Q6J("value",void 0)("ngModel",s.datasFiltro),t.xp6(7),t.Q6J("value",!0)("ngModel",s.datasFiltro),t.xp6(7),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",s.filtro.de)("required",1==s.datasFiltro||i.value)("disabled",!s.datasFiltro),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(4),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",s.filtro.ate)("required",1==s.datasFiltro||n.value)("disabled",!s.datasFiltro),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(4),t.Q6J("value",!1)("ngModel",s.datasFiltro),t.xp6(7),t.Q6J("ngModel",s.filtro.data)("required",0==s.datasFiltro)("disabled",null==s.datasFiltro||s.datasFiltro),t.xp6(2),t.Q6J("ngIf",l.touched&&l.errors),t.xp6(3),t.Q6J("ngIf",s.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||s.loading),t.xp6(1),t.Q6J("ngIf",s.loading)}}let $t=(()=>{class o{constructor(e,a,n,i,l,s,m,w){this.pessoaService=e,this.pessoaOperacaoService=a,this.activatedRoute=n,this.toastr=i,this.datePipe=l,this.modalService=s,this.mask=m,this.currencyPipe=w,this.pessoas=[],this.loadingPessoa=!0,this.filtro=new Xt,this.subscription=[],this.erro="",this.loading=!1,this.modal=new g.u;var O=this.pessoaService.list.subscribe(J=>this.pessoas=J);this.subscription.push(O)}ngAfterViewInit(){var e=this;return(0,v.Z)(function*(){e.modal.id=0,e.modal.template=e.template,e.modal.style={"max-width":"400px"},e.modal.activatedRoute=e.activatedRoute,e.modal.icon=e.icon,e.modal.title="Exportar Opera\xe7\xf5es",e.modal.routerBack=["../"],e.modal.routerBackOptions={relativeTo:e.activatedRoute},0==e.pessoas.length&&(e.loadingPessoa=!0,yield(0,d.n)(e.pessoaService.getList(!0)).then(a=>{e.loadingPessoa=!1,e.pessoas=JSON.parse(JSON.stringify(a)),e.pessoas=e.pessoas.map(n=>(n.dataCadastro=e.mask.applyMask(new Date(n.dataCadastro),"dd/MM/yyyy"),n.saldoAtual=e.currencyPipe.transform(n.saldoAtual,"BRL","","1.2"),n.cpf=e.mask.applyMask(n.cpf.toString().padStart(11,"0"),"000.000.000-00"),n))})),setTimeout(()=>{e.modal=e.modalService.addModal(e.modal,"exportar operacao")},200)})()}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}datasChanged(){this.datasFiltro?delete this.filtro.data:0==this.datasFiltro?(delete this.filtro.de,delete this.filtro.ate):null==this.datasFiltro&&(delete this.filtro.data,delete this.filtro.de,delete this.filtro.ate)}exportar(){var e=this;return(0,v.Z)(function*(){e.loading=!0,yield(0,d.n)(e.pessoaOperacaoService.exportacao(e.filtro)),e.loading=!1})()}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(T.N),t.Y36(h.m),t.Y36(_.gz),t.Y36(b._W),t.Y36(u.uU),t.Y36(g.Z),t.Y36(M.d6),t.Y36(u.H9))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-exportacao"]],viewQuery:function(a,n){if(1&a&&(t.Gf(It,5),t.Gf(St,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-pdf.png"],[1,"px-2"],[1,"row"],["form","ngForm"],[1,"row","mt-2"],[1,"col-12","my-2"],[1,"bg-light","d-flex","flex-wrap","border","py-2"],[1,"form-group","col-12"],["for","pessoa_Id",1,"text-info"],["name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Todas",3,"options","ngModel","styleClass","showClear","filter","filterFields","virtualScroll","virtualScrollItemSize","scrollHeight","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"col-12"],["type","radio","name","datas","id","nao",3,"value","ngModel","ngModelChange"],["datas","ngModel"],["for","nao",1,"mb-1","ms-2","text-info"],["type","radio","name","datas","id","intervalo",3,"value","ngModel","ngModelChange"],["for","intervalo",1,"mb-1","ms-2","text-info"],[1,"form-group","col-sm-6","col-12"],["for","de"],["class","text-danger",4,"ngIf"],["type","date","name","de","id","de",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["de","ngModel"],["for","ate"],["type","date","name","ate","id","ate",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["ate","ngModel"],["type","radio","name","datas","id","ou",3,"value","ngModel","ngModelChange"],["for","ou",1,"mb-1","ms-2","text-info"],["for","data"],["type","date","name","data","id","data",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["data","ngModel"],[1,"px-1","d-flex","justify-content-between","align-items-start"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],[1,"text-danger"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div"),t.YNc(1,Ft,1,0,"ng-template",null,0,t.W1O),t.YNc(3,Wt,64,35,"ng-template",null,1,t.W1O),t.qZA())},dependencies:[u.O5,U.Lt,S.jx,c._Y,c.Fj,c._,c.JJ,c.JL,c.Q7,c.On,c.F,u.H9]})}return o})();class Xt{constructor(){this.pessoa_Id=void 0}}var te=p(9336);const ee=["template"],oe=["icon"],ae=["form"];function ne(o,r){1&o&&t._UZ(0,"img",2)}function ie(o,r){if(1&o&&(t.TgZ(0,"p")(1,"strong"),t._uU(2,"Nome do arquivo:"),t.qZA(),t._uU(3),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",e.fileUpload.name,"")}}function re(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"label",12)(2,"p",13),t._UZ(3,"i",14),t.qZA(),t.TgZ(4,"h3"),t._uU(5,"Clique e arraste para selecionar arquivo"),t.qZA(),t.TgZ(6,"p"),t._uU(7,"ou "),t.TgZ(8,"label",15),t._uU(9,"clique aqui"),t.qZA(),t._uU(10," para abrir explorador de arquivos"),t.qZA(),t.YNc(11,ie,4,1,"p",5),t.TgZ(12,"input",16,17),t.NdJ("input",function(n){t.CHM(e);const i=t.oxw(2);return t.KtG(i.fileChange(n))}),t.qZA()(),t.TgZ(14,"p",18)(15,"a",19),t._uU(16,"Clique aqui para saber como deve ser o arquivo XLSX"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(11),t.Q6J("ngIf",e.fileUpload)}}function se(o,r){if(1&o&&t._UZ(0,"div",20),2&o){const e=t.oxw(2);t.Q6J("innerHTML",e.mensagem,t.oJD)}}function le(o,r){if(1&o&&t._UZ(0,"p",21),2&o){const e=t.oxw(2);t.Q6J("innerHTML",e.erro,t.oJD)}}function pe(o,r){1&o&&(t.TgZ(0,"p",22),t._uU(1,"Selecione um arquivo para enviar."),t.qZA())}function ce(o,r){1&o&&t._UZ(0,"span",25)}function de(o,r){if(1&o&&(t.TgZ(0,"button",23),t.YNc(1,ce,1,0,"span",24),t.TgZ(2,"span"),t._uU(3,"Salvar"),t.qZA()()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.Q6J("disabled",e.invalid||a.loading),t.xp6(1),t.Q6J("ngIf",a.loading)}}function me(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",3,4),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(2,re,17,1,"div",5),t.TgZ(3,"div",6)(4,"div",7),t.YNc(5,se,1,1,"div",8),t.YNc(6,le,1,1,"p",9),t.YNc(7,pe,2,0,"p",10),t.qZA(),t.YNc(8,de,4,2,"button",11),t.qZA()()}if(2&o){const e=t.MAs(1),a=t.oxw();t.xp6(2),t.Q6J("ngIf",!a.loading&&!a.salvo),t.xp6(3),t.Q6J("ngIf",a.mensagem&&!a.erro),t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",!a.erro&&!a.fileUpload||e.invalid&&e.errors&&e.errors.fileRequired),t.xp6(1),t.Q6J("ngIf",!a.salvo)}}let ue=(()=>{class o{constructor(e,a,n,i,l){this.toastr=e,this.modalService=a,this.activatedRoute=n,this.operacaoService=i,this.alertService=l,this.faUpload=f.cf$,this.faCircleXmark=f.WA2,this.faTriangleExclamation=f.ik8,this.faCircleCheck=f.fV7,this.loading=!1,this.modalOpen=!1,this.erro="",this.subscription=[],this.modal=new g.u,this.salvo=!1,this.mensagem=""}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.title="Importar Arquivo",this.modal.icon=this.icon,this.modal.style={width:"max-content","max-width":"95vw"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBack=[".."],this.modal.routerBackOptions={relativeTo:this.activatedRoute},setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}fileChange(e){e&&e.target&&e.target.files&&e.target.files.length>0?(this.fileUpload=e.target.files[0],this.form.control.setErrors(null)):(this.form.control.setErrors({fileRequired:!0}),this.toastr.error("Selecione um arquivo para importa\xe7\xe3o."),delete this.fileUpload)}send(){if(this.salvo=!1,this.loading=!0,this.mensagem="",this.erro="",!this.fileUpload)return this.toastr.error("Selecione um arquivo para enviar."),void(this.erro="Selecione um arquivo para enviar.");(0,d.n)(this.operacaoService.importarArquivo(this.fileUpload)).then(e=>{(0,d.n)(this.operacaoService.getList()),this.loading=!1,e.sucesso?(this.salvo=!0,e.mensagem&&this.alertService.info(e.mensagem)):(this.salvo=!1,this.toastr.error("Erro ao salvar registros."),e.mensagem&&this.alertService.error(e.mensagem))}).catch(e=>{this.salvo=!1,this.loading=!1,this.erro=(0,y.b)(e)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(b._W),t.Y36(g.Z),t.Y36(_.gz),t.Y36(h.m),t.Y36(te.c))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-importacao-arquivo"]],viewQuery:function(a,n){if(1&a&&(t.Gf(ee,5),t.Gf(oe,5),t.Gf(ae,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first),t.iGM(i=t.CRH())&&(n.form=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-excel.png"],["enctype","multipart/form-data",1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[4,"ngIf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1"],[1,"me-3"],[3,"innerHTML",4,"ngIf"],["class","text-danger",3,"innerHTML",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","btn btn-primary me-0 ms-auto",3,"disabled",4,"ngIf"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],["type","file","name","file","id","file","required","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"input"],["file",""],[1,"text-info"],["href","assets/modelos/modelo-importacao-operacao.xlsx","download","modelo-importacao-operacao.xlsx"],[3,"innerHTML"],[1,"text-danger",3,"innerHTML"],[1,"text-danger"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div"),t.YNc(1,ne,1,0,"ng-template",null,0,t.W1O),t.YNc(3,me,9,5,"ng-template",null,1,t.W1O),t.qZA())},dependencies:[u.O5,c._Y,c.JL,c.F],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}"]})}return o})();var _e=p(7280),A=p(1353),N=p(424);const ge=[{path:"",component:D,children:[{path:"cadastrar",component:F,data:{modalOrder:1},children:[{path:"moeda",component:A.U,data:{modalOrder:2}},{path:"moeda/:moeda_id",component:A.U,data:{modalOrder:2}},{path:"moeda/excluir/:moeda_id",component:N.T,data:{modalOrder:2}}]},{path:"exportar",component:$t,data:{modalOrder:1}},{path:"importar",component:ue,data:{modalOrder:1}},{path:"editar/:operacao_id",component:F,data:{modalOrder:1},children:[{path:"moeda",component:A.U,data:{modalOrder:2}},{path:"moeda/:moeda_id",component:A.U,data:{modalOrder:2}},{path:"moeda/excluir/:moeda_id",component:N.T,data:{modalOrder:2}}]},{path:"detalhes/:operacao_id",component:Et,data:{modalOrder:1}},{path:"excluir/:operacao_id",component:qt,data:{modalOrder:1}},_e.D]}];let fe=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(ge),_.Bz]})}return o})();var he=p(6208),ve=p(4685),xe=p(1532);let Ze=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.ez,fe,C.uH,U.kW,c.u5,M.yI.forChild(),he.m,ve.U$,xe._8]})}return o})()}}]);
"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[901],{2901:(Ot,j,a)=>{a.r(j),a.d(j,{UsuariosModule:()=>Jt});var _=a(6814),g=a(132),A=a(5861),d=a(708),u=a(2832),B=a(5219);class v{constructor(){this.id=0,this.perfilAcesso=void 0,this.perfilAcesso_Id=void 0,this.name="",this.email="",this.telefoneCelular=""}}var L=[{field:"id",header:"Id",maskType:u.O.undefined,filterType:u.vA.text,filterDisplay:u.w2.menu},{field:"name",header:"Nome",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.substring,substringLength:22},{field:"email",header:"E-mail",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.substring,substringLength:30},{field:"telefoneCelular",header:"Telefone/Celular",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.telefoneCelular},{field:"perfilAcesso.perfil",header:"Tipo de Acesso",maskType:u.O.undefined,filterType:u.vA.text,filterDisplay:u.w2.menu},{field:"ativo",header:"Ativo",maskType:u.O.boolean,filterType:u.vA.text,filterDisplay:u.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:B.a6.CONTAINS,values:[{value:!0,output:"Ativo",class:"flag-green"},{value:!1,output:"Inativo",class:"flag-red"}]}],t=a(9291),F=a(9862),I=a(5619),N=a(9397),P=a(2096),D=a(553),C=a(697),E=a(8787),y=a(2425),b=a(2667),T=a(3229);let x=(()=>{class i{constructor(e,o,s,n,p){this.table=e,this.http=o,this.toastr=s,this.crypto=n,this.accountService=p,this.url=D.N.url,this.list=new I.X([]),this.objeto=new I.X(void 0),this.account=new C.mR,this.perfilAcesso=new I.X([]),this.accountService.account.subscribe(l=>this.account=l??new C.mR)}getObject(){var e=localStorage.getItem("usuario");return e&&this.setObject(this.crypto.decrypt(e)??new v),this.objeto}setObject(e){localStorage.setItem("usuario",this.crypto.encrypt(e)??""),this.objeto.next(e)}getList(){return this.table.loading.next(!0),this.http.get(`${this.url}/usuario/all/`,{headers:new F.WM({loading:"false"})}).pipe((0,N.b)({next:e=>(e=e.map(o=>(o.ativo=!o.dataDesativado,o)),this.list.next(e),(0,P.of)(e)),error:e=>this.toastr.error("N\xe3o foi poss\xedvel carregar usu\xe1rios.")}))}get(e){return this.http.get(`${this.url}/usuario/${e}`,{headers:new F.WM({loading:"true"})})}getPerfilAcesso(){return this.http.get(`${this.url}/perfilAcesso/getAll`).pipe((0,N.b)({next:e=>(this.perfilAcesso.next(e),e),error:e=>this.toastr.error("N\xe3o foi poss\xedvel carregar perfil.")}))}create(e){return this.http.post(`${this.url}/usuario`,e)}edit(e){return this.http.put(`${this.url}/usuario`,e)}delete(e){return this.http.delete(`${this.url}/usuario/${e}`)}deactivated(e,o){return this.http.patch(`${this.url}/usuario/${e}/${o}`,{})}resetPassword(e){return this.http.patch(`${this.url}/usuario/reset-password/${e}`,{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(E.i),t.LFG(F.eN),t.LFG(y._W),t.LFG(b.w),t.LFG(T.B))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var U=a(8008);const q=["template"],G=["icon"];function k(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"desabilitar"),t.qZA())}function $(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"habilitar"),t.qZA())}function H(i,r){1&i&&(t.TgZ(0,"p",7),t._uU(1,"Voc\xea automaticamente ser\xe1 deslogado e n\xe3o poder\xe1 acessar o Planner."),t.qZA())}function V(i,r){1&i&&(t.TgZ(0,"p",7),t._uU(1,"Ap\xf3s isso, o usu\xe1rio n\xe3o poder\xe1 acessar o Planner."),t.qZA())}function z(i,r){1&i&&t._UZ(0,"span",8)}function W(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"Desabilitar"),t.qZA())}function K(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"Habilitar"),t.qZA())}function X(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"p"),t._uU(1,"Tem certeza que deseja "),t.YNc(2,k,2,0,"span",1),t.YNc(3,$,2,0,"span",1),t._uU(4," esse registro?\n"),t.qZA(),t.YNc(5,H,2,0,"p",2),t.YNc(6,V,2,0,"p",2),t.TgZ(7,"button",3),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.send())}),t.YNc(8,z,1,0,"span",4),t.YNc(9,W,2,0,"span",5),t.YNc(10,K,2,0,"span",5),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.objeto.ativo),t.xp6(1),t.Q6J("ngIf",!e.objeto.ativo),t.xp6(2),t.Q6J("ngIf",e.isUser&&e.objeto.ativo&&e.objeto.email==(null==e.account?null:e.account.email)),t.xp6(1),t.Q6J("ngIf",e.isUser&&e.objeto.ativo&&e.objeto.email!=(null==e.account?null:e.account.email)),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.objeto.ativo),t.xp6(1),t.Q6J("ngIf",!e.objeto.ativo)}}let S=(()=>{class i{constructor(e,o,s,n,p){this.activatedRoute=e,this.userService=o,this.accountService=s,this.modal=n,this.crypto=p,this.erro="",this.loading=!1,this.objeto=new v,this.subscription=[],this.routerBack=["../../"],this.title="",this.isUser=!1,this.routeBackOptions={relativeTo:this.activatedRoute};var l=e.params.subscribe(c=>{c.usuario_id?(this.objeto.id=this.crypto.decrypt(c.usuario_id),(0,d.n)(this.userService.get(this.objeto.id)).then(h=>{this.objeto=h,this.title=(this.objeto.ativo?"Desabilitar":"Habilitar")+"usu\xe1rio",setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(h=>this.voltar()).finally(()=>{})):this.voltar()});this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.modal.title.next(this.title),this.modal.template.next(this.template),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){var e=this;this.loading=!0,this.erro="",(0,d.n)(this.userService.deactivated(this.objeto.id,!!this.objeto.dataDesativado)).then(function(){var s=(0,A.Z)(function*(n){e.isUser&&n.dataDesativado&&n.email==e.account?.email&&e.accountService.logout(),yield(0,d.n)(e.userService.getList()),e.voltar()});return function(n){return s.apply(this,arguments)}}()).finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.gz),t.Y36(x),t.Y36(T.B),t.Y36(U.b),t.Y36(b.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-deactivated"]],viewQuery:function(o,s){if(1&o&&(t.Gf(q,5),t.Gf(G,5)),2&o){let n;t.iGM(n=t.CRH())&&(s.template=n.first),t.iGM(n=t.CRH())&&(s.icon=n.first)}},decls:2,vars:0,consts:[["content",""],["class","font-weight-bold",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[4,"ngIf"],[1,"font-weight-bold"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,s){1&o&&t.YNc(0,X,11,7,"ng-template",null,0,t.W1O)},dependencies:[_.O5]})}return i})();var M=a(590),J=a(2855),w=a(342),tt=a(237);const et=["template"],it=["icon"];let ot=(()=>{class i{constructor(e,o,s,n){this.activatedRoute=e,this.modalService=o,this.invoiceService=s,this.crypto=n,this.faTrash=M.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new J.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var e=this.activatedRoute.params.subscribe(o=>{if(o.invoice_id)try{this.id=this.crypto.decrypt(o.invoice_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal)},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal.id)}send(){this.loading=!0,this.erro="",(0,d.n)(this.invoiceService.delete(this.id)).then(e=>{this.loading=!1,e.sucesso?((0,d.n)(this.invoiceService.getList()),this.voltar()):this.erro=e.mensagem}).catch(e=>{this.loading=!1,this.erro=(0,w.b)(e)})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.gz),t.Y36(J.Z),t.Y36(tt.q),t.Y36(b.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete"]],viewQuery:function(o,s){if(1&o&&(t.Gf(et,5),t.Gf(it,5)),2&o){let n;t.iGM(n=t.CRH())&&(s.template=n.first),t.iGM(n=t.CRH())&&(s.icon=n.first)}},decls:0,vars:0,template:function(o,s){}})}return i})();var f=a(490),st=a(6599),Y=a(5597);let nt=(()=>{class i{constructor(e,o,s){this.userService=e,this.table=o,this.accountService=s,this.faUsers=M.FVb,this.Role=f.u,this.columns=L,this.list=[],this.tableLinks=[],this.account=new C.mR,this.menuTable=!0,this.subscription=[],this.create=(c=this.userService)=>{c.setObject(new v)},(0,d.n)(this.userService.getList());var n=this.accountService.account.subscribe(c=>this.account=c??new C.mR),p=this.userService.list.subscribe(c=>this.list=c),l=this.table.selected.subscribe(c=>{c&&((this.account.perfilAcesso_Id==f.u.Admin||this.account.perfilAcesso_Id==f.u.Master&&c.perfilAcesso_Id!=f.u.Admin)&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:c.ativo?"Desabilitar":"Habilitar",routePath:[c.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]},{label:"Resetar senha",routePath:["reset-password"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}]),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(n),this.subscription.push(p),this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}canMenu(){return`(${this.account.perfilAcesso_Id} == ${f.u.Admin}) || (${this.account.perfilAcesso_Id} == ${f.u.Master} && item.perfilAcesso_Id != ${f.u.Admin})`}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(x),t.Y36(E.i),t.Y36(T.B))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],decls:10,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__body"],[3,"list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"]],template:function(o,s){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t._UZ(3,"fa-icon",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6,"Usu\xe1rios"),t.qZA()()(),t.TgZ(7,"div",6),t._UZ(8,"app-list-shared",7),t.qZA()(),t._UZ(9,"router-outlet")),2&o&&(t.xp6(3),t.Q6J("icon",s.faUsers),t.xp6(5),t.Q6J("list",s.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",s.canMenu())("columns",s.columns)("tableLinks",s.tableLinks)("selectable",!0))},dependencies:[g.lC,st.o,Y.BN]})}return i})();function at(i,r){1&i&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Tem certeza que deseja resetar sua senha?"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ao resetar sua senha, voc\xea ser\xe1 automaticamente deslogado para realizar novo login."),t.qZA(),t.TgZ(5,"p",11)(6,"small"),t._uU(7,"Voc\xea receber\xe1 um email informando dessa altera\xe7\xe3o."),t.qZA()()())}function rt(i,r){1&i&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Tem certeza que deseja resetar a senha desse usu\xe1rio? "),t.qZA(),t.TgZ(3,"p",11)(4,"small"),t._uU(5,"Esse usu\xe1rio receber\xe1 um email o informando dessa altera\xe7\xe3o."),t.qZA()()())}function lt(i,r){1&i&&t._UZ(0,"span",12)}let ct=(()=>{class i{constructor(e,o,s,n,p){this.activatedRoute=e,this.modal=o,this.userService=s,this.accountService=n,this.crypto=p,this.faTimes=M.NBC,this.modalOpen=!1,this.erro="",this.loading=!1,this.objeto=new v,this.subscription=[],this.routerBack=["../../"],this.userLogado=this.accountService.accountValue,this.routeBackOptions={relativeTo:this.activatedRoute};var l=this.modal.getOpen().subscribe(h=>this.modalOpen=h);this.subscription.push(l);var c=this.activatedRoute.params.subscribe(h=>{h.usuario_id?(this.objeto.id=this.crypto.decrypt(h.usuario_id),(0,d.n)(this.userService.get(this.objeto.id)).then(R=>{this.objeto=R,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(R=>{this.voltar()})):this.voltar()});this.subscription.push(c)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){this.loading=!0,(0,d.n)(this.userService.resetPassword(this.objeto.id)).then(e=>{this.voltar(),this.objeto.email==this.userLogado?.email&&this.accountService.logout()}).catch().finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.gz),t.Y36(U.b),t.Y36(x),t.Y36(T.B),t.Y36(b.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-reset-password"]],decls:17,vars:5,consts:[[1,"modal"],[1,"modal__bg",3,"click"],[1,"modal__inner",2,"max-width","600px"],[1,"modal__content"],[1,"modal__header","pb-2"],[1,"text-orange"],[1,"modal__header-close","btn-close",3,"click"],[1,"modal__body","mt-0"],[4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return s.voltar()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Resetar senha"),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return s.voltar()}),t._UZ(8,"span")(9,"span"),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,at,8,0,"div",8),t.YNc(12,rt,6,0,"div",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return s.send()}),t.YNc(14,lt,1,0,"span",10),t.TgZ(15,"span"),t._uU(16," Resetar"),t.qZA()()()()()()),2&o&&(t.ekj("active",s.modalOpen),t.xp6(11),t.Q6J("ngIf",(null==s.userLogado?null:s.userLogado.email)==s.objeto.email),t.xp6(1),t.Q6J("ngIf",(null==s.userLogado?null:s.userLogado.email)!=s.objeto.email),t.xp6(2),t.Q6J("ngIf",s.loading))},dependencies:[_.O5]})}return i})();var ut=a(5592);let Z=(()=>{class i{constructor(e,o,s,n){this.accountService=e,this.userService=o,this.router=s,this.toastr=n}canActivate(e,o){return new ut.y(s=>{this.userService.objeto.subscribe(n=>{var p=this.accountService.accountValue;s.next(p?.perfilAcesso_Id!=f.u.Master||n?.perfilAcesso_Id!=f.u.Admin)})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(T.B),t.LFG(x),t.LFG(g.F0),t.LFG(y._W))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var m=a(6223),O=a(8839);const pt=["template"],dt=["icon"];function mt(i,r){if(1&i&&t._UZ(0,"fa-icon",2),2&i){const e=t.oxw();t.Q6J("icon",e.faUsers)}}function ht(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function ft(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"Remova os espa\xe7os antes e depois do texto."),t.qZA())}function gt(i,r){if(1&i&&(t.TgZ(0,"p",8),t.YNc(1,ft,2,0,"span",11),t.qZA()),2&i){t.oxw(2);const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf","^\\S(.*\\S)?$"==e.errors.pattern.requiredPattern)}}function _t(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ht,2,0,"p",28),t.YNc(2,gt,2,1,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.pattern)}}function vt(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function bt(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Telefone/celular inv\xe1lido"),t.qZA())}function Tt(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,vt,2,0,"p",28),t.YNc(2,bt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(17);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.mask)}}function xt(i,r){if(1&i&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("ngValue",e.id),t.xp6(1),t.Oqu(e.perfil)}}function Zt(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function At(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Zt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(25);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ct(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function yt(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"E-mail inv\xe1lido"),t.qZA())}function Mt(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ct,2,0,"p",28),t.YNc(2,yt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(36);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.email)}}function Ft(i,r){if(1&i&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function It(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function Ut(i,r){if(1&i&&(t.TgZ(0,"div",29),t.YNc(1,Ft,2,1,"p",28),t.YNc(2,It,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(1),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!o.erro)}}function wt(i,r){1&i&&t._UZ(0,"span",30)}function Yt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",3,4),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.MAs(1),n=t.oxw();return t.KtG(n.send(s))}),t.TgZ(2,"div",5)(3,"div",6)(4,"label",7),t._uU(5,"Nome: "),t.TgZ(6,"span",8),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"input",9,10),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw();return t.KtG(n.objeto.name=s)})("change",function(){t.CHM(e);const s=t.MAs(9),n=t.oxw();return t.KtG(n.objeto.name=s.value.trim())}),t.qZA(),t.YNc(10,_t,3,2,"div",11),t.qZA(),t.TgZ(11,"div",6)(12,"label",12),t._uU(13,"Telefone/Celular: "),t.TgZ(14,"span",8),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"input",13,14),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw();return t.KtG(n.objeto.telefoneCelular=s)}),t.qZA(),t.YNc(18,Tt,3,2,"div",11),t.qZA(),t.TgZ(19,"div",6)(20,"label",15),t._uU(21,"Perfil: "),t.TgZ(22,"span",8),t._uU(23,"*"),t.qZA()(),t.TgZ(24,"select",16,17),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw();return t.KtG(n.objeto.perfilAcesso_Id=s)}),t.TgZ(26,"option",18),t._uU(27,"Selecione"),t.qZA(),t.YNc(28,xt,2,2,"option",19),t.qZA(),t.YNc(29,At,2,1,"div",11),t.qZA(),t.TgZ(30,"div",20)(31,"label",21),t._uU(32,"E-mail: "),t.TgZ(33,"span",8),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"input",22,23),t.NdJ("ngModelChange",function(s){t.CHM(e);const n=t.oxw();return t.KtG(n.objeto.email=s)}),t.qZA(),t.YNc(37,Mt,3,2,"div",11),t.qZA()(),t.TgZ(38,"div",24),t.YNc(39,Ut,3,2,"div",25),t.TgZ(40,"button",26),t.YNc(41,wt,1,0,"span",27),t._uU(42," Salvar "),t.qZA()()()}if(2&i){const e=t.MAs(1),o=t.MAs(9),s=t.MAs(17),n=t.MAs(25),p=t.MAs(36),l=t.oxw();t.xp6(8),t.Q6J("ngModel",l.objeto.name),t.xp6(2),t.Q6J("ngIf",o.touched&&o.errors),t.xp6(6),t.Q6J("ngModel",l.objeto.telefoneCelular),t.xp6(2),t.Q6J("ngIf",s.touched&&s.errors),t.xp6(6),t.ekj("form-control-loading",l.loadingPerfil),t.Q6J("ngModel",l.objeto.perfilAcesso_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",l.perfil),t.xp6(1),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(6),t.Q6J("email",!0)("ngModel",l.objeto.email)("readonly",l.isEditPage)("pattern",l.emailPattern),t.xp6(2),t.Q6J("ngIf",p.touched&&p.errors),t.xp6(2),t.Q6J("ngIf",l.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||l.loading),t.xp6(1),t.Q6J("ngIf",l.loading)}}let Q=(()=>{class i{constructor(e,o,s,n,p){this.activatedRoute=e,this.toastr=o,this.modal=s,this.userService=n,this.crypto=p,this.faUsers=M.FVb,this.modalOpen=!1,this.objeto=new v,this.erro="",this.loading=!1,this.subscription=[],this.routerBack=["../"],this.isEditPage=!1,this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,this.title="",this.perfil=[],this.loadingPerfil=!0,this.routeBackOptions={relativeTo:this.activatedRoute},(0,d.n)(this.userService.getPerfilAcesso()).then(c=>this.perfil=c).catch().finally(()=>this.loadingPerfil=!1);var l=e.params.subscribe(c=>{c.usuario_id?(this.isEditPage=!0,this.title="Editar usu\xe1rio",this.objeto.id=this.crypto.decrypt(c.usuario_id),this.routerBack=["../../"],(0,d.n)(this.userService.get(this.objeto.id)).then(h=>{this.objeto=h,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(h=>this.voltar()).finally(()=>this.loading=!1)):(this.isEditPage=!1,this.routerBack=["../"],this.title="Cadastrar usu\xe1rio",setTimeout(()=>{this.modal.setOpen(!0)},200))});this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.modal.title.next(this.title),this.modal.template.next(this.template),this.modal.icon.next(this.icon),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(e){var o=this;this.loading=!0,this.erro="",this.isEditPage?(0,d.n)(this.userService.edit(this.objeto)).then(function(){var s=(0,A.Z)(function*(n){return yield o.then(n)});return function(n){return s.apply(this,arguments)}}()).catch(s=>this.erro=(0,w.b)(s)).finally(()=>this.loading=!1):(0,d.n)(this.userService.create(this.objeto)).then(function(){var s=(0,A.Z)(function*(n){return yield o.then(n)});return function(n){return s.apply(this,arguments)}}()).catch(s=>this.erro=(0,w.b)(s)).finally(()=>this.loading=!1)}then(e){var o=this;return(0,A.Z)(function*(){o.modal.voltar(o.routerBack,o.routeBackOptions),yield(0,d.n)(o.userService.getList())})()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.gz),t.Y36(y._W),t.Y36(U.b),t.Y36(x),t.Y36(b.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],viewQuery:function(o,s){if(1&o&&(t.Gf(pt,5),t.Gf(dt,5)),2&o){let n;t.iGM(n=t.CRH())&&(s.template=n.first),t.iGM(n=t.CRH())&&(s.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[3,"ngSubmit"],["form","ngForm"],[1,"row","form-row"],[1,"form-group","col-xl-4","col-lg-4","col-md-6","col-sm-6","col-12"],["for","name"],[1,"text-danger"],["type","text","name","name","id","name","required","","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngModelChange","change"],["name","ngModel"],[4,"ngIf"],["for","telefoneCelular"],["type","text","name","telefoneCelular","id","telefoneCelular","mask","(00) 0000-0000||(00) 0.0000-0000","pattern","^\\(?[1-9]{2}\\)? ?(?:[0-9]|9[0-9])[0-9]{3}\\-?[0-9]{4}$","placeholder","(11) x.0000-0000","required","",1,"form-control",3,"ngModel","ngModelChange"],["telefoneCelular","ngModel"],["for","perfilAcesso_Id"],["name","perfilAcesso_Id","id","perfilAcesso_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["perfilAcesso_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","col-xl-12","col-lg-12","col-md-6","col-sm-6","col-12","email-container"],["for","email"],["type","email","name","email","id","email","placeholder","example@hotmail.com","required","",1,"form-control",3,"email","ngModel","readonly","pattern","ngModelChange"],["email","ngModel"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,s){1&o&&(t.YNc(0,mt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,Yt,43,18,"ng-template",null,1,t.W1O))},dependencies:[_.sg,_.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.Q7,m.c5,m.on,m.On,m.F,Y.BN,O.hx],styles:["@media (max-width: 768px){.email-container[_ngcontent-%COMP%], .senha-container[_ngcontent-%COMP%]{order:1}}"]})}return i})();const jt=[{path:"",component:nt,title:"ZenTech - Usu\xe1rios",children:[{path:"minha-conta",loadComponent:()=>a.e(688).then(a.bind(a,6688)).then(i=>i.MyAccountComponent)},{path:"cadastrar",component:Q,title:"ZenTech - Cadastrar usu\xe1rio"},{path:"editar/:usuario_id",component:Q,title:"ZenTech - Editar usu\xe1rio",canActivate:[Z]},{path:"excluir/:usuario_id",component:ot,title:"ZenTech - Excluir usu\xe1rio",canActivate:[Z]},{path:"reset-password/:usuario_id",component:ct,title:"ZenTech - Resetar senha",canActivate:[Z]},{path:"habilitar/:usuario_id",component:S,title:"ZenTech - Habilitar usu\xe1rio",canActivate:[Z]},{path:"desabilitar/:usuario_id",component:S,title:"ZenTech - Desabilitar usu\xe1rio",canActivate:[Z]}]}];let Nt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(jt),g.Bz]})}return i})();var Et=a(6208),St=a(4685);let Jt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[_.ez,Nt,m.u5,y.Rh,Et.m,Y.uH,St.U$,O.yI.forChild()]})}return i})()}}]);
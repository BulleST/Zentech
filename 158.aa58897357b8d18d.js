"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[158],{158:(Uo,R,d)=>{d.r(R),d.d(R,{InvoiceModule:()=>Mo});var x=d(6814),C=d(132),g=d(5861),f=d(590),c=d(708),Z=d(5219),m=d(2832),D=d(5254);class L{constructor(){this.id=0,this.data=new Date,this.moeda_Id=void 0,this.valor="",this.instituicaoFinanceira_Id=void 0,this.beneficiario_Id=void 0,this.conta=""}}class U{constructor(){this.invoice=new L,this.contrato=new D.hi}}var se=[{field:"id",header:"N\xba Invoice",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!1,showOperator:!1,filterMatchMode:Z.a6.EQUALS},{field:"data",header:"Data Invoice",maskType:m.O.dateTime,filterType:m.vA.date,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.DATE_IS},{field:"valor",header:"Valor",maskType:m.O.number,filterType:m.vA.numeric,filterDisplay:m.w2.menu,decimal:"1.2",showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.EQUALS},{field:"banco",header:"Banco",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.CONTAINS},{field:"beneficiario",header:"Beneficiario",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.CONTAINS},{field:"instituicaoFinanceira",header:"Institui\xe7\xe3o Financeira",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.CONTAINS},{field:"conta",header:"Conta",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!1,showOperator:!1,filterMatchMode:Z.a6.EQUALS}],e=d(9291),Y=d(8787),O=d(9862),J=d(5619),I=d(9397),k=d(2096),le=d(553),F=d(2425),S=d(5038);let M=(()=>{class a{constructor(t,i,o,n,r){this.table=t,this.http=i,this.toastr=o,this.datePipe=n,this.empresaService=r,this.url=le.N.url,this.list=new J.X([]),this.object=new J.X(new L),this.loading=new J.X(!1)}getList(t=!1){this.loading.next(t),this.table.loading.next(!0);var i=this.empresaService.getEmpresa().value.id;return this.http.get(`${this.url}/invoice/list/${i}`).pipe((0,I.b)({next:o=>(o=o.map(n=>(n.data=new Date(n.data),n)),this.list.next(Object.assign([],o)),this.loading.next(!1),(0,k.of)(o)),error:o=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de invoices."),finalize:()=>{this.loading.next(!1),this.table.loading.next(!1)}}))}get(t){return this.http.get(`${this.url}/invoice/${t}`,{headers:new O.WM({loading:"true"})}).pipe((0,I.b)({next:i=>(this.object.next(JSON.parse(JSON.stringify(i))),(0,k.of)(i)),error:i=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de invoices.")}))}create(t){return this.http.post(`${this.url}/invoice`,t)}edit(t){return this.http.put(`${this.url}/invoice`,t)}delete(t){return this.http.delete(`${this.url}/invoice/${t}`)}file(t){return this.http.post(`${this.url}/invoice/exportar-pdf/${t}`,{},{responseType:"blob"}).pipe((0,I.b)({next:i=>{var o=new Blob([i],{type:"application/pdf"});const n=window.URL.createObjectURL(o);var r=document.createElement("a");r.href=n,r.download=`Invoice_${this.datePipe.transform(new Date,"yyyyMMddHHmmss")}`,r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}))}fileSwift(t){return this.http.post(`${this.url}/invoice/swift/exportar-pdf/${t}`,{},{responseType:"blob"}).pipe((0,I.b)({next:i=>{var o=new Blob([i],{type:"application/pdf"});const n=window.URL.createObjectURL(o);var r=document.createElement("a");r.href=n,r.download=`Swift_${this.datePipe.transform(new Date,"yyyyMMddHHmmss")}`,r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}))}kitZip(t){return this.http.post(`${this.url}/invoice/exportar-zip/${t}`,{},{responseType:"blob"}).pipe((0,I.b)({next:i=>{var o=new Blob([i],{type:"application/zip"});const n=window.URL.createObjectURL(o);var r=document.createElement("a");r.href=n,r.download=`Kit_${this.datePipe.transform(new Date,"yyyyMMddHHmmss")}.zip`,r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}))}static#e=this.\u0275fac=function(i){return new(i||a)(e.LFG(Y.i),e.LFG(O.eN),e.LFG(F._W),e.LFG(x.uU),e.LFG(S.P))};static#t=this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var H=d(6434),y=d(5597),de=d(6599),ce=d(9901);function pe(a,s){if(1&a&&(e.TgZ(0,"p",13)(1,"small"),e._uU(2,"Invoices cadastrados em "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&a){const t=e.oxw();e.xp6(4),e.Oqu(t.empresaSelected.nome||"Empresa X")}}function ue(a,s){1&a&&e._UZ(0,"span",14)}const me=function(){return["cadastrar"]};function _e(a,s){1&a&&(e.TgZ(0,"div",15)(1,"a",16)(2,"span",17),e._uU(3," Cadastrar Invoice"),e.qZA()()()),2&a&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,me)))}let ge=(()=>{class a{constructor(t,i,o,n){var r=this;this.table=t,this.invoiceService=i,this.accountService=o,this.empresaService=n,this.faFileInvoice=f.fab,this.list=[],this.tableLinks=[],this.columns=se,this.subscription=[],this.loading=!1;var l=this.invoiceService.list.subscribe(h=>this.list=Object.assign([],h));this.subscription.push(l);var p=this.invoiceService.loading.subscribe(h=>this.loading=h);this.subscription.push(p);var _=this.empresaService.getEmpresa().subscribe(function(){var h=(0,g.Z)(function*(T){r.empresaSelected=T.empresa,T&&T.id&&(yield(0,c.n)(r.invoiceService.getList(!0)))});return function(T){return h.apply(this,arguments)}}());this.subscription.push(_);var A=this.table.selected.subscribe(h=>{h&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(A)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}getList(){(0,c.n)(this.invoiceService.getList(!0))}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(Y.i),e.Y36(M),e.Y36(H.B),e.Y36(S.P))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-list"]],decls:18,vars:14,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["class","page__header-subtitle",4,"ngIf"],[1,"ms-auto","mt-auto",2,"margin-bottom","7px"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"topActions","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"page__header-subtitle"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"col-xl-4","col-lg-5","col-md-6","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(i,o){if(1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Invoices"),e.qZA(),e.YNc(7,pe,5,1,"p",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return o.getList()}),e.YNc(10,ue,1,0,"span",9),e._uU(11,"Atualizar"),e.qZA()(),e._UZ(12,"app-empresa-selected"),e.qZA(),e.TgZ(13,"div",10),e.YNc(14,_e,4,2,"ng-template",null,11,e.W1O),e._UZ(16,"app-list-shared",12),e.qZA()(),e._UZ(17,"router-outlet")),2&i){const n=e.MAs(15);e.xp6(3),e.Q6J("icon",o.faFileInvoice),e.xp6(4),e.Q6J("ngIf",o.empresaSelected),e.xp6(2),e.Q6J("disabled",o.loading),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(6),e.Q6J("topActions",n)("list",o.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",o.columns)("tableLinks",o.tableLinks)("selectable",!0)}},dependencies:[x.O5,C.lC,C.rH,y.BN,de.o,ce.j]})}return a})();var q=d(2855),b=d(342),fe=d(5753),Q=d(2667),E=d(4527),u=d(6223),V=d(4844),G=d(2400);function he(a,s){1&a&&(e.TgZ(0,"p",44),e._uU(1,"Assinaturas e certificado devem estar inclu\xeddos para baixar pdf."),e.qZA())}function ve(a,s){1&a&&(e.TgZ(0,"span",50),e._uU(1," Para assinar, todos os campos devem estar preenchidos corretamente. "),e.qZA())}function be(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Cancelar"),e.qZA())}function Ce(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Alterar dados"),e.qZA())}function xe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2),n=e.MAs(21),r=e.MAs(29);return e.KtG(o.salvarDados_Contratante(n.value,r.value,o.assinatura_Contratante.uri))}),e._uU(1," Salvar Dados "),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",!t.assinatura_Contratante.podeAssinar)}}function Ze(a,s){1&a&&e._UZ(0,"span",51)}function Te(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,ve,2,0,"span",45),e.TgZ(2,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alterarDados_Contratante())}),e.YNc(3,be,2,0,"span",9),e.YNc(4,Ce,2,0,"span",9),e.qZA(),e.YNc(5,xe,2,1,"button",47),e.TgZ(6,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.assinar_Contratante())}),e.YNc(7,Ze,1,0,"span",48),e.TgZ(8,"span",49),e._uU(9,"Assinar "),e.qZA(),e._UZ(10,"fa-icon",40),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.assinatura_Contratante.podeAssinar),e.xp6(1),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.assinatura_Contratante.alterarDados),e.xp6(1),e.Q6J("ngIf",!t.assinatura_Contratante.alterarDados),e.xp6(1),e.Q6J("ngIf",t.assinatura_Contratante.alterarDados&&t.isEditPage),e.xp6(1),e.Q6J("disabled",t.loading||t.assinatura_Contratante.alterarDados||!t.assinatura_Contratante.podeAssinar),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(3),e.Q6J("icon",t.faPenClip)}}function Ae(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"p",52),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",53)(5,"span",52),e._uU(6,"Assinado"),e.qZA(),e._UZ(7,"fa-icon",40),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.hij("Assinado em ",e.xi3(3,2,t.objeto.contrato.dataAssinaturaRepresentanteLegal,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.Q6J("icon",t.faCheck)}}function ye(a,s){1&a&&(e.TgZ(0,"p",13),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Ie(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,ye,2,0,"p",54),e.qZA()),2&a){e.oxw();const t=e.MAs(21);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Fe(a,s){1&a&&(e.TgZ(0,"p",13),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Me(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Fe,2,0,"p",54),e.qZA()),2&a){e.oxw();const t=e.MAs(29);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function we(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Escolher assinatura"),e.qZA())}function je(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Refazer upload"),e.qZA())}function Ue(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"label",58),e.YNc(1,we,2,0,"span",9),e.YNc(2,je,2,0,"span",9),e.TgZ(3,"input",59,60),e.NdJ("input",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.assinatura_Contratante.fileChange(o,n))}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.assinatura_Contratante.isUploaded),e.xp6(1),e.Q6J("ngIf",t.assinatura_Contratante.isUploaded),e.xp6(1),e.Q6J("disabled",!t.assinatura_Contratante.alterarDados)}}function qe(a,s){1&a&&(e.TgZ(0,"label",61),e._uU(1,"Nenhuma assinatura selecionada"),e.qZA())}function Ee(a,s){if(1&a&&(e.TgZ(0,"label",62),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("title",t.assinatura_Contratante.file.name),e.xp6(1),e.Oqu(t.assinatura_Contratante.file.name)}}function Ne(a,s){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Ue,5,3,"label",55),e.YNc(2,qe,2,0,"label",56),e.YNc(3,Ee,2,2,"label",57),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.assinatura_Contratante.alterarDados),e.xp6(1),e.Q6J("ngIf",!t.assinatura_Contratante.uri),e.xp6(1),e.Q6J("ngIf",t.assinatura_Contratante.uri&&null!=t.assinatura_Contratante.file)}}function Be(a,s){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"img",63),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("src",t.assinatura_Contratante.uri,e.LSH)("alt",t.assinatura_Contratante.file?t.assinatura_Contratante.file.name:"Assinatura")}}function Je(a,s){1&a&&(e.TgZ(0,"span",50),e._uU(1," Para assinar, deve conter uma assinatura presente. "),e.qZA())}function Se(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Cancelar"),e.qZA())}function Qe(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Alterar"),e.qZA())}function Pe(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Incluir"),e.qZA())}function Re(a,s){if(1&a&&(e.TgZ(0,"span"),e.YNc(1,Qe,2,0,"span",9),e.YNc(2,Pe,2,0,"span",9),e._uU(3," assinatura"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.objeto.contrato.assinaturaIntermediadora),e.xp6(1),e.Q6J("ngIf",!t.objeto.contrato.assinaturaIntermediadora)}}function De(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.salvarDados_Intermediadora())}),e._uU(1," Salvar Dados "),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",!t.assinatura_Intermediadora.podeAssinar)}}function Le(a,s){1&a&&e._UZ(0,"span",51)}function Ye(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,Je,2,0,"span",45),e.TgZ(2,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alterarDados_Intermediadora())}),e.YNc(3,Se,2,0,"span",9),e.YNc(4,Re,4,2,"span",9),e.qZA(),e.YNc(5,De,2,1,"button",47),e.TgZ(6,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.assinar_Intermediadora())}),e.YNc(7,Le,1,0,"span",48),e.TgZ(8,"span",49),e._uU(9,"Assinar "),e.qZA(),e._UZ(10,"fa-icon",40),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.assinatura_Intermediadora.podeAssinar),e.xp6(1),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("ngIf",t.assinatura_Intermediadora.alterarDados),e.xp6(1),e.Q6J("ngIf",!t.assinatura_Intermediadora.alterarDados),e.xp6(1),e.Q6J("ngIf",t.assinatura_Intermediadora.alterarDados&&t.isEditPage),e.xp6(1),e.Q6J("disabled",t.loading||t.assinatura_Intermediadora.alterarDados||!t.assinatura_Intermediadora.podeAssinar),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(3),e.Q6J("icon",t.faPenClip)}}function Oe(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"p",52),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",53)(5,"span",52),e._uU(6,"Assinado"),e.qZA(),e._UZ(7,"fa-icon",40),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.hij("Assinado em ",e.xi3(3,2,t.objeto.contrato.dataAssinaturaIntermediadora,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.Q6J("icon",t.faCheck)}}function ke(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Escolher assinatura"),e.qZA())}function He(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Refazer upload"),e.qZA())}function Ve(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"label",65),e.YNc(1,ke,2,0,"span",9),e.YNc(2,He,2,0,"span",9),e.TgZ(3,"input",66,67),e.NdJ("input",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.assinatura_Intermediadora.fileChange(o,n))}),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.assinatura_Intermediadora.isUploaded),e.xp6(1),e.Q6J("ngIf",t.assinatura_Intermediadora.isUploaded),e.xp6(1),e.Q6J("disabled",!t.assinatura_Intermediadora.alterarDados)}}function Ge(a,s){1&a&&(e.TgZ(0,"label",61),e._uU(1,"Nenhuma assinatura selecionada"),e.qZA())}function Ke(a,s){if(1&a&&(e.TgZ(0,"label",62),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("title",t.assinatura_Intermediadora.file.name),e.xp6(1),e.Oqu(t.assinatura_Intermediadora.file.name)}}function ze(a,s){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Ve,5,3,"label",64),e.YNc(2,Ge,2,0,"label",56),e.YNc(3,Ke,2,2,"label",57),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.assinatura_Intermediadora.alterarDados),e.xp6(1),e.Q6J("ngIf",!t.assinatura_Intermediadora.uri),e.xp6(1),e.Q6J("ngIf",t.assinatura_Intermediadora.uri&&null!=t.assinatura_Intermediadora.file)}}function $e(a,s){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"img",63),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("src",t.assinatura_Intermediadora.uri,e.LSH)("alt",t.assinatura_Intermediadora.file?t.assinatura_Intermediadora.file.name:"Assinatura")}}function We(a,s){1&a&&e._UZ(0,"span",51)}function Xe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.certificadoAssinatura())}),e.YNc(1,We,1,0,"span",48),e.TgZ(2,"span",49),e._uU(3,"Gerar Certificado"),e.qZA(),e._UZ(4,"fa-icon",40),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.loading||!t.assinatura_Contratante.assinado||!t.assinatura_Intermediadora.assinado),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(3),e.Q6J("icon",t.faPenClip)}}function et(a,s){if(1&a&&(e.TgZ(0,"div",33)(1,"p",52),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span",53)(5,"span",52),e._uU(6,"Inclu\xeddo"),e.qZA(),e._UZ(7,"fa-icon",40),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.hij("Inclu\xeddo em ",e.xi3(3,2,t.objeto.contrato.dataCertificadoAssinatura,"dd/MM/yyyy HH:mm")," "),e.xp6(5),e.Q6J("icon",t.faCheck)}}function tt(a,s){if(1&a&&(e.TgZ(0,"div",0)(1,"div",68)(2,"div",69)(3,"div",70)(4,"div",71)(5,"p"),e._uU(6,"Datas e hor\xe1rios em GMT -3:00 Bras\xedlia"),e.qZA(),e.TgZ(7,"p")(8,"span"),e._uU(9,"Certificado de assinaturas gerado "),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"date"),e.qZA(),e._uU(13,", "),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"date"),e.qZA(),e._uU(17," de "),e.TgZ(18,"span"),e._uU(19),e.ALo(20,"date"),e.qZA(),e._uU(21," de "),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"date"),e.qZA(),e._uU(25,"\xa0 "),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"date"),e.qZA()()()(),e.TgZ(29,"div",72)(30,"div",71)(31,"p"),e._uU(32),e.qZA(),e.TgZ(33,"p"),e._uU(34),e.qZA(),e.TgZ(35,"p"),e._uU(36),e.qZA(),e.TgZ(37,"p"),e._uU(38),e.qZA(),e.TgZ(39,"p"),e._uU(40,"O documento n\xe3o foi modificado ap\xf3s a aplica\xe7\xe3o das assinaturas."),e.qZA()()(),e.TgZ(41,"div",72)(42,"div",73)(43,"h6",74)(44,"b"),e._uU(45,"Assinaturas"),e.qZA()(),e.TgZ(46,"p"),e._uU(47,"- A assinatura \xe9 "),e.TgZ(48,"b"),e._uU(49,"V\xc1LIDA"),e.qZA(),e._uU(50,", assinada por "),e.TgZ(51,"b"),e._uU(52),e.qZA()(),e.TgZ(53,"p"),e._uU(54,"- SOCIO ADM"),e.qZA(),e.TgZ(55,"p"),e._uU(56),e.qZA(),e.TgZ(57,"p"),e._uU(58),e.ALo(59,"date"),e.qZA(),e.TgZ(60,"p"),e._uU(61,"- A identidade do assinante \xe9 "),e.TgZ(62,"b"),e._uU(63,"V\xc1LIDA"),e.qZA()(),e._UZ(64,"img",75),e.qZA()(),e.TgZ(65,"div",71)(66,"p"),e._uU(67,"Esse LOG pertence unica e exclusivamente ao documento:"),e.qZA(),e.TgZ(68,"p"),e._uU(69),e.qZA()()()()()),2&a){const t=e.oxw();let i;e.xp6(11),e.Oqu(e.xi3(12,14,t.objeto.contrato.dataCertificadoAssinatura,"EEEE")),e.xp6(4),e.Oqu(e.xi3(16,17,t.objeto.contrato.dataCertificadoAssinatura,"dd")),e.xp6(4),e.Oqu(e.xi3(20,20,t.objeto.contrato.dataCertificadoAssinatura,"MMMM")),e.xp6(4),e.Oqu(e.xi3(24,23,t.objeto.contrato.dataCertificadoAssinatura,"yyyy")),e.xp6(4),e.Oqu(e.xi3(28,26,t.objeto.contrato.dataCertificadoAssinatura,"HH:mm:ss")),e.xp6(5),e.hij("",t.objeto.contrato.nomeEmpresa," "),e.xp6(2),e.Oqu(null==t.beneficiarioSelected?null:t.beneficiarioSelected.nome),e.xp6(2),e.hij("REF: ",t.objeto.contrato.ref,""),e.xp6(2),e.hij("Controle PROCAMBIO: ",t.objeto.contrato.controleProCambio,""),e.xp6(14),e.AsE("",null!==(i=t.objeto.contrato.nomeRepresentanteLegal)&&void 0!==i?i:"REPRESENTANTE LEGAL"," - ID: ",null!==(i=t.objeto.contrato.codigoRepresentanteLegal)&&void 0!==i?i:"123456",""),e.xp6(4),e.hij("- IP: ",t.objeto.contrato.ipAssinaturaRepresentanteLegal,""),e.xp6(2),e.hij("- Hora da Assinatura: ",e.xi3(59,29,t.objeto.contrato.dataAssinaturaRepresentanteLegal,"dd/MM/yyyy HH:mm")," "),e.xp6(11),e.hij("Controle PROCAMBIO: ",t.objeto.contrato.controleProCambio,"")}}function ot(a,s){1&a&&(e.TgZ(0,"p",13),e._uU(1,"Preencha os campos obrigat\xf3rios (*) de Contrato corretamente para salvar."),e.qZA())}function at(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,ot,2,0,"p",54),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.invalid&&!t.erro)}}function nt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.proximo())}),e.TgZ(1,"span",77),e._uU(2,"Pr\xf3ximo"),e.qZA(),e._UZ(3,"fa-icon",40),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.form.invalid),e.xp6(3),e.Q6J("icon",t.faArrowRight)}}function it(a,s){1&a&&e._UZ(0,"span",51)}function rt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.send.emit(!0))}),e.YNc(1,it,1,0,"span",48),e.TgZ(2,"span"),e._uU(3,"Salvar e Gerar Swift"),e.qZA()()}if(2&a){const t=e.oxw();e.Q6J("disabled",t.loading||t.form.invalid),e.xp6(1),e.Q6J("ngIf",t.loading)}}let st=(()=>{class a{constructor(t,i,o,n,r){this.contratoService=t,this.toastr=i,this.loadingService=o,this.invoiceService=n,this.empresaService=r,this.faPenClip=f.k8y,this.faCheck=f.LEp,this.faArrowLeft=f.acZ,this.faArrowRight=f.eFW,this.objeto=new U,this.erro="",this.loading=!1,this.podeBaixarPDF=!1,this.readonly=!1,this.isEditPage=!1,this.certificadoAssinaturaIncluido=!1,this.assinatura_Contratante=new K,this.assinatura_Intermediadora=new K,this.loadingContratoBicolunadoFile=!1,this.erroChange=new e.vpe,this.loadingChange=new e.vpe,this.podeBaixarChanged=new e.vpe,this.tabChanged=new e.vpe,this.objetoChanged=new e.vpe,this.send=new e.vpe,this.empresaService.getEmpresa().subscribe(l=>this.empresaSelected=l.empresa)}ngOnChanges(t){t.objeto&&(this.objeto=t.objeto.currentValue,this.setContratante(this.objeto.contrato.nomeRepresentanteLegal,this.objeto.contrato.codigoRepresentanteLegal,this.objeto.contrato.assinaturaRepresentanteLegal),this.setIntermediadora(this.objeto.contrato.assinaturaIntermediadora),this.setPodeBaixarChange()),t.beneficiarioSelected&&(this.beneficiarioSelected=t.beneficiarioSelected.currentValue,this.setContratante(this.beneficiarioSelected?.nomeRepresentanteLegal,this.beneficiarioSelected?.codigoRepresentanteLegal,this.beneficiarioSelected?.assinaturaRepresentanteLegal),this.setPodeBaixarChange()),t.erro&&(this.erro=t.erro.currentValue),t.loading&&(this.loading=t.loading.currentValue),t.podeBaixarPDF&&(this.podeBaixarPDF=t.podeBaixarPDF.currentValue),t.readonly&&(this.readonly=t.readonly.currentValue),t.empresa&&(this.empresa=t.empresa.currentValue),t.isEditPage&&(this.isEditPage=t.isEditPage.currentValue),t.form&&(this.form=t.form.currentValue)}alterarDados_Contratante(){this.assinatura_Contratante.alterarDados=!this.assinatura_Contratante.alterarDados,this.assinatura_Contratante.alterarDados||(this.setContratante(this.beneficiarioSelected?.nomeRepresentanteLegal,this.beneficiarioSelected?.codigoRepresentanteLegal,this.beneficiarioSelected?.assinaturaRepresentanteLegal),this.assinatura_Contratante.isUploaded=!1,delete this.assinatura_Contratante.file)}alterarDados_Intermediadora(){this.assinatura_Intermediadora.alterarDados=!this.assinatura_Intermediadora.alterarDados,this.assinatura_Intermediadora.alterarDados||(this.setIntermediadora(this.objeto.contrato.assinaturaIntermediadora),this.assinatura_Intermediadora.isUploaded=!1,delete this.assinatura_Intermediadora.file)}readonly_Contratante(){var t=!1;return this.objeto.contrato.nomeRepresentanteLegal&&this.objeto.contrato.codigoRepresentanteLegal&&this.objeto.contrato.assinaturaRepresentanteLegal&&(t=!0),t&&!this.assinatura_Contratante.alterarDados||!this.assinatura_Contratante.alterarDados}assinar_Contratante(){var t=this;return(0,g.Z)(function*(){t.objeto.contrato.assinaturaRepresentanteLegal?t.objeto.invoice.beneficiario_Id?(t.loadingChange.emit(!0),yield(0,c.n)(t.contratoService.assinarRepresentanteLegal(t.objeto.contrato.id)).then(i=>{if(i.sucesso){t.objeto.contrato=i.objeto;var o=i.objeto;t.assinatura_Contratante.alterarDados=!1,t.setContratante(o.nomeRepresentanteLegal,o.codigoRepresentanteLegal,o.assinaturaRepresentanteLegal),t.setPodeBaixarChange()}else t.erroChange.emit(i.mensagem)}).catch(i=>{t.erroChange.emit((0,b.b)(i))}),t.loadingChange.emit(!1)):t.toastr.error("Selecione um benefici\xe1rio para assinar."):t.toastr.error("Inclua uma assinatura v\xe1lida para assinar.")})()}assinar_Intermediadora(){var t=this;return(0,g.Z)(function*(){t.loadingChange.emit(!0),yield(0,c.n)(t.contratoService.assinarMAC(t.objeto.contrato.id)).then(i=>{if(i.sucesso){var o=i.objeto;t.objeto.contrato=o,t.assinatura_Intermediadora.alterarDados=!1,t.setIntermediadora(o.assinaturaIntermediadora),t.setPodeBaixarChange()}else t.erroChange.emit(i.mensagem)}).catch(i=>{t.erroChange.emit((0,b.b)(i))}),t.loadingChange.emit(!1)})()}certificadoAssinatura(){var t=this;return(0,g.Z)(function*(){t.loadingChange.emit(!0),yield(0,c.n)(t.contratoService.certificadoAssinatura(t.objeto.contrato.id)).then(i=>{i.sucesso?(t.certificadoAssinaturaIncluido=!0,t.objeto.contrato=i.objeto,t.setPodeBaixarChange()):t.erroChange.emit(i.mensagem)}).catch(i=>{t.erroChange.emit((0,b.b)(i))}),t.loadingChange.emit(!1)})()}contratoBicolunadoDownload(){var t=this;return(0,g.Z)(function*(){if(0!=t.objeto.contrato.id){t.loadingContratoBicolunadoFile=!0,t.loadingService.message.next("Carregando Contrato Bicolunado.");try{yield(0,c.n)(t.contratoService.contratoBicolunado(t.objeto.contrato.id))}catch(i){t.erroChange.emit((0,b.b)(i)),t.loadingContratoBicolunadoFile=!1,t.loadingService.message.next("")}}else t.toastr.error("Voc\xea deve primeiro salvar os dados para fazer o download.")})()}setPodeBaixarChange(){this.certificadoAssinaturaIncluido=!!this.objeto.contrato.dataCertificadoAssinatura,this.podeBaixarPDF=this.assinatura_Contratante.assinado&&this.assinatura_Intermediadora.assinado&&this.certificadoAssinaturaIncluido&&0!=this.objeto.contrato.id,this.podeBaixarChanged.emit(this.podeBaixarPDF)}setContratante(t,i,o){this.objeto.contrato.nomeRepresentanteLegal=t,this.objeto.contrato.codigoRepresentanteLegal=i,this.objeto.contrato.assinaturaRepresentanteLegal=o,this.assinatura_Contratante.uri=o,this.assinatura_Contratante.assinado=!!this.objeto.contrato.dataAssinaturaRepresentanteLegal,this.assinatura_Contratante.podeAssinar=!!(this.objeto.contrato.nomeRepresentanteLegal&&this.objeto.contrato.codigoRepresentanteLegal&&this.objeto.contrato.assinaturaRepresentanteLegal&&!this.assinatura_Contratante.assinado&&this.isEditPage)}setIntermediadora(t){this.objeto.contrato.assinaturaIntermediadora=t,this.assinatura_Intermediadora.uri=t,this.assinatura_Intermediadora.assinado=!!this.objeto.contrato.dataAssinaturaIntermediadora,this.assinatura_Intermediadora.podeAssinar=!(!t||this.assinatura_Intermediadora.assinado||!this.isEditPage)}salvarDados_Contratante(t,i,o){var n=this;return(0,g.Z)(function*(){n.loading=!0,n.setContratante(t,i,o),n.assinatura_Contratante.podeAssinar&&(yield(0,c.n)(n.invoiceService.edit(n.objeto)).then(r=>{n.objeto=r.objeto,n.loading=!1,n.assinatura_Contratante.alterarDados=!1,n.setContratante(t,i,o)}).catch(r=>{n.erro=(0,b.b)(r),n.loading=!1}))})()}salvarDados_Intermediadora(){var t=this;return(0,g.Z)(function*(){t.loading=!0,t.setIntermediadora(t.assinatura_Intermediadora.uri),t.assinatura_Intermediadora.podeAssinar&&(yield(0,c.n)(t.invoiceService.edit(t.objeto)).then(i=>{t.objeto=i.objeto,t.loading=!1,t.assinatura_Intermediadora.alterarDados=!1,t.setIntermediadora(t.assinatura_Intermediadora.uri)}).catch(i=>{t.erro=(0,b.b)(i),t.loading=!1}))})()}proximo(){this.objetoChanged.emit(this.objeto),this.tabChanged.emit(3)}anterior(){this.objetoChanged.emit(this.objeto),this.tabChanged.emit(1)}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(G.d),e.Y36(F._W),e.Y36(E.b),e.Y36(M),e.Y36(S.P))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-form-contrato-bicolunado"]],inputs:{objeto:"objeto",beneficiarioSelected:"beneficiarioSelected",erro:"erro",loading:"loading",podeBaixarPDF:"podeBaixarPDF",readonly:"readonly",empresa:"empresa",isEditPage:"isEditPage",form:"form"},outputs:{erroChange:"erroChange",loadingChange:"loadingChange",podeBaixarChanged:"podeBaixarChanged",tabChanged:"tabChanged",objetoChanged:"objetoChanged",send:"send"},features:[e._Bn([],[{provide:u.gN,useExisting:u.F}]),e.TTD],decls:84,vars:25,consts:[[1,"row"],[1,"d-flex","align-items-center","flex-wrap"],["type","button",1,"btn","btn-dark",3,"disabled","click"],["class","text-danger ms-2",4,"ngIf"],[1,"mt-3"],[1,"col-sm-12","card","py-3","px-4"],[1,"row","mb-2"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","w-100"],[1,"my-2"],[4,"ngIf"],["class","d-flex align-items-center justify-content-between",4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-5","col-12"],["for","nomeRepresentanteLegal"],[1,"text-danger"],["type","text","name","nomeRepresentanteLegal","id","nomeRepresentanteLegal","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["nomeRepresentanteLegal","ngModel"],[1,"form-group","col-xl-3","col-lg-3","col-md-3","col-sm-5","col-12"],["for","codigoRepresentanteLegal"],["type","text","name","codigoRepresentanteLegal","id","codigoRepresentanteLegal","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["codigoRepresentanteLegal","ngModel"],[1,"form-group","col-xl-5","col-lg-5","col-md-5","col-sm-5","col-12"],["for","_assinatura_Contratante"],["class","d-flex align-items-center flex-wrap",4,"ngIf"],[1,"col-sm-12","mb-2","card","py-3","px-4"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap"],[1,"my-2","me-3"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],["for","nomeEmpresa"],["type","text","name","nomeEmpresa","id","nomeEmpresa","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-3","col-lg-3","col-md-3","col-sm-3","col-12"],["for","codigoEmpresa"],["type","text","name","codigoEmpresa","id","codigoEmpresa","readonly","",1,"form-control",3,"value"],["for","_assinaturaIntermediraria"],[1,"d-flex","align-items-center","justify-content-between"],["type","button","class","btn btn-dark",3,"disabled","click",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","w-100","mx-1","my-4","px-5","border-1","opacity-75"],[1,"row","mt-2"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-between"],["type","button",1,"btn","btn-step","btn-step-next",3,"click"],[3,"icon"],[1,"btn-step-text","ms-2","mb-1"],["type","button","class","btn btn-step btn-step-next ms-auto ",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary me-0 ",3,"disabled","click",4,"ngIf"],[1,"text-danger","ms-2"],["class","text-danger ms-auto me-2",4,"ngIf"],["type","button",1,"btn","btn-dark","me-2",3,"disabled","click"],["type","button","class","btn btn-dark me-2",3,"disabled","click",4,"ngIf"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"me-1"],[1,"text-danger","ms-auto","me-2"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"me-2"],[1,"btn","bg-success","text-white",2,"cursor","default"],["class","text-danger",4,"ngIf"],["for","_assinatura_Contratante","class","input-file-container btn btn-dark me-2 mb-2",4,"ngIf"],["class","my-1","title","Nenhuma assinatura selecionada",4,"ngIf"],["class","my-1",3,"title",4,"ngIf"],["for","_assinatura_Contratante",1,"input-file-container","btn","btn-dark","me-2","mb-2"],["type","file","name","_assinatura_Contratante","id","_assinatura_Contratante","required","","accept","image/png",3,"disabled","input"],["_assinatura_Contratante",""],["title","Nenhuma assinatura selecionada",1,"my-1"],[1,"my-1",3,"title"],[1,"input-file-image",3,"src","alt"],["for","_assinaturaIntermediraria","class","input-file-container btn btn-dark me-2 mb-2",4,"ngIf"],["for","_assinaturaIntermediraria",1,"input-file-container","btn","btn-dark","me-2","mb-2"],["type","file","name","_assinaturaIntermediraria","id","_assinaturaIntermediraria","required","","accept","image/png",3,"disabled","input"],["_assinaturaIntermediraria",""],[1,"w-100"],[1,"border","border-dark"],[1,"border-bottom","border-dark","text-center"],[1,"py-3","px-3"],[1,"border-bottom","border-dark"],[1,"py-3","px-3","certificado-icon-container"],[1,"mb-2"],["src","./assets/img/check-icon.png",1,"certificado-icon"],["type","button",1,"btn","btn-step","btn-step-next","ms-auto",3,"disabled","click"],[1,"btn-step-text","me-2","mb-1"],["type","button",1,"btn","btn-primary","me-0",3,"disabled","click"]],template:function(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.contratoBicolunadoDownload()}),e._uU(3,"Baixar PDF"),e.qZA(),e.YNc(4,he,2,0,"p",3),e.qZA()(),e.TgZ(5,"div",0)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h6",8),e._uU(11,"Representante Legal / Contratante"),e.qZA(),e.YNc(12,Te,11,8,"div",9),e.YNc(13,Ae,8,5,"div",10),e.qZA()(),e.TgZ(14,"div",0)(15,"div",11)(16,"label",12),e._uU(17,"Nome: "),e.TgZ(18,"span",13),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"input",14,15),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.nomeRepresentanteLegal=l})("change",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(o.objeto.contrato.nomeRepresentanteLegal=l.value.trim().toUpperCase())}),e.qZA(),e.YNc(22,Ie,2,1,"div",9),e.qZA(),e.TgZ(23,"div",16)(24,"label",17),e._uU(25,"C\xf3digo: "),e.TgZ(26,"span",13),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"input",18,19),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.codigoRepresentanteLegal=l})("change",function(){e.CHM(n);const l=e.MAs(29);return e.KtG(o.objeto.contrato.codigoRepresentanteLegal=l.value.trim().toUpperCase())}),e.qZA(),e.YNc(30,Me,2,1,"div",9),e.qZA(),e.TgZ(31,"div",20)(32,"label",21),e._uU(33,"Assinatura: "),e.TgZ(34,"span",13),e._uU(35,"*"),e.qZA()(),e.YNc(36,Ne,4,3,"div",22),e.YNc(37,Be,2,2,"div",9),e.qZA()()()()(),e.TgZ(38,"div",0)(39,"div",4)(40,"div",23)(41,"div",6)(42,"div",24)(43,"h6",25),e._uU(44,"Assinatura Intermediadora"),e.qZA(),e.YNc(45,Ye,11,8,"div",9),e.YNc(46,Oe,8,5,"div",10),e.qZA()(),e.TgZ(47,"div",0)(48,"div",26)(49,"label",27),e._uU(50,"Nome:"),e.qZA(),e._UZ(51,"input",28),e.qZA(),e.TgZ(52,"div",29)(53,"label",30),e._uU(54,"CNPJ/MF:"),e.qZA(),e._UZ(55,"input",31),e.qZA(),e.TgZ(56,"div",20)(57,"label",32),e._uU(58,"Assinatura: "),e.TgZ(59,"span",13),e._uU(60,"*"),e.qZA()(),e.YNc(61,ze,4,3,"div",22),e.YNc(62,$e,2,2,"div",9),e.qZA()()()()(),e.TgZ(63,"div",0)(64,"div",4)(65,"div",23)(66,"div",6)(67,"div",24)(68,"h6",8),e._uU(69,"Certificado de Assinatura"),e.qZA(),e.TgZ(70,"div",33),e.YNc(71,Xe,5,3,"button",34),e.YNc(72,et,8,5,"div",10),e.qZA()()(),e.YNc(73,tt,70,32,"div",35),e.qZA()()(),e._UZ(74,"hr",36),e.TgZ(75,"div",37)(76,"div",38)(77,"button",39),e.NdJ("click",function(){return o.anterior()}),e._UZ(78,"fa-icon",40),e.TgZ(79,"span",41),e._uU(80,"Anterior"),e.qZA()(),e.YNc(81,at,2,1,"div",9),e.YNc(82,nt,4,2,"button",42),e.YNc(83,rt,4,2,"button",43),e.qZA()()}if(2&i){const n=e.MAs(21),r=e.MAs(29);e.xp6(2),e.Q6J("disabled",!o.podeBaixarPDF),e.xp6(2),e.Q6J("ngIf",!o.podeBaixarPDF),e.xp6(8),e.Q6J("ngIf",!o.assinatura_Contratante.assinado),e.xp6(1),e.Q6J("ngIf",o.assinatura_Contratante.assinado),e.xp6(7),e.Q6J("ngModel",o.objeto.contrato.nomeRepresentanteLegal)("readonly",o.readonly_Contratante()),e.xp6(2),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.codigoRepresentanteLegal)("readonly",o.readonly_Contratante()),e.xp6(2),e.Q6J("ngIf",r.touched&&r.errors),e.xp6(6),e.Q6J("ngIf",!o.assinatura_Contratante.assinado),e.xp6(1),e.Q6J("ngIf",o.assinatura_Contratante.uri),e.xp6(8),e.Q6J("ngIf",!o.assinatura_Intermediadora.assinado),e.xp6(1),e.Q6J("ngIf",o.assinatura_Intermediadora.assinado),e.xp6(5),e.Q6J("value",null==o.empresaSelected?null:o.empresaSelected.nome),e.xp6(4),e.Q6J("value",null==o.empresaSelected?null:o.empresaSelected.codigoRegistro),e.xp6(6),e.Q6J("ngIf",!o.assinatura_Intermediadora.assinado),e.xp6(1),e.Q6J("ngIf",o.assinatura_Intermediadora.uri),e.xp6(9),e.Q6J("ngIf",!o.certificadoAssinaturaIncluido),e.xp6(1),e.Q6J("ngIf",o.certificadoAssinaturaIncluido),e.xp6(1),e.Q6J("ngIf",o.objeto.contrato.dataCertificadoAssinatura),e.xp6(5),e.Q6J("icon",o.faArrowLeft),e.xp6(3),e.Q6J("ngIf",o.form.invalid),e.xp6(1),e.Q6J("ngIf",o.isEditPage),e.xp6(1),e.Q6J("ngIf",!o.isEditPage)}},dependencies:[x.O5,u.Fj,u.JJ,u.Q7,u.c5,u.On,y.BN,x.uU],styles:[".input-file-container[_ngcontent-%COMP%]{margin-bottom:0;min-width:170px;width:auto}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.input-file-image[_ngcontent-%COMP%]{width:auto;max-width:100%;max-height:60px;margin:0;padding:0;box-sizing:content-box}.input-file-container[_ngcontent-%COMP%] ~ label[_ngcontent-%COMP%], .input-file-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:unset}.certificado-icon-container[_ngcontent-%COMP%]{position:relative}.certificado-icon[_ngcontent-%COMP%]{width:150px;height:auto;max-width:7vw;position:absolute;top:50%;right:calc(20px + 5vw);transform:translateY(-50%);opacity:.8}"]})}return a})();class K{constructor(){this.isUploaded=!1,this.assinado=!1,this.podeAssinar=!1,this.erro="",this.alterarDados=!1}fileChange(s,t){var i=s.target.files[0];if(this.file=i,i){var o=new FileReader,n=this;o.onload=function(l){var p=l.target?.result;n.isUploaded=!0,n.uri=p,"_assinatura_Contratante"==s.target.id?(t.objeto.contrato.assinaturaRepresentanteLegal=p,t.setContratante(t.objeto.contrato.nomeRepresentanteLegal,t.objeto.contrato.codigoRepresentanteLegal,p)):(t.objeto.contrato.assinaturaIntermediadora=p,t.setIntermediadora(p))},o.onerror=function(l){n.erro="N\xe3o foi poss\xedvel realizar upload"},o.readAsDataURL(i)}else this.erro="Selecione uma imagem para salvar."}}var lt=d(1208),dt=d(3337),z=d(2916),$=d(6044),W=d(2352),X=d(3735),ct=d(8454);function pt(a,s){1&a&&(e.TgZ(0,"span",88),e._uU(1,"Voc\xea deve primeiro salvar os dados para baixar o PDF"),e.qZA())}function ut(a,s){if(1&a&&(e.TgZ(0,"div",89)(1,"span"),e._uU(2),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.hij("",t.nome," ")}}function mt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function _t(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,mt,2,0,"p",90),e.qZA()),2&a){e.oxw();const t=e.MAs(27);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function gt(a,s){if(1&a&&(e.TgZ(0,"div",89)(1,"span"),e._uU(2),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.hij("",t.nome," ")}}function ft(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function ht(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,ft,2,0,"p",90),e.qZA()),2&a){e.oxw();const t=e.MAs(36);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function vt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Preencha os campos obrigat\xf3rios (*) de Contrato corretamente para continuar."),e.qZA())}function bt(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,vt,2,0,"p",90),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.invalid&&!t.erro)}}const Ct=function(){return["nome"]};let xt=(()=>{class a{constructor(t,i,o,n,r){this.contratoTipoService=t,this.contratoEventoService=i,this.toastr=o,this.contratoService=n,this.loadingService=r,this.faArrowLeft=f.acZ,this.faArrowRight=f.eFW,this.tipos=[],this.loadingTipo=!0,this.eventos=[],this.loadingEvento=!0,this.subscription=[],this.objeto=new U,this.erro="",this.loading=!1,this.isEditPage=!1,this.podeBaixarPDF=!1,this.readonly=!1,this.erroChange=new e.vpe,this.loadingChange=new e.vpe,this.podeBaixarChanged=new e.vpe,this.tabChanged=new e.vpe,this.objetoChanged=new e.vpe,(0,c.n)(this.contratoTipoService.getList()).then(l=>this.tipos=l).finally(()=>this.loadingTipo=!1),(0,c.n)(this.contratoEventoService.getList()).then(l=>this.eventos=l).finally(()=>this.loadingEvento=!1)}ngOnChanges(t){t.objeto&&(this.objeto=t.objeto.currentValue),t.erro&&(this.erro=t.erro.currentValue),t.loading&&(this.loading=t.loading.currentValue),t.isEditPage&&(this.isEditPage=t.isEditPage.currentValue),t.form&&(this.form=t.form.currentValue),t.podeBaixarPDF&&(this.podeBaixarPDF=t.podeBaixarPDF.currentValue),t.readonly&&(this.readonly=t.readonly.currentValue)}calcula(){this.objetoChanged.emit(this.objeto)}contratoDownload(){var t=this;return(0,g.Z)(function*(){if(0!=t.objeto.invoice.id){t.loading=!0,t.loadingService.message.next("Carregando Contrato.");try{yield(0,c.n)(t.contratoService.contrato(t.objeto.contrato.id))}catch(i){t.erro=(0,b.b)(i),t.loading=!1,t.loadingService.message.next("")}}else t.toastr.error("Voc\xea deve primeiro salvar os dados para fazer o download.")})()}proximo(){this.objetoChanged.emit(this.objeto),this.tabChanged.emit(2)}anterior(){this.objetoChanged.emit(this.objeto),this.tabChanged.emit(0)}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(lt.M),e.Y36(dt.n),e.Y36(F._W),e.Y36(G.d),e.Y36(E.b))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-form-contrato"]],inputs:{objeto:"objeto",erro:"erro",loading:"loading",isEditPage:"isEditPage",form:"form",podeBaixarPDF:"podeBaixarPDF",readonly:"readonly"},outputs:{erroChange:"erroChange",loadingChange:"loadingChange",podeBaixarChanged:"podeBaixarChanged",tabChanged:"tabChanged",objetoChanged:"objetoChanged"},features:[e.TTD],decls:160,vars:96,consts:[[1,"mb-3","row"],[1,"d-flex","align-items-center","flex-wrap"],["type","button",1,"btn","btn-dark","mb-2",3,"disabled","click"],["class","text-danger ms-0 ms-sm-2",4,"ngIf"],[1,"row"],["title","Data do Contrato",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-12"],["for","data"],[1,"text-danger"],["type","datetime-local",3,"valueInput","inputId","showErrorMessage","required","readonly","valueChanges"],["title","N\xba do Contrato de C\xe2mbio",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-12"],["for","numContrato"],["type","text","name","numContrato","id","numContrato","mask","0*",1,"form-control",3,"ngModel","readonly","ngModelChange"],["numContrato","ngModel"],["title","Tipos",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-12"],["for","tipo_Id"],["name","tipo_Id","inputId","tipo_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um tipo","appendTo","body",3,"options","ngModel","styleClass","filter","required","dropdownIcon","showClear","readonly","ngModelChange"],["tipo_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],["title","Eventos",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-12"],["for","evento_Id"],["name","evento_Id","inputId","evento_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um evento","appendTo","body",3,"options","ngModel","styleClass","showClear","filter","filterFields","required","dropdownIcon","readonly","ngModelChange"],["evento_Id","ngModel"],["title","Taxa Cambial",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-12","col-12"],["for","taxa"],["suffix"," USD",3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","min","max","leadZero","readonly","valueChanges"],["title","Valor Moeda Nacional",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-12","col-12"],["for","valorNacional"],["type","text","name","valorNacional","id","valorNacional","prefix","R$ ","thousandSeparator",".","decimalMarker",",",1,"form-control",3,"ngModel","readOnly","mask","min","max","leadZero","ngModelChange","focus","blur","mouseenter","mouseleave"],["valorNacional","ngModel","valorNacionalEl",""],["title","Percentual de Adiantamento",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-12","col-12"],["for","percentualAdiantamento"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","suffix","min","max","leadZero","readonly","valueChanges"],["title","RDE",1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-12","col-12"],["for","rde"],["type","text","name","rde","id","rde","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["rde","ngModel"],["title","Valor Efetivo Total (VET)",1,"form-group","col-xl-3","col-lg-3","col-md-3","col-sm-12","col-12"],["for","vet"],["type","text","name","vet","id","vet","thousandSeparator",".","decimalMarker",",",1,"form-control",3,"ngModel","readOnly","mask","leadZero","ngModelChange","focus","blur","mouseenter","mouseleave"],["vet","ngModel","vetEl",""],["title","Descri\xe7\xe3o da Forma de Entrega da moeda estrangeira",1,"form-group","col-xl-5","col-lg-5","col-md-5","col-sm-12","col-12"],["for","descricaoFormaEntrega"],["type","text","name","descricaoFormaEntrega","id","descricaoFormaEntrega","required","","pattern","\\S(.*\\S)?","readonly","",1,"form-control",3,"ngModel","ngModelChange","change"],["descricaoFormaEntrega","ngModel"],["title","Liquida\xe7\xe3o At\xe9",1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-12","col-12"],["for","dataLiquidacao"],["type","date",3,"valueInput","inputId","showErrorMessage","required","readonly","valueChanges"],["title","C\xf3digo da Natureza",1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-12","col-12"],["for","codigoNatureza"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","readonly","autoReplaceValue","leadZero","valueChanges"],["title","Descri\xe7\xe3o da Natureza do Fato",1,"form-group","col-xl-8","col-lg-8","col-md-8","col-sm-12","col-12"],["for","descricaoNaturezaFato"],["type","text","name","descricaoNaturezaFato","id","descricaoNaturezaFato","required","","pattern","\\S(.*\\S)?","readonly","",1,"form-control",3,"ngModel","ngModelChange","change"],["descricaoNaturezaFato","ngModel"],[1,"row","align-items-end"],["title","Pa\xeds do Pagador/Recebedor no Exterior",1,"form-group","col-xl-3","col-lg-3","col-md-3","col-sm-12","col-12"],["for","pais_Id"],["type","text","id","pais_Id","disabled","",1,"form-control",3,"value"],["title","Pagador/Recebedor no Exterior",1,"form-group","col-xl-5","col-lg-5","col-md-5","col-sm-12","col-12"],["for","pagRecExterior"],["type","text","id","pagRecExterior","disabled","",1,"form-control",3,"value"],["title","C\xf3digo da Rela\xe7\xe3o de V\xednculo entre cliente e o Pagador/Recebedor",1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-12","col-12"],["for","codigoVinculoPagRecExterior"],["type","text","name","codigoVinculoPagRecExterior","id","codigoVinculoPagRecExterior","required","",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["codigoVinculoPagRecExterior","ngModel"],["title","Especifica\xe7\xf5es",1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","especificacoes"],["name","especificacoes","id","especificacoes","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["especificacoes","ngModel"],["title","Cl\xe1usulas",1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","clausulas"],["name","clausulas","id","clausulas","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["clausulas","ngModel"],["title","Instru\xe7\xf5es de Recebimento/Pagamento",1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","instrucoesRecebimentoPagamento"],["name","instrucoesRecebimentoPagamento","id","instrucoesRecebimentoPagamento","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","readonly","ngModelChange","change"],["instrucoesRecebimentoPagamento","ngModel"],[1,"row","w-100","mx-1","my-4","px-5","border-1","opacity-75"],[1,"row","mt-2"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-between"],["type","button",1,"btn","btn-step","btn-step-next",3,"click"],[3,"icon"],[1,"btn-step-text","ms-2","mb-1"],["type","button",1,"btn","btn-step","btn-step-next","ms-auto",3,"disabled","click"],[1,"btn-step-text","me-2","mb-1"],["vetObs",""],["valorNacionalObs",""],[1,"text-danger","ms-0","ms-sm-2"],[1,"d-flex","align-items-center"],["class","text-danger",4,"ngIf"]],template:function(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.contratoDownload()}),e._uU(3,"Baixar PDF"),e.qZA(),e.YNc(4,pt,2,0,"span",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"Data do contrato: "),e.TgZ(9,"span",7),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"app-input-date",8),e.NdJ("valueChanges",function(l){return o.objeto.contrato.data=l}),e.qZA()(),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"N\xba do Contrato de C\xe2mbio: "),e.TgZ(15,"span",7),e._uU(16,"*"),e.qZA(),e.TgZ(17,"small"),e._uU(18,"(autom\xe1tico)"),e.qZA()(),e.TgZ(19,"input",11,12),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.numContrato=l}),e.qZA()(),e.TgZ(21,"div",13)(22,"label",14),e._uU(23,"Tipo do Contrato de C\xe2mbio: "),e.TgZ(24,"span",7),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"p-dropdown",15,16),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.tipo_Id=l}),e.YNc(28,ut,3,1,"ng-template",17),e.qZA(),e.YNc(29,_t,2,1,"div",18),e.qZA(),e.TgZ(30,"div",19)(31,"label",20),e._uU(32,"Eventos: "),e.TgZ(33,"span",7),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"p-dropdown",21,22),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.evento_Id=l}),e.YNc(37,gt,3,1,"ng-template",17),e.qZA(),e.YNc(38,ht,2,1,"div",18),e.qZA()(),e.TgZ(39,"div",4)(40,"div",23)(41,"label",24),e._uU(42,"Taxa Cambial: "),e.TgZ(43,"small"),e._uU(44,"(USD)"),e.qZA(),e._uU(45,"\xa0"),e.TgZ(46,"span",7),e._uU(47,"*"),e.qZA()(),e.TgZ(48,"app-input-number",25),e.NdJ("valueChanges",function(l){return o.objeto.contrato.taxa=l,o.calcula()}),e.qZA()(),e.TgZ(49,"div",26)(50,"label",27),e._uU(51,"Valor Moeda Nacional: "),e.TgZ(52,"small"),e._uU(53,"(R$)"),e.qZA(),e._uU(54,"\xa0"),e.TgZ(55,"span",7),e._uU(56,"*"),e.qZA()(),e.TgZ(57,"input",28,29),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.valorNacional=l})("focus",function(l){e.CHM(n);const p=e.MAs(59),_=e.MAs(156);return e.KtG(_.show(l,p))})("blur",function(){e.CHM(n);const l=e.MAs(156);return e.KtG(l.hide())})("mouseenter",function(l){e.CHM(n);const p=e.MAs(59),_=e.MAs(156);return e.KtG(_.show(l,p))})("mouseleave",function(){e.CHM(n);const l=e.MAs(156);return e.KtG(l.hide())}),e.qZA()(),e.TgZ(60,"div",30)(61,"label",31),e._uU(62,"Percentual de Adiantamento: "),e.TgZ(63,"small"),e._uU(64,"(%)"),e.qZA(),e._uU(65,"\xa0"),e.qZA(),e.TgZ(66,"app-input-number",32),e.NdJ("valueChanges",function(l){return o.objeto.contrato.percentualAdiantamento=l}),e.qZA()(),e.TgZ(67,"div",33)(68,"label",34),e._uU(69,"RDE:"),e.qZA(),e.TgZ(70,"input",35,36),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.rde=l})("change",function(){e.CHM(n);const l=e.MAs(71);return e.KtG(o.objeto.contrato.rde=l.value.trim().toUpperCase())}),e.qZA()()(),e.TgZ(72,"div",4)(73,"div",37)(74,"label",38),e._uU(75,"Valor Efetivo Total (VET):"),e.qZA(),e.TgZ(76,"input",39,40),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.vet=l})("focus",function(l){e.CHM(n);const p=e.MAs(78),_=e.MAs(146);return e.KtG(_.show(l,p))})("blur",function(){e.CHM(n);const l=e.MAs(146);return e.KtG(l.hide())})("mouseenter",function(l){e.CHM(n);const p=e.MAs(78),_=e.MAs(146);return e.KtG(_.show(l,p))})("mouseleave",function(){e.CHM(n);const l=e.MAs(146);return e.KtG(l.hide())}),e.qZA()(),e.TgZ(79,"div",41)(80,"label",42),e._uU(81,"Descri\xe7\xe3o da Forma de Entrega da moeda estrangeira:"),e.qZA(),e.TgZ(82,"input",43,44),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.descricaoFormaEntrega=l})("change",function(){e.CHM(n);const l=e.MAs(83);return e.KtG(o.objeto.contrato.descricaoFormaEntrega=l.value.trim().toUpperCase())}),e.qZA()(),e.TgZ(84,"div",45)(85,"label",46),e._uU(86,"Liquida\xe7\xe3o At\xe9: "),e.TgZ(87,"span",7),e._uU(88,"*"),e.qZA()(),e.TgZ(89,"app-input-date",47),e.NdJ("valueChanges",function(l){return o.objeto.contrato.dataLiquidacao=l}),e.qZA()()(),e.TgZ(90,"div",4)(91,"div",48)(92,"label",49),e._uU(93,"C\xf3digo da Natureza:"),e.qZA(),e.TgZ(94,"app-input-number",50),e.NdJ("valueChanges",function(l){return o.objeto.contrato.codigoNatureza=l}),e.qZA()(),e.TgZ(95,"div",51)(96,"label",52),e._uU(97,"Descri\xe7\xe3o da Natureza do Fato:"),e.qZA(),e.TgZ(98,"input",53,54),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.descricaoNaturezaFato=l})("change",function(){e.CHM(n);const l=e.MAs(99);return e.KtG(o.objeto.contrato.descricaoNaturezaFato=l.value.trim().toUpperCase())}),e.qZA()()(),e.TgZ(100,"div",55)(101,"div",56)(102,"label",57),e._uU(103,"Pa\xeds do Pagador/Recebedor no Exterior:"),e.qZA(),e._UZ(104,"input",58),e.qZA(),e.TgZ(105,"div",59)(106,"label",60),e._uU(107,"Pagador/Recebedor no Exterior:"),e.qZA(),e._UZ(108,"input",61),e.qZA(),e.TgZ(109,"div",62)(110,"label",63),e._uU(111,"C\xf3digo da Rela\xe7\xe3o de V\xednculo entre cliente e o Pagador/Recebedor:"),e.qZA(),e.TgZ(112,"input",64,65),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.codigoVinculoPagRecExterior=l})("change",function(){e.CHM(n);const l=e.MAs(113);return e.KtG(o.objeto.contrato.codigoVinculoPagRecExterior=l.value.trim().toUpperCase())}),e.qZA()()(),e.TgZ(114,"div",4)(115,"div",66)(116,"label",67),e._uU(117,"Especifica\xe7\xf5es: "),e.qZA(),e.TgZ(118,"textarea",68,69),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.especificacoes=l})("change",function(){e.CHM(n);const l=e.MAs(119);return e.KtG(o.objeto.contrato.especificacoes=l.value.trim().toUpperCase())}),e._uU(120,"          "),e.qZA()(),e.TgZ(121,"div",70)(122,"label",71),e._uU(123,"Cl\xe1usulas: "),e.qZA(),e.TgZ(124,"textarea",72,73),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.clausulas=l})("change",function(){e.CHM(n);const l=e.MAs(125);return e.KtG(o.objeto.contrato.clausulas=l.value.trim().toUpperCase())}),e._uU(126,"          "),e.qZA()(),e.TgZ(127,"div",74)(128,"label",75),e._uU(129,"Instru\xe7\xf5es de Recebimento/Pagamento: "),e.qZA(),e.TgZ(130,"textarea",76,77),e.NdJ("ngModelChange",function(l){return o.objeto.contrato.instrucoesRecebimentoPagamento=l})("change",function(){e.CHM(n);const l=e.MAs(131);return e.KtG(o.objeto.contrato.instrucoesRecebimentoPagamento=l.value.trim().toUpperCase())}),e._uU(132,"          "),e.qZA()()(),e._UZ(133,"hr",78),e.TgZ(134,"div",79)(135,"div",80)(136,"button",81),e.NdJ("click",function(){return o.anterior()}),e._UZ(137,"fa-icon",82),e.TgZ(138,"span",83),e._uU(139,"Anterior"),e.qZA()(),e.YNc(140,bt,2,1,"div",18),e.TgZ(141,"button",84),e.NdJ("click",function(){return o.proximo()}),e.TgZ(142,"span",85),e._uU(143,"Pr\xf3ximo"),e.qZA(),e._UZ(144,"fa-icon",82),e.qZA()()(),e.TgZ(145,"p-overlayPanel",null,86)(147,"p",7),e._uU(148,"C\xe1lculo"),e.qZA(),e.TgZ(149,"p"),e._uU(150,"IOF = 0,38"),e.qZA(),e.TgZ(151,"p"),e._uU(152,"R$ IOF = Valor Moeda Nacional * 0,38%"),e.qZA(),e.TgZ(153,"p"),e._uU(154,"VET = (Valor Moeda Nacional + R$ IOF) / Valor Invoice"),e.qZA()(),e.TgZ(155,"p-overlayPanel",null,87)(157,"p",7),e._uU(158,"C\xe1lculo"),e.qZA(),e._uU(159," Valor Moeda Nacional = Valor Invoice * Taxa Cambial\n"),e.qZA()}if(2&i){const n=e.MAs(27),r=e.MAs(36);let l,p;e.xp6(2),e.Q6J("disabled",!o.podeBaixarPDF),e.xp6(2),e.Q6J("ngIf",!o.podeBaixarPDF),e.xp6(7),e.Q6J("valueInput",o.objeto.contrato.data)("inputId","data")("showErrorMessage",!0)("required",!0)("readonly",o.readonly),e.xp6(8),e.Q6J("ngModel",o.objeto.contrato.numContrato)("readonly",!0),e.xp6(7),e.Q6J("options",o.tipos)("ngModel",o.objeto.contrato.tipo_Id)("styleClass","form-control "+(o.loadingTipo?"form-control-loading":"")+(o.readonly?" disabled":""))("filter",!0)("required",!0)("dropdownIcon",o.readonly?"d-none":"pi pi-angle-down")("showClear",!o.readonly)("readonly",o.readonly),e.xp6(3),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(6),e.Q6J("options",o.eventos)("ngModel",o.objeto.contrato.evento_Id)("styleClass","form-control "+(o.loadingEvento?"form-control-loading":"")+(o.readonly?" disabled":""))("showClear",!0)("filter",!0)("filterFields",e.DdM(95,Ct))("required",!0)("showClear",!0)("dropdownIcon",o.readonly?"d-none":"pi pi-angle-down")("showClear",!o.readonly)("readonly",o.readonly),e.xp6(3),e.Q6J("ngIf",r.touched&&r.errors),e.xp6(10),e.Q6J("valueInput",o.objeto.contrato.taxa)("inputId","taxa")("mask","separator.4")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1)("min",.1)("max",999999999)("leadZero",!0)("readonly",o.readonly),e.xp6(9),e.Q6J("ngModel",o.objeto.contrato.valorNacional)("readOnly",!0)("mask","separator.2")("min",.1)("max",999999999)("leadZero",!0),e.xp6(9),e.Q6J("valueInput",o.objeto.contrato.percentualAdiantamento)("inputId","percentualAdiantamento")("mask","separator.2")("showErrorMessage",!1)("allowNegativeNumbers",!1)("required",!1)("autoReplaceValue",!1)("suffix","%")("min",0)("max",100)("leadZero",!0)("readonly",o.readonly),e.xp6(4),e.Q6J("ngModel",o.objeto.contrato.rde)("readonly",o.readonly),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.vet)("readOnly",!0)("mask","separator.4")("leadZero",!0),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.descricaoFormaEntrega),e.xp6(7),e.Q6J("valueInput",o.objeto.contrato.dataLiquidacao)("inputId","dataLiquidacao")("showErrorMessage",!0)("required",!0)("readonly",o.readonly),e.xp6(5),e.Q6J("valueInput",o.objeto.contrato.codigoNatureza)("inputId","codigoNatureza")("mask","00000-00-A-00-00")("showErrorMessage",!1)("allowNegativeNumbers",!1)("required",!1)("readonly",!0)("autoReplaceValue",!1)("leadZero",!1),e.xp6(4),e.Q6J("ngModel",o.objeto.contrato.descricaoNaturezaFato),e.xp6(6),e.Q6J("value",null!==(l=o.objeto.contrato.paisPagRecExterior)&&void 0!==l?l:"N/A"),e.xp6(4),e.Q6J("value",null!==(p=o.objeto.contrato.pagRecExterior)&&void 0!==p?p:"N/A"),e.xp6(4),e.Q6J("ngModel",o.objeto.contrato.codigoVinculoPagRecExterior)("readonly",!0),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.especificacoes)("readonly",o.readonly),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.clausulas)("readonly",o.readonly),e.xp6(6),e.Q6J("ngModel",o.objeto.contrato.instrucoesRecebimentoPagamento)("readonly",o.readonly),e.xp6(7),e.Q6J("icon",o.faArrowLeft),e.xp6(3),e.Q6J("ngIf",o.form.invalid),e.xp6(1),e.Q6J("disabled",o.form.invalid),e.xp6(3),e.Q6J("icon",o.faArrowRight)}},dependencies:[x.O5,u.Fj,u.JJ,u.Q7,u.c5,u.On,y.BN,z.K,$.l,Z.jx,W.Lt,X.Z6,ct.T]})}return a})();var Zt=d(1433),Tt=d(3977),At=d(7397),yt=d(6793),It=d(4809);function Ft(a,s){1&a&&(e.TgZ(0,"span",62),e._uU(1,"Voc\xea deve primeiro salvar os dados para baixar o PDF"),e.qZA())}function Mt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"a",69),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.moedaExcluir(o.id))}),e._UZ(1,"fa-icon",61),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faTrash)}}function wt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",63)(1,"div",64)(2,"span",65),e._uU(3),e.qZA(),e.TgZ(4,"span",66),e._uU(5),e.qZA(),e.TgZ(6,"span",67),e._uU(7),e.qZA()(),e.TgZ(8,"div",68)(9,"a",69),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.moedaEditar(n))}),e._UZ(10,"fa-icon",61),e.qZA(),e.YNc(11,Mt,2,1,"a",70),e.qZA()()}if(2&a){const t=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("title",t.nome),e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.nome),e.xp6(2),e.Oqu(t.simbolo),e.xp6(3),e.Q6J("icon",i.faEdit),e.xp6(1),e.Q6J("ngIf",i.podeExcluirMoeda)}}const jt=function(){return["./moeda"]};function Ut(a,s){1&a&&(e.TgZ(0,"div",71),e._uU(1," N\xe3o encontrou? Clique para "),e.TgZ(2,"a",72),e._uU(3,"adicionar"),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,jt)))}function qt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Et(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,qt,2,0,"p",73),e.qZA()),2&a){e.oxw();const t=e.MAs(27);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Nt(a,s){if(1&a&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p")(4,"strong"),e._uU(5,"C\xf3digo de Registro:"),e.qZA(),e._uU(6),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.Oqu(t.nome),e.xp6(4),e.hij(" ",t.codigoRegistro,"")}}const Bt=function(){return["./instituicao-financeira"]};function Jt(a,s){1&a&&(e.TgZ(0,"div",71),e._uU(1," N\xe3o encontrou? Clique para "),e.TgZ(2,"a",72),e._uU(3,"adicionar"),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,Bt)))}function St(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Qt(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,St,2,0,"p",73),e.qZA()),2&a){e.oxw();const t=e.MAs(43);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Pt(a,s){if(1&a&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p")(4,"strong"),e._uU(5,"C\xf3digo de Registro:"),e.qZA(),e._uU(6),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.Oqu(t.nome),e.xp6(4),e.hij(" ",t.codigoRegistro,"")}}const Rt=function(){return["./beneficiario"]};function Dt(a,s){1&a&&(e.TgZ(0,"div",71),e._uU(1," N\xe3o encontrou? Clique para "),e.TgZ(2,"a",72),e._uU(3,"adicionar"),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,Rt)))}function Lt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Yt(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Lt,2,0,"p",73),e.qZA()),2&a){e.oxw();const t=e.MAs(53);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Ot(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Alterar conta"),e.qZA())}function kt(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Cancelar"),e.qZA())}function Ht(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",74)(1,"button",75),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.alterarContaChange())}),e.YNc(2,Ot,2,0,"span",18),e.YNc(3,kt,2,0,"span",18),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.alterarConta),e.xp6(1),e.Q6J("ngIf",t.alterarConta)}}function Vt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Gt(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Vt,2,0,"p",73),e.qZA()),2&a){e.oxw();const t=e.MAs(78);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Kt(a,s){1&a&&(e.TgZ(0,"p",7),e._uU(1,"Preencha os campos obrigat\xf3rios (*) de Invoice corretamente para continuar."),e.qZA())}function zt(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Kt,2,0,"p",73),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.invalid&&!t.erro)}}const $t=function(){return["nome","simbolo","codigo"]},ee=function(){return["nome","codigoRegistro"]};let Wt=(()=>{class a{constructor(t,i,o,n,r,l,p,_,A,h,T,w){this.toastr=t,this.invoiceService=i,this.loadingService=o,this.moedaService=n,this.instituicaoFinanceiraService=r,this.paisesService=l,this.beneficiarioService=p,this.bancoService=_,this.crypto=A,this.router=h,this.activatedRoute=T,this.accountService=w,this.faEdit=f.Xcf,this.faTrash=f.$aW,this.faArrowRight=f.eFW,this.beneficiarios=[],this.loadingBeneficiarios=!1,this.paises=[],this.loadingPais=!0,this.moedas=[],this.loadingMoedas=!0,this.instituicaoFinanceira=[],this.loadingInstituicaoFinanceira=!0,this.podeExcluirMoeda=!1,this.alterarConta=!1,this.subscription=[],this.objeto=new U,this.erro="",this.loading=!1,this.podeBaixarPDF=!1,this.readonly=!1,this.erroChange=new e.vpe,this.loadingChange=new e.vpe,this.podeBaixarChanged=new e.vpe,this.tabChanged=new e.vpe,this.benefificarioChanged=new e.vpe,this.objetoChanged=new e.vpe,this.podeExcluirMoeda=1==this.accountService.accountValue?.perfilAcesso_Id,(0,c.n)(this.moedaService.getList()).then(v=>this.moedas=v).finally(()=>this.loadingMoedas=!1);var j=this.moedaService.list.subscribe(v=>this.moedas=v);this.subscription.push(j),(0,c.n)(this.beneficiarioService.getList()).then(v=>{this.beneficiarios=v,this.loadingBeneficiarios=!1});var wo=this.beneficiarioService.list.subscribe(v=>this.beneficiarios=v);this.subscription.push(wo),(0,c.n)(this.instituicaoFinanceiraService.getList()).then(v=>this.instituicaoFinanceira=v).finally(()=>this.loadingInstituicaoFinanceira=!1);var jo=this.instituicaoFinanceiraService.list.subscribe(v=>this.instituicaoFinanceira=v);this.subscription.push(jo),(0,c.n)(this.paisesService.getList()).then(v=>this.paises=v).finally(()=>this.loadingPais=!1)}ngOnChanges(t){var i=this;return(0,g.Z)(function*(){t.objeto&&(i.objeto=t.objeto.currentValue,yield i.beneficiarioChange()),t.erro&&(i.erro=t.erro.currentValue),t.loading&&(i.loading=t.loading.currentValue),t.form&&(i.form=t.form.currentValue),t.podeBaixarPDF&&(i.podeBaixarPDF=t.podeBaixarPDF.currentValue),t.readonly&&(i.readonly=t.readonly.currentValue)})()}moedaEditar(t){var i=this.crypto.encrypt(t.id);this.router.navigate(["moeda",i],{relativeTo:this.activatedRoute})}moedaExcluir(t){var i=this.crypto.encrypt(t);this.router.navigate(["moeda","excluir",i],{relativeTo:this.activatedRoute})}calcula(){this.objetoChanged.emit(this.objeto)}beneficiarioChange(){var t=this;return(0,g.Z)(function*(){t.objeto.invoice.beneficiario_Id?(t.loadingBeneficiarios=!0,yield(0,c.n)(t.beneficiarioService.get(t.objeto.invoice.beneficiario_Id)).then(function(){var i=(0,g.Z)(function*(o){o.pais_Id=t.paises.find(n=>n.id==o.pais_Id)?.nome??"",t.beneficiarioSelected?.id!=t.objeto.invoice.beneficiario_Id&&(t.objeto.invoice.conta=o.conta,t.objeto.contrato.nomeRepresentanteLegal=o.nomeRepresentanteLegal,t.objeto.contrato.codigoRepresentanteLegal=o.codigoRepresentanteLegal,t.objeto.contrato.assinaturaRepresentanteLegal=o.assinaturaRepresentanteLegal),t.beneficiarioSelected=o,t.benefificarioChanged.emit(o),t.objeto.contrato.paisPagRecExterior=o.pais_Id,t.objeto.contrato.pagRecExterior=o.nome,t.objetoChanged.emit(t.objeto),yield(0,c.n)(t.bancoService.get(o.banco_Id)).then(n=>{n.pais_Id=t.paises.find(r=>r.id==n.pais_Id)?.nome??"",t.bancoBeneficiarioSelected=n}).catch(n=>t.toastr.error("N\xe3o foi poss\xedvel carregar dados do banco."))});return function(o){return i.apply(this,arguments)}}()).catch(i=>t.toastr.error("N\xe3o foi poss\xedvel carregar dados do benefici\xe1rio.")),t.loadingBeneficiarios=!1):(delete t.beneficiarioSelected,delete t.bancoBeneficiarioSelected)})()}invoiceDownload(){var t=this;return(0,g.Z)(function*(){if(0!=t.objeto.invoice.id){t.loadingChange.emit(!0),t.loadingService.message.next("Carregando documento invoice.");try{yield(0,c.n)(t.invoiceService.file(t.objeto.invoice.id))}catch(i){t.erroChange.emit((0,b.b)(i)),t.loadingChange.emit(!1),t.loadingService.message.next("")}}else t.toastr.error("Voc\xea deve primeiro salvar os dados para fazer o download.")})()}proximo(){this.objetoChanged.emit(this.objeto),this.tabChanged.emit(1)}alterarContaChange(){this.alterarConta=!this.alterarConta,this.alterarConta||(this.objeto.invoice.conta=this.beneficiarioSelected?.conta)}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(F._W),e.Y36(M),e.Y36(E.b),e.Y36(Zt.g),e.Y36(Tt.e),e.Y36(At.Z),e.Y36(yt.i),e.Y36(It.r),e.Y36(Q.w),e.Y36(C.F0),e.Y36(C.gz),e.Y36(H.B))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-form-invoice"]],inputs:{objeto:"objeto",erro:"erro",loading:"loading",form:"form",podeBaixarPDF:"podeBaixarPDF",readonly:"readonly"},outputs:{erroChange:"erroChange",loadingChange:"loadingChange",podeBaixarChanged:"podeBaixarChanged",tabChanged:"tabChanged",benefificarioChanged:"benefificarioChanged",objetoChanged:"objetoChanged"},features:[e._Bn([],[{provide:u.gN,useExisting:u.F}]),e.TTD],decls:119,vars:67,consts:[[1,"mb-3","row"],[1,"d-flex","align-items-center","flex-wrap"],["type","button",1,"btn","btn-dark","mb-2",3,"disabled","click"],["class","text-danger ms-0 ms-sm-2",4,"ngIf"],[1,"row"],[1,"form-group","col-xl-2","col-lg-2","col-md-6","col-sm-6","col-12"],["for","id"],[1,"text-danger"],["type","text","name","id","id","id","mask","0*","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["id","ngModel"],[1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-12"],["for","data"],["type","datetime-local",3,"valueInput","inputId","showErrorMessage","required","readonly","valueChanges"],["for","moeda_Id"],["name","moeda_Id","inputId","moeda_Id","optionLabel","nome","optionValue","id","placeholder","Selecione uma moeda",3,"options","ngModel","styleClass","filter","filterFields","required","dropdownIcon","showClear","readonly","ngModelChange"],["moeda_Id","ngModel"],["pTemplate","item"],["pTemplate","footer"],[4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-6","col-sm-6","col-12"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","leadZero","min","max","readonly","valueChanges"],[1,"form-group","col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12","my-8"],["for","instituicaoFinanceira_Id"],["optionLabel","nome","optionValue","id","name","instituicaoFinanceira_Id","inputId","instituicaoFinanceira_Id","appendTo","body",3,"styleClass","options","ngModel","placeholder","disabled","required","filter","filterFields","dropdownIcon","showClear","readonly","ngModelChange"],["instituicaoFinanceira_Id","ngModel"],[1,"form-group","col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],["for","beneficiario_Id"],["name","beneficiario_Id","inputId","beneficiario_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um benefici\xe1rio","appendTo","body",3,"options","ngModel","styleClass","filter","filterFields","required","dropdownIcon","showClear","readonly","ngModelChange"],["beneficiario_Id","ngModel"],[1,"form-group","mt-3"],[1,"col-sm-12","card","py-3","px-4"],[1,"d-flex"],["col","col-xl-9 col-lg-9 col-md-8 col-sm-7 col-12"],[1,"mb-3"],["class","ms-auto",4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-12","col-sm-12","col-12"],["for","nomeBanco"],["type","text","id","nomeBanco","readonly","",1,"form-control",3,"value"],["for","conta"],["type","text","id","conta","name","conta","required","",1,"form-control",3,"ngModel","readonly","ngModelChange"],["conta","ngModel"],["for","codigoSwift"],["type","text","id","codigoSwift","readonly","",1,"form-control",3,"value"],[1,"w-100"],[1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","logradouro"],["rows","1","id","logradouro","disabled","",1,"form-control",3,"value"],[1,"form-group","col-xl-5","col-lg-5","col-md-5","col-sm-4","col-12"],["for","cidade"],["type","text","id","cidade","disabled","",1,"form-control",3,"value"],[1,"form-group","col-xl-2","col-lg-2","col-md-2","col-sm-4","col-12"],["for","estado"],["type","text","id","estado","disabled","",1,"form-control",3,"value"],["for","pais_Id"],["type","text","id","pais_Id","disabled","",1,"form-control",3,"value"],[1,"row","w-100","mx-1","my-4","px-5","border-1","opacity-75"],[1,"row","mt-2"],[1,"d-flex","flex-row","flex-wrap","align-items-center","justify-content-between"],["type","button",1,"btn","btn-step","btn-step-next","ms-auto",3,"disabled","click"],[1,"btn-step-text","me-2","mb-1"],[3,"icon"],[1,"text-danger","ms-0","ms-sm-2"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center","w-100",3,"title"],[1,"flag","flag-info","px-2","me-2"],[1,"text-ellipsis"],[1,"flag","flag-info","px-2","ms-auto"],[1,"ms-2"],["title","Editar",1,"py-1","px-1","text-dark",3,"click"],["class","py-1 px-1 text-dark","title","Editar",3,"click",4,"ngIf"],[1,"py-2","px-3","border-top","bg-light"],[1,"link","text-info",3,"routerLink"],["class","text-danger",4,"ngIf"],[1,"ms-auto"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.invoiceDownload()}),e._uU(3,"Baixar PDF"),e.qZA(),e.YNc(4,Ft,2,0,"span",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"N\xba: "),e.TgZ(9,"span",7),e._uU(10,"*"),e.qZA(),e.TgZ(11,"small"),e._uU(12,"(autom\xe1tico)"),e.qZA()(),e.TgZ(13,"input",8,9),e.NdJ("ngModelChange",function(r){return o.objeto.invoice.id=r}),e.qZA()(),e.TgZ(15,"div",10)(16,"label",11),e._uU(17,"Data Invoice: "),e.TgZ(18,"span",7),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"app-input-date",12),e.NdJ("valueChanges",function(r){return o.objeto.invoice.data=r}),e.qZA()(),e.TgZ(21,"div",10)(22,"label",13),e._uU(23,"Moeda: "),e.TgZ(24,"span",7),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"p-dropdown",14,15),e.NdJ("ngModelChange",function(r){return o.objeto.invoice.moeda_Id=r}),e.YNc(28,wt,12,6,"ng-template",16),e.YNc(29,Ut,4,2,"ng-template",17),e.qZA(),e.YNc(30,Et,2,1,"div",18),e.qZA(),e.TgZ(31,"div",19)(32,"label",20),e._uU(33,"Valor: "),e.TgZ(34,"span",7),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"app-input-number",21),e.NdJ("valueChanges",function(r){return o.objeto.invoice.valor=r,o.calcula()}),e.qZA()(),e.TgZ(37,"div",22)(38,"label",23),e._uU(39,"Institui\xe7\xe3o Financeira: "),e.TgZ(40,"span",7),e._uU(41,"*"),e.qZA()(),e.TgZ(42,"p-dropdown",24,25),e.NdJ("ngModelChange",function(r){return o.objeto.invoice.instituicaoFinanceira_Id=r}),e.YNc(44,Nt,7,2,"ng-template",16),e.YNc(45,Jt,4,2,"ng-template",17),e.qZA(),e.YNc(46,Qt,2,1,"div",18),e.qZA(),e.TgZ(47,"div",26)(48,"label",27),e._uU(49,"Benefici\xe1rio: "),e.TgZ(50,"span",7),e._uU(51,"*"),e.qZA()(),e.TgZ(52,"p-dropdown",28,29),e.NdJ("ngModelChange",function(r){return o.objeto.invoice.beneficiario_Id=r})("ngModelChange",function(){return o.beneficiarioChange()}),e.YNc(54,Pt,7,2,"ng-template",16),e.YNc(55,Dt,4,2,"ng-template",17),e.qZA(),e.YNc(56,Yt,2,1,"div",18),e.qZA()(),e.TgZ(57,"div",4)(58,"div",30)(59,"div",31)(60,"div",4)(61,"div",32)(62,"div",33)(63,"h6"),e._uU(64,"Dados do Benefici\xe1rio "),e.qZA(),e.TgZ(65,"p",34)(66,"small",7),e._uU(67,"(Selecione um benefici\xe1rio para carregar dados)"),e.qZA()()(),e.YNc(68,Ht,4,2,"div",35),e.qZA()(),e.TgZ(69,"div",4)(70,"div",36)(71,"label",37),e._uU(72,"Banco: "),e.qZA(),e._UZ(73,"input",38),e.qZA(),e.TgZ(74,"div",19)(75,"label",39),e._uU(76,"Conta: "),e.qZA(),e.TgZ(77,"input",40,41),e.NdJ("ngModelChange",function(r){return o.objeto.invoice.conta=r}),e.qZA(),e.YNc(79,Gt,2,1,"div",18),e.qZA(),e.TgZ(80,"div",19)(81,"label",42),e._uU(82,"C\xf3digo Swift "),e.TgZ(83,"small"),e._uU(84,"(Banco)"),e.qZA(),e._uU(85,": "),e.qZA(),e._UZ(86,"input",43),e.qZA()(),e.TgZ(87,"div",4)(88,"div")(89,"small")(90,"b"),e._uU(91,"Endere\xe7o do banco"),e.qZA()(),e._UZ(92,"hr",44),e.qZA()(),e.TgZ(93,"div",4)(94,"div",45)(95,"label",46),e._uU(96,"Endere\xe7o: "),e.qZA(),e.TgZ(97,"textarea",47),e._uU(98,"                            "),e.qZA()(),e.TgZ(99,"div",48)(100,"label",49),e._uU(101,"Cidade: "),e.qZA(),e._UZ(102,"input",50),e.qZA(),e.TgZ(103,"div",51)(104,"label",52),e._uU(105,"UF: "),e.qZA(),e._UZ(106,"input",53),e.qZA(),e.TgZ(107,"div",48)(108,"label",54),e._uU(109,"Pa\xeds: "),e.qZA(),e._UZ(110,"input",55),e.qZA()()()()(),e._UZ(111,"hr",56),e.TgZ(112,"div",57)(113,"div",58),e.YNc(114,zt,2,1,"div",18),e.TgZ(115,"button",59),e.NdJ("click",function(){return o.proximo()}),e.TgZ(116,"span",60),e._uU(117,"Pr\xf3ximo"),e.qZA(),e._UZ(118,"fa-icon",61),e.qZA()()()),2&i){const n=e.MAs(27),r=e.MAs(43),l=e.MAs(53),p=e.MAs(78);let _,A,h,T,w,j;e.xp6(2),e.Q6J("disabled",!o.podeBaixarPDF),e.xp6(2),e.Q6J("ngIf",!o.podeBaixarPDF),e.xp6(9),e.Q6J("ngModel",o.objeto.invoice.id),e.xp6(7),e.Q6J("valueInput",o.objeto.invoice.data)("inputId","data")("showErrorMessage",!0)("required",!0)("readonly",o.readonly),e.xp6(6),e.Q6J("options",o.moedas)("ngModel",o.objeto.invoice.moeda_Id)("styleClass","form-control "+(o.loadingMoedas?"form-control-loading":"")+(o.readonly?" disabled":""))("filter",!0)("filterFields",e.DdM(64,$t))("required",!0)("dropdownIcon",o.readonly?"d-none":"pi pi-angle-down")("showClear",!o.readonly)("readonly",o.readonly),e.xp6(4),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(6),e.Q6J("valueInput",o.objeto.invoice.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1)("leadZero",!0)("min",.1)("max",999999999)("readonly",o.readonly),e.xp6(6),e.Q6J("styleClass","form-control "+(o.loadingInstituicaoFinanceira?"form-control-loading":"")+(o.readonly?" disabled":""))("options",o.instituicaoFinanceira)("ngModel",o.objeto.invoice.instituicaoFinanceira_Id)("placeholder","Selecione")("disabled",o.loadingInstituicaoFinanceira)("required",!0)("filter",!0)("filterFields",e.DdM(65,ee))("dropdownIcon",o.readonly?"d-none":"pi pi-angle-down")("showClear",!o.readonly)("readonly",o.readonly),e.xp6(4),e.Q6J("ngIf",r.touched&&r.errors),e.xp6(6),e.Q6J("options",o.beneficiarios)("ngModel",o.objeto.invoice.beneficiario_Id)("styleClass","form-control "+(o.loadingBeneficiarios?"form-control-loading":"")+(o.readonly?" disabled":""))("filter",!0)("filterFields",e.DdM(66,ee))("required",!0)("dropdownIcon",o.readonly?"d-none":"pi pi-angle-down")("showClear",!o.readonly)("readonly",o.readonly),e.xp6(4),e.Q6J("ngIf",l.touched&&l.errors),e.xp6(12),e.Q6J("ngIf",!o.readonly),e.xp6(5),e.Q6J("value",null!==(_=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.nome)&&void 0!==_?_:"N/A"),e.xp6(4),e.Q6J("ngModel",o.objeto.invoice.conta)("readonly",!o.alterarConta),e.xp6(2),e.Q6J("ngIf",p.touched&&p.errors),e.xp6(7),e.Q6J("value",null!==(A=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.codigoSwift)&&void 0!==A?A:"N/A"),e.xp6(11),e.Q6J("value",null!==(h=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.logradouro)&&void 0!==h?h:"N/A"),e.xp6(5),e.Q6J("value",null!==(T=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.cidade)&&void 0!==T?T:"N/A"),e.xp6(4),e.Q6J("value",null!==(w=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.estado)&&void 0!==w?w:"N/A"),e.xp6(4),e.Q6J("value",null!==(j=null==o.bancoBeneficiarioSelected?null:o.bancoBeneficiarioSelected.pais_Id)&&void 0!==j?j:"N/A"),e.xp6(4),e.Q6J("ngIf",o.form.invalid),e.xp6(1),e.Q6J("disabled",o.form.invalid),e.xp6(3),e.Q6J("icon",o.faArrowRight)}},dependencies:[x.O5,C.rH,u.Fj,u.JJ,u.Q7,u.On,y.BN,z.K,$.l,Z.jx,W.Lt,X.Z6]})}return a})();const Xt=["template"],eo=["icon"];function to(a,s){1&a&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),e.qZA())}function oo(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Invoice"),e.qZA())}function ao(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Contrato"),e.qZA())}function no(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Contrato Bicolunado"),e.qZA())}function io(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"Swift"),e.qZA())}function ro(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"p-tabPanel"),e.YNc(1,io,2,0,"ng-template",9),e.TgZ(2,"div",20)(3,"div",21)(4,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.swiftDownload())}),e._uU(5,"Baixar Documento Swift"),e.qZA()()()()}if(2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("disabled",!t.podeBaixarSwift)}}function so(a,s){if(1&a&&(e.TgZ(0,"p",30),e._uU(1),e.qZA()),2&a){const t=e.oxw(4);e.xp6(1),e.Oqu(t.erro)}}function lo(a,s){1&a&&(e.TgZ(0,"p",30),e._uU(1,"Preencha os campos obrigat\xf3rios (*) de Invoice corretamente para salvar."),e.qZA())}function co(a,s){1&a&&(e.TgZ(0,"p",30),e._uU(1,"Preencha os campos obrigat\xf3rios (*) de Contrato corretamente para salvar."),e.qZA())}function po(a,s){if(1&a&&(e.TgZ(0,"div",28),e.YNc(1,so,2,1,"p",29),e.YNc(2,lo,2,0,"p",29),e.YNc(3,co,2,0,"p",29),e.qZA()),2&a){e.oxw(2);const t=e.MAs(6),i=e.MAs(12),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.erro),e.xp6(1),e.Q6J("ngIf",t.invalid&&!o.erro),e.xp6(1),e.Q6J("ngIf",i.invalid&&!o.erro)}}function uo(a,s){1&a&&e._UZ(0,"span",31)}function mo(a,s){1&a&&e._UZ(0,"span",31)}function _o(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",23),e.YNc(1,po,4,3,"div",24),e.TgZ(2,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.kitDownload())}),e.YNc(3,uo,1,0,"span",26),e.TgZ(4,"span"),e._uU(5,"Baixar Kit"),e.qZA()(),e.TgZ(6,"button",27),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(6),n=e.MAs(12),r=e.oxw();return e.KtG(r.send(o,n))}),e.YNc(7,mo,1,0,"span",26),e.TgZ(8,"span"),e._uU(9,"Salvar"),e.qZA()()()}if(2&a){e.oxw();const t=e.MAs(6),i=e.MAs(12),o=e.MAs(18),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.erro||t.invalid||i.invalid),e.xp6(1),e.Q6J("disabled",!n.podeBaixarKit),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(3),e.Q6J("disabled",t.invalid||i.invalid||o.invalid||n.loading||n.loadingSwiftFile||n.loadingContratoBicolunadoFile||n.loadingContratoFile||n.loadingInvoiceFile),e.xp6(1),e.Q6J("ngIf",n.loading)}}function go(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",7)(1,"p-tabView",8),e.NdJ("activeIndexChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tabChanged(o))}),e.TgZ(2,"p-tabPanel"),e.YNc(3,oo,2,0,"ng-template",9),e.TgZ(4,"div",10)(5,"form",null,11)(7,"app-form-invoice",12),e.NdJ("tabChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tabChanged(o))})("erroChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.erro=o)})("loadingChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.loadingInvoiceFile=o)})("benefificarioChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.beneficiarioSelected=o)})("podeBaixarChanged",function(o){e.CHM(t);const n=e.oxw();return n.podeBaixarInvoice=o,e.KtG(n.podeBaixarKitChange())})("objetoChanged",function(o){e.CHM(t);const n=e.oxw();return n.objeto=o,n.calculaMoedaNacional(),e.KtG(n.calculaVET())}),e.qZA()()()(),e.TgZ(8,"p-tabPanel",13),e.YNc(9,ao,2,0,"ng-template",9),e.TgZ(10,"div",10)(11,"form",null,14)(13,"app-form-contrato",15),e.NdJ("erroChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.erro=o)})("loadingChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.loadingContratoFile=o)})("podeBaixarChanged",function(o){e.CHM(t);const n=e.oxw();return n.podeBaixarContrato=o,e.KtG(n.podeBaixarKitChange())})("tabChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tabChanged(o))})("objetoChanged",function(o){e.CHM(t);const n=e.oxw();return n.objeto=o,n.calculaMoedaNacional(),e.KtG(n.calculaVET())}),e.qZA()()()(),e.TgZ(14,"p-tabPanel",13),e.YNc(15,no,2,0,"ng-template",9),e.TgZ(16,"div",10)(17,"form",null,16)(19,"app-form-contrato-bicolunado",17),e.NdJ("podeBaixarChanged",function(o){e.CHM(t);const n=e.oxw();return n.podeBaixarContratoBicolunado=o,n.podeBaixarKitChange(),e.KtG(n.setCamposReadonly())})("loadingChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.loading=o)})("erroChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.erro=o)})("tabChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.tabChanged(o))})("send",function(){e.CHM(t);const o=e.MAs(6),n=e.MAs(12),r=e.oxw();return r.send(o,n),e.KtG(r.setCamposReadonly())})("objetoChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto=o)}),e.qZA()()()(),e.YNc(20,ro,6,1,"p-tabPanel",18),e.qZA(),e.YNc(21,_o,10,5,"div",19),e.qZA()}if(2&a){const t=e.MAs(6),i=e.MAs(12),o=e.MAs(18),n=e.oxw();e.xp6(1),e.Q6J("activeIndex",n.activeIndex),e.xp6(6),e.Q6J("objeto",n.objeto)("loading",n.loading)("erro",n.erro)("form",t)("podeBaixarPDF",n.podeBaixarInvoice)("readonly",n.camposReadonly),e.xp6(1),e.Q6J("disabled",1==t.invalid),e.xp6(5),e.Q6J("objeto",n.objeto)("loading",n.loading)("erro",n.erro)("form",i)("isEditPage",n.isEditPage)("podeBaixarPDF",n.podeBaixarContrato)("readonly",n.camposReadonly),e.xp6(1),e.Q6J("disabled",1==t.invalid||1==i.invalid),e.xp6(5),e.Q6J("objeto",n.objeto)("beneficiarioSelected",n.beneficiarioSelected)("loading",n.loading)("erro",n.erro)("podeBaixarPDF",n.podeBaixarContratoBicolunado)("readonly",n.camposReadonly)("isEditPage",n.isEditPage)("form",o),e.xp6(1),e.Q6J("ngIf",n.isEditPage),e.xp6(1),e.Q6J("ngIf",n.isEditPage)}}let te=(()=>{class a{constructor(t,i,o,n,r,l,p,_){this.activatedRoute=t,this.crypto=i,this.datepipe=o,this.toastr=n,this.invoiceService=r,this.modalService=l,this.loadingService=p,this.router=_,this.faEdit=f.Xcf,this.faTrash=f.$aW,this.faArrowRight=f.eFW,this.faArrowLeft=f.acZ,this.faPenClip=f.k8y,this.faCheck=f.LEp,this.objeto=new U,this.erro="",this.loading=!1,this.loadingInvoiceFile=!1,this.loadingContratoFile=!1,this.loadingSwiftFile=!1,this.loadingContratoBicolunadoFile=!1,this.subscription=[],this.modal=new q.u,this.isEditPage=!0,this.activeIndex=0,this.podeBaixarContratoBicolunado=!1,this.podeBaixarInvoice=!1,this.podeBaixarContrato=!1,this.podeBaixarSwift=!1,this.podeBaixarKit=!1,this.camposReadonly=!1}ngAfterViewInit(){var t=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"1100px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var i=this.activatedRoute.params.subscribe(o=>{o.invoice_id?(this.objeto.invoice.id=this.crypto.decrypt(o.invoice_id),this.modal.title="Editar Invoice",this.modal.routerBack=["../../"],this.isEditPage=!0,(0,c.n)(this.invoiceService.get(this.objeto.invoice.id)).then(function(){var n=(0,g.Z)(function*(r){r.contrato.numContrato=r.invoice.id.toString(),r.invoice.data=t.datepipe.transform(r.invoice.data,"yyyy-MM-ddTHH:mm"),r.contrato.data=t.datepipe.transform(r.contrato.data,"yyyy-MM-ddTHH:mm"),r.contrato.dataLiquidacao=t.datepipe.transform(r.contrato.dataLiquidacao,"yyyy-MM-dd"),r.contrato.dataAssinaturaRepresentanteLegal=t.datepipe.transform(r.contrato.dataAssinaturaRepresentanteLegal,"yyyy-MM-ddTHH:mm"),r.contrato.dataAssinaturaIntermediadora=t.datepipe.transform(r.contrato.dataAssinaturaIntermediadora,"yyyy-MM-ddTHH:mm"),r.contrato.dataCertificadoAssinatura=t.datepipe.transform(r.contrato.dataCertificadoAssinatura,"yyyy-MM-ddTHH:mm"),t.objeto=r,t.objeto.contrato=new D.hi(r.contrato),t.setCamposReadonly(),t.podeBaixarKitChange(),setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"invoice")},200)});return function(r){return n.apply(this,arguments)}}()).catch(n=>{this.voltar()})):(this.modal.title="Cadastrar Invoice",this.modal.routerBack=["../"],this.isEditPage=!1,this.objeto.invoice.data=this.datepipe.transform(this.objeto.invoice.data,"yyyy-MM-ddTHH:mm"),this.objeto.contrato.dataLiquidacao=this.datepipe.transform(this.objeto.contrato.dataLiquidacao,"yyyy-MM-dd"),this.objeto.contrato.data=this.datepipe.transform(this.objeto.contrato.data,"yyyy-MM-ddTHH:mm"),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"invoice")},200),this.podeBaixarKitChange())});this.subscription.push(i)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}encryptId(t){const i=this.crypto.encrypt(t);return null!==i?i:""}voltar(){this.modalService.removeModal(this.modal)}tabChanged(t){this.activeIndex=t,(0,fe.Z)(t)}calculaMoedaNacional(){this.objeto.invoice.valor&&this.objeto.contrato.taxa&&(this.objeto.contrato.valorNacional=this.objeto.invoice.valor*this.objeto.contrato.taxa)}calculaVET(){this.objeto.invoice.valor&&this.objeto.contrato.valorNacional&&(this.objeto.contrato.vet=(this.objeto.contrato.valorNacional+.0038*this.objeto.contrato.valorNacional)/this.objeto.invoice.valor)}setCamposReadonly(){this.camposReadonly=!!(this.objeto.contrato.dataAssinaturaRepresentanteLegal||this.objeto.contrato.dataAssinaturaIntermediadora||this.objeto.contrato.dataCertificadoAssinatura)}podeBaixarKitChange(){var t=0!=this.objeto.invoice.id&&0!=this.objeto.contrato.id;this.podeBaixarInvoice=t||this.loading||this.loadingInvoiceFile,this.podeBaixarContrato=t||this.loading||this.loadingContratoFile,this.podeBaixarSwift=t||this.loading||this.loadingSwiftFile,this.podeBaixarKit=this.podeBaixarContratoBicolunado&&this.podeBaixarInvoice&&this.podeBaixarContrato&&this.podeBaixarSwift}swiftDownload(){var t=this;return(0,g.Z)(function*(){if(0!=t.objeto.invoice.id){t.loadingSwiftFile=!0,t.loadingService.message.next("Carregando Swift.");try{yield(0,c.n)(t.invoiceService.fileSwift(t.objeto.invoice.id))}catch(i){t.erro=(0,b.b)(i),t.loadingSwiftFile=!1,t.loadingService.message.next("")}}else t.toastr.error("Voc\xea deve primeiro salvar os dados para fazer o download.")})()}kitDownload(){var t=this;return(0,g.Z)(function*(){0!=t.objeto.invoice.id?(t.loading=!0,yield(0,c.n)(t.invoiceService.kitZip(t.objeto.invoice.id)).catch(i=>{t.erro=(0,b.b)(i),t.loading=!1}),t.loading=!1):t.toastr.error("Voc\xea deve primeiro salvar os dados para fazer o download.")})()}send(t,i){var o=this;return(0,g.Z)(function*(){return o.loading=!1,o.erro="",t.invalid?(o.toastr.error("Campos inv\xe1lidos em invoice."),void(o.erro="Campos inv\xe1lidos em invoice.")):i.invalid?(o.toastr.error("Campos inv\xe1lidos em contrato."),void(o.erro="Campos inv\xe1lidos em contrato.")):(o.isEditPage||(o.objeto.contrato.invoice_Id=0),o.objeto.contrato.valorNacional=parseFloat(o.objeto.contrato.valorNacional),o.objeto.contrato.vet=parseFloat(o.objeto.contrato.vet),o.objeto.contrato.taxa=parseFloat(o.objeto.contrato.taxa),o.objeto.invoice.valor=parseFloat(o.objeto.invoice.valor),yield o.request().then(function(){var n=(0,g.Z)(function*(r){if(1==r.sucesso){o.objeto.contrato.id=r.objeto.contrato.id,o.objeto.contrato.invoice_Id=r.objeto.invoice.id,o.objeto.invoice.id=r.objeto.invoice.id,o.objeto.contrato.numContrato=o.objeto.invoice.id.toString();var l=o.crypto.encrypt(o.objeto.invoice.id);o.isEditPage||(o.modalService.removeModalAnimation(o.modal.id),o.router.navigate(["../editar",l],{relativeTo:o.activatedRoute})),yield(0,c.n)(o.invoiceService.getList())}else o.erro=r.mensagem,o.toastr.error(r.mensagem)});return function(r){return n.apply(this,arguments)}}()).catch(n=>{o.loading=!1,o.erro=(0,b.b)(n)}))})()}request(){return(0,c.n)(this.isEditPage?this.invoiceService.edit(this.objeto):this.invoiceService.create(this.objeto))}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(C.gz),e.Y36(Q.w),e.Y36(x.uU),e.Y36(F._W),e.Y36(M),e.Y36(q.Z),e.Y36(E.b),e.Y36(C.F0))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-form"]],viewQuery:function(i,o){if(1&i&&(e.Gf(Xt,5),e.Gf(eo,5)),2&i){let n;e.iGM(n=e.CRH())&&(o.template=n.first),e.iGM(n=e.CRH())&&(o.icon=n.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"mt-3"],[3,"activeIndex","activeIndexChange"],["pTemplate","header"],[1,"px-4"],["invoice","ngForm"],[3,"objeto","loading","erro","form","podeBaixarPDF","readonly","tabChanged","erroChange","loadingChange","benefificarioChanged","podeBaixarChanged","objetoChanged"],[3,"disabled"],["contrato","ngForm"],[3,"objeto","loading","erro","form","isEditPage","podeBaixarPDF","readonly","erroChange","loadingChange","podeBaixarChanged","tabChanged","objetoChanged"],["clausulas","ngForm"],[3,"objeto","beneficiarioSelected","loading","erro","podeBaixarPDF","readonly","isEditPage","form","podeBaixarChanged","loadingChange","erroChange","tabChanged","send","objetoChanged"],[4,"ngIf"],["class","d-flex align-items-stretch flex-wrap p-0 mt-3 ",4,"ngIf"],[1,"px-2"],[1,"swift"],["type","button",1,"btn","btn-dark",3,"disabled","click"],[1,"d-flex","align-items-stretch","flex-wrap","p-0","mt-3"],["class","m-0 me-3 mb-0",4,"ngIf"],[1,"btn","btn-dark","me-1","ms-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"btn","btn-primary","me-0",3,"disabled","click"],[1,"m-0","me-3","mb-0"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,o){1&i&&(e.YNc(0,to,5,0,"ng-template",null,0,e.W1O),e.YNc(2,go,22,26,"ng-template",null,1,e.W1O),e._UZ(4,"router-outlet"))},dependencies:[x.O5,C.lC,u._Y,u.JL,u.F,Z.jx,V.xf,V.x4,st,xt,Wt],styles:['.form-control[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px}  .p-tabview{display:flex;flex-flow:column;width:100%}  .p-tabview-nav-container{flex:1 0 20%;display:flex}  .p-tabview-panels{flex:1 0 80%;border:1px var(--neutral) solid;padding:15px 0;background-color:#f7f7f7}  .p-tabview-nav-content{position:relative;z-index:1;margin-bottom:-1px}  .p-tabview-nav{display:flex;flex-flow:row;margin:0;padding:0;width:100%}  .p-tabview-nav li{background-color:var(--neutral);display:flex;align-items:center}  .p-tabview-nav li a{color:#fff;line-height:1;height:100%;width:100%;display:flex;padding:10px;background-color:var(--neutral)}  .p-tabview-nav li a>*:not(span){margin-right:10px}  .p-tabview-nav li.p-tabview-ink-bar{display:none}  .p-tabview-nav li:nth-child(2n){background:var(--neutral)}  .p-tabview-nav li a:hover{color:#fff;background-color:var(--neutral)}  .p-tabview-nav li.p-highlight a{background-color:var(--primary);border-bottom:1px var(--primary) solid;margin-bottom:0}.swift[_ngcontent-%COMP%]{border-radius:5px;border:2px var(--primary) dashed;height:200px;width:400px;display:flex;align-items:center;justify-content:center;background-color:#e9e2e2}.flag[_ngcontent-%COMP%]{min-width:unset}.modal__header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:42px;height:40px;transform:translateY(9px)}.modal__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center}  .p-overlaypanel{padding:10px 15px;background:white;box-shadow:2px 1px 3px -1px #7f7d7d;margin-top:12px}  .p-overlaypanel:after{content:"";position:absolute;top:0;left:20px;width:15px;height:11px;background:white;clip-path:polygon(50% 0%,0% 100%,100% 100%);transform:translateY(-100%);z-index:2}']})}return a})();const fo=["template"],ho=["icon"];function vo(a,s){if(1&a&&e._UZ(0,"fa-icon",2),2&a){const t=e.oxw();e.Q6J("icon",t.faTrash)}}function bo(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.erro)}}function Co(a,s){1&a&&e._UZ(0,"span",9)}function xo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,bo,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.send())}),e.YNc(7,Co,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.erro),e.xp6(2),e.Q6J("ngIf",t.loading)}}let Zo=(()=>{class a{constructor(t,i,o,n){this.activatedRoute=t,this.modalService=i,this.invoiceService=o,this.crypto=n,this.faTrash=f.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new q.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var t=this.activatedRoute.params.subscribe(i=>{i.invoice_id?(this.id=this.crypto.decrypt(i.invoice_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete invoice")},200)):this.voltar()});this.subscription.push(t)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,c.n)(this.invoiceService.delete(this.id)).then(t=>{this.loading=!1,t.sucesso?((0,c.n)(this.invoiceService.getList()),this.voltar()):this.erro=t.mensagem}).catch(t=>{this.loading=!1,this.erro=(0,b.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(C.gz),e.Y36(q.Z),e.Y36(M),e.Y36(Q.w))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete"]],viewQuery:function(i,o){if(1&i&&(e.Gf(fo,5),e.Gf(ho,5)),2&i){let n;e.iGM(n=e.CRH())&&(o.template=n.first),e.iGM(n=e.CRH())&&(o.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,o){1&i&&(e.YNc(0,vo,1,1,"ng-template",null,0,e.W1O),e.YNc(2,xo,10,2,"ng-template",null,1,e.W1O))},dependencies:[x.O5,y.BN]})}return a})();var oe=d(2996),ae=d(4290),ne=d(8902),N=d(1353),ie=d(2951),re=d(424),To=d(7280),P=d(9742),B=d(490);const Ao=[{path:"",component:ge,title:"Zentech - Invoices",children:[{path:"cadastrar",component:te,title:"Zentech - Cadastrar Invoice",data:{modalOrder:1},children:[{path:"moeda",component:N.U,data:{modalOrder:2},title:"Zentech - Cadastrar Moeda"},{path:"moeda/:moeda_id",component:N.U,data:{modalOrder:2},title:"Zentech - Editar Moeda"},{path:"moeda/excluir/:moeda_id",component:re.T,canActivate:[P.p],data:{modalOrder:2,roles:[B.uU.Admin]},title:"Zentech - Excluir Moeda"},{path:"instituicao-financeira",component:ae.U,title:"Zentech - Cadastrar Institui\xe7\xe3o Financeira",data:{modalOrder:2}},{path:"beneficiario",component:ne.U,title:"Zentech - Cadastrar Benefici\xe1rio",data:{modalOrder:2},children:[{path:"banco",component:oe.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:3}},{path:"representante",component:ie.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:3}}]}]},{path:"editar/:invoice_id",component:te,title:"Zentech - Editar Invoice",data:{modalOrder:1},children:[{path:"moeda",component:N.U,data:{modalOrder:2},title:"Zentech - Cadastrar Moeda"},{path:"moeda/:moeda_id",component:N.U,data:{modalOrder:2},title:"Zentech - Editar Moeda"},{path:"moeda/excluir/:moeda_id",component:re.T,canActivate:[P.p],data:{modalOrder:2,roles:[B.uU.Admin]},title:"Zentech - Excluir Moeda"},{path:"instituicao-financeira",component:ae.U,title:"Zentech - Cadastrar Institui\xe7\xe3o Financeira",data:{modalOrder:2}},{path:"beneficiario",component:ne.U,title:"Zentech - Cadastrar Benefici\xe1rio",data:{modalOrder:2},children:[{path:"banco",component:oe.U,title:"Zentech - Cadastrar Invoice",data:{modalOrder:3}},{path:"representante",component:ie.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:3}}]}]},{path:"excluir/:invoice_id",component:Zo,title:"Zentech - Excluir Invoice",canActivate:[P.p],data:{modalOrder:1,roles:[B.uU.Admin,B.uU.Master]}},To.D]}];let yo=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[C.Bz.forChild(Ao),C.Bz]})}return a})();var Io=d(5805),Fo=d(5031);let Mo=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[x.ez,yo,u.u5,y.uH,Io.m,Fo.T]})}return a})()}}]);
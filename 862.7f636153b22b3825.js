"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[862],{1064:(M,v,a)=>{a.d(v,{V:()=>u}),a(5219),a(2832);class u{constructor(){this.id=0,this.nome="",this.simbolo="",this.codigo=""}}},5862:(M,v,a)=>{a.r(v),a.d(v,{EmpresaModule:()=>ht});var h=a(6814),r=a(6223),u=a(5597),f=a(2352),l=a(132),m=a(2832),d=a(708),C=a(590),Z=a(5219);class U{constructor(){this.id=0,this.nome="",this.logoDataUri=""}}var F=[{field:"id",header:"Id",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.CONTAINS},{field:"nome",header:"Nome",maskType:m.O.undefined,filterType:m.vA.text,filterDisplay:m.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:Z.a6.CONTAINS},{field:"logoDataUri",header:"Logo",maskType:m.O.imageUrl,filterType:m.vA.none,filterDisplay:m.w2.none,sort:!1}],t=a(9291),y=a(8787),b=a(9862),E=a(5619),I=a(9397),L=a(2096),H=a(553),A=a(2425);let T=(()=>{class i{constructor(e,o,n){this.table=e,this.http=o,this.toastr=n,this.url=H.N.url,this.list=new E.X([])}getList(e=!1){return this.table.loading.next(!0),this.http.get(`${this.url}/empresa`,{headers:new b.WM({loading:"false"})}).pipe((0,I.b)({next:o=>(o=o.map(n=>n),this.list.next(Object.assign([],o)),(0,L.of)(o)),error:o=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de Empresas.")}))}get(e){return this.http.get(`${this.url}/empresa/${e}`,{headers:new b.WM({loading:"false"})})}create(e){return this.http.post(`${this.url}/empresa`,e)}edit(e){return this.http.put(`${this.url}/empresa`,e)}delete(e){return this.http.delete(`${this.url}/empresa/${e}`)}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(y.i),t.LFG(b.eN),t.LFG(A._W))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var D=a(6599);const J=function(){return["cadastrar"]};function Y(i,c){1&i&&(t.TgZ(0,"div",10)(1,"a",11)(2,"span",12),t._uU(3," Cadastrar Empresa"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,J)))}let P=(()=>{class i{constructor(e,o){this.table=e,this.empresaService=o,this.faFilePdf=C.gSj,this.maskType=m.O,this.list=[],this.tableLinks=[],this.columns=F,this.subscription=[];var n=this.empresaService.list.subscribe(p=>{this.list=p.map(g=>JSON.parse(JSON.stringify(g)))});this.subscription.push(n),(0,d.n)(this.empresaService.getList());var s=this.table.selected.subscribe(p=>{p&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(s)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(y.i),t.Y36(T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],decls:13,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],["xmlns","http://www.w3.org/2000/svg","height","16","width","16","viewBox","0 0 512 512","fill","currentColor"],["d","M243.4 2.6l-224 96c-14 6-21.8 21-18.7 35.8S16.8 160 32 160v8c0 13.3 10.7 24 24 24H456c13.3 0 24-10.7 24-24v-8c15.2 0 28.3-10.7 31.3-25.6s-4.8-29.9-18.7-35.8l-224-96c-8-3.4-17.2-3.4-25.2 0zM128 224H64V420.3c-.6 .3-1.2 .7-1.8 1.1l-48 32c-11.7 7.8-17 22.4-12.9 35.9S17.9 512 32 512H480c14.1 0 26.5-9.2 30.6-22.7s-1.1-28.1-12.9-35.9l-48-32c-.6-.4-1.2-.7-1.8-1.1V224H384V416H344V224H280V416H232V224H168V416H128V224zM256 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-4","col-lg-4","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(o,n){if(1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4),t.qZA()(),t.kcU(),t.TgZ(5,"div",5)(6,"h3",6),t._uU(7,"Empresas"),t.qZA()()(),t.TgZ(8,"div",7),t.YNc(9,Y,4,2,"ng-template",null,8,t.W1O),t._UZ(11,"app-list-shared",9),t.qZA()(),t._UZ(12,"router-outlet")),2&o){const s=t.MAs(10);t.xp6(11),t.Q6J("list",n.list)("topActions",s)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[l.lC,l.rH,D.o]})}return i})();var R=a(5861),O=a(342),_=a(2855),w=a(5556),N=a(2667);const Q=["template"],j=["icon"];function B(i,c){1&i&&(t.TgZ(0,"span",3),t.O4$(),t.TgZ(1,"svg",4),t._UZ(2,"path",5),t.qZA()())}function V(i,c){1&i&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function G(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,V,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(10);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function z(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"label",29)(1,"p",30),t._UZ(2,"i",31),t.qZA(),t.TgZ(3,"h3"),t._uU(4,"Clique e arraste para selecionar uma imagem"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"ou "),t.TgZ(7,"label",32),t._uU(8,"clique aqui"),t.qZA(),t._uU(9," para abrir explorador de arquivos"),t.qZA(),t.TgZ(10,"input",33,34),t.NdJ("input",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.fileChange(n))}),t.qZA()()}}function k(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.importarNovamente())}),t._uU(1,"Refazer upload"),t.qZA()}}function W(i,c){if(1&i&&t._UZ(0,"img",36),2&i){const e=t.oxw(2);t.Q6J("src",e.fileSrc,t.LSH)("alt",e.fileName)}}function q(i,c){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function $(i,c){1&i&&(t.TgZ(0,"p",12),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function K(i,c){if(1&i&&(t.TgZ(0,"div",37),t.YNc(1,q,2,1,"p",28),t.YNc(2,$,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(1),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!o.erro)}}function X(i,c){1&i&&t._UZ(0,"span",38)}function tt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.MAs(1),s=t.oxw();return t.KtG(s.send(n))}),t.TgZ(2,"div",8)(3,"div",9)(4,"div",10)(5,"label",11),t._uU(6,"Nome: "),t.TgZ(7,"span",12),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",13,14),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.objeto.nome=n)})("change",function(){t.CHM(e);const n=t.MAs(10),s=t.oxw();return t.KtG(s.objeto.nome=n.value.trim())}),t.qZA(),t.YNc(11,G,2,1,"div",15),t.qZA()(),t.TgZ(12,"div",16)(13,"div",17)(14,"div")(15,"label",18),t._uU(16,"Logo: "),t.TgZ(17,"span",12),t._uU(18,"*"),t.qZA()(),t.YNc(19,z,12,0,"label",19),t.TgZ(20,"div",20),t.YNc(21,k,2,0,"button",21),t.qZA(),t.TgZ(22,"div",22),t.YNc(23,W,1,2,"img",23),t.qZA()()()(),t.TgZ(24,"div",9)(25,"div",24),t.YNc(26,K,3,2,"div",25),t.TgZ(27,"button",26),t.YNc(28,X,1,0,"span",27),t.TgZ(29,"span"),t._uU(30,"Salvar"),t.qZA()()()()()()}if(2&i){const e=t.MAs(1),o=t.MAs(10),n=t.oxw();t.xp6(9),t.Q6J("ngModel",n.objeto.nome),t.xp6(2),t.Q6J("ngIf",o.touched&&o.errors),t.xp6(8),t.Q6J("ngIf",!n.fileUploaded),t.xp6(2),t.Q6J("ngIf",n.fileUploaded),t.xp6(2),t.Q6J("ngIf",n.fileSrc&&n.fileUploaded),t.xp6(3),t.Q6J("ngIf",n.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||n.loading),t.xp6(1),t.Q6J("ngIf",n.loading)}}let S=(()=>{class i{constructor(e,o,n,s,p){this.activatedRoute=e,this.modalService=o,this.crypto=n,this.toastr=s,this.empresaService=p,this.objeto=new U,this.erro="",this.loading=!1,this.loadingCep=!1,this.subscription=[],this.isEditPage=!1,this.modal=new _.u,this.fileUploaded=!1,this.fileSrc="",this.fileName="",this.fileLoading=!1}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var e=this.activatedRoute.params.subscribe(o=>{o.empresa_id?(this.objeto.id=this.crypto.decrypt(o.empresa_id),this.modal.title="Editar Empresa",this.modal.routerBack=["../../"],this.isEditPage=!0,(0,d.n)(this.empresaService.get(this.objeto.id)).then(n=>{this.objeto=n,this.fileSrc=n.logoDataUri,this.fileLoading=!1,this.fileName="",this.fileUploaded=!0,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"Empresa")},200)}).catch(n=>{this.voltar()})):(this.modal.title="Cadastrar Empresa",this.modal.routerBack=["../"],this.isEditPage=!1,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"Empresa")},200))});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}fileChange(e){var o=e.target.files[0];if(this.importarNovamente(),o){this.fileLoading=!0;var n=new FileReader,s=this;n.onload=function(g){var x=g.target?.result;s.fileSrc=x,s.fileUploaded=!0,s.fileLoading=!1,s.fileName=o.name,s.objeto.logoDataUri=x},n.onerror=function(g){s.fileLoading=!1,s.toastr.error("N\xe3o foi poss\xedvel realizar upload")},n.readAsDataURL(o)}else this.toastr.error("Selecione uma imagem para salvar.")}carregarImagem(e){var o=this;return(0,R.Z)(function*(){if(e){var n=yield fetch(e),p=(yield n.blob(),new XMLHttpRequest);p.onload=function(){var g=new FileReader;g.onloadend=function(x){console.log(x)},g.readAsDataURL(p.response)},p.open("GET",e),p.responseType="blob",p.send()}else o.toastr.error("Insira uma url v\xe1lida para carregar.")})()}importarNovamente(){this.fileUploaded=!1,this.fileSrc="",this.fileName=""}send(e){if(e.invalid)return this.toastr.error("Campos inv\xe1lidos"),void(this.erro="Campos inv\xe1lidos");this.erro="",this.request().then(o=>{this.loading=!1,1==o.sucesso?(o.objeto?(0,w.f)(this.empresaService,o.objeto):(0,d.n)(this.empresaService.getList()),this.voltar()):this.erro=o.mensagem}).catch(o=>{this.loading=!1,this.erro=(0,O.b)(o)})}request(){return(0,d.n)(0==this.objeto.id?this.empresaService.create(this.objeto):this.empresaService.edit(this.objeto))}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(l.gz),t.Y36(_.Z),t.Y36(N.w),t.Y36(A._W),t.Y36(T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],viewQuery:function(o,n){if(1&o&&(t.Gf(Q,5),t.Gf(j,5)),2&o){let s;t.iGM(s=t.CRH())&&(n.template=s.first),t.iGM(s=t.CRH())&&(n.icon=s.first)}},decls:4,vars:0,consts:[["class","align-items-center"],["icon",""],["template",""],[1,"title-icon"],["xmlns","http://www.w3.org/2000/svg","height","16","width","16","viewBox","0 0 512 512","fill","currentColor"],["d","M243.4 2.6l-224 96c-14 6-21.8 21-18.7 35.8S16.8 160 32 160v8c0 13.3 10.7 24 24 24H456c13.3 0 24-10.7 24-24v-8c15.2 0 28.3-10.7 31.3-25.6s-4.8-29.9-18.7-35.8l-224-96c-8-3.4-17.2-3.4-25.2 0zM128 224H64V420.3c-.6 .3-1.2 .7-1.8 1.1l-48 32c-11.7 7.8-17 22.4-12.9 35.9S17.9 512 32 512H480c14.1 0 26.5-9.2 30.6-22.7s-1.1-28.1-12.9-35.9l-48-32c-.6-.4-1.2-.7-1.8-1.1V224H384V416H344V224H280V416H232V224H168V416H128V224zM256 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","nome"],[1,"text-danger"],["type","text","name","nome","id","nome","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["nome","ngModel"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-12"],["for","file",1,"mb-0"],["for","file","class","input-file-container",4,"ngIf"],[1,"my-3"],["class","btn btn-dark  ",3,"click",4,"ngIf"],[1,""],["class","logo",3,"src","alt",4,"ngIf"],[1,"col","mt-3","mb-2","d-flex","align-items-center"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-danger",4,"ngIf"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],["type","file","name","file","id","file","required","","accept","image/png, image/gif, image/jpeg, image/svg",3,"input"],["file",""],[1,"btn","btn-dark",3,"click"],[1,"logo",3,"src","alt"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,n){1&o&&(t.YNc(0,B,3,0,"ng-template",0,1,t.W1O),t.YNc(2,tt,31,8,"ng-template",null,2,t.W1O))},dependencies:[h.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.c5,r.On,r.F],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}.logo[_ngcontent-%COMP%]{max-height:300px}"]})}return i})();var et=a(1064);const it=["template"],ot=["icon"];function nt(i,c){if(1&i&&t._UZ(0,"fa-icon",2),2&i){const e=t.oxw();t.Q6J("icon",e.faTrash)}}function at(i,c){if(1&i&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function st(i,c){1&i&&t._UZ(0,"span",9)}function rt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,at,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(7,st,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading)}}const mt=[{path:"",component:P,children:[{path:"cadastrar",component:S,data:{modalOrder:1}},{path:"editar/:empresa_id",component:S,data:{modalOrder:1}},{path:"excluir/:empresa_id",component:(()=>{class i{constructor(e,o,n,s){this.activatedRoute=e,this.modalService=o,this.crypto=n,this.empresaService=s,this.faTrash=C.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new _.u,this.objeto=new et.V}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var e="";this.activatedRoute.snapshot.url.forEach(n=>{e+="../"}),this.modal.routerBack=[e],this.modal.title="Excluir registro";var o=this.activatedRoute.params.subscribe(n=>{n.empresa_id?(this.id=this.crypto.decrypt(n.empresa_id),this.modal=this.modalService.addModal(this.modal,"empresa")):this.voltar()});this.subscription.push(o)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,d.n)(this.empresaService.delete(this.id)).then(e=>{this.loading=!1,1==e.sucesso?(e.objeto?(0,w.O)(this.empresaService,e.objeto):(0,d.n)(this.empresaService.getList()),this.voltar()):this.erro=e.mensagem}).catch(e=>{this.loading=!1,this.erro=(0,O.b)(e)})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(l.gz),t.Y36(_.Z),t.Y36(N.w),t.Y36(T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete"]],viewQuery:function(o,n){if(1&o&&(t.Gf(it,5),t.Gf(ot,5)),2&o){let s;t.iGM(s=t.CRH())&&(n.template=s.first),t.iGM(s=t.CRH())&&(n.icon=s.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2","mb-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,n){1&o&&(t.YNc(0,nt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,rt,10,2,"ng-template",null,1,t.W1O))},dependencies:[h.O5,u.BN]})}return i})(),data:{modalOrder:1}},a(7280).D]}];let pt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(mt),l.Bz]})}return i})();var dt=a(6208);let ht=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[h.ez,pt,r.u5,u.uH,dt.m,f.kW]})}return i})()},5556:(M,v,a)=>{function h(u,f){var l=u.list.value,m=l.findIndex(d=>d.id==f.id);l.splice(m,1),u.list.next(l)}function r(u,f){var l=u.list.value;if(f.id){var m=l.findIndex(d=>d.id==f.id);l.splice(m,1,f)}else l.push(f);u.list.next(l)}a.d(v,{O:()=>h,f:()=>r})}}]);
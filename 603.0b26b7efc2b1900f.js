"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[603],{2603:(Ca,K,l)=>{l.r(K),l.d(K,{PessoaModule:()=>ba});var u=l(6814),q=l(4685),$=l(2352),h=l(132),e=l(9291);let re=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-pessoa"]],decls:1,vars:0,template:function(i,a){1&i&&e._UZ(0,"router-outlet")},dependencies:[h.lC]})}return o})();var R=l(5861),le=l(1449),j=l(1102),p=l(708),g=l(590),T=l(5219),x=l(342),C=l(9324),L=l(8787),I=l(2719),P=l(6434),V=l(5038),E=l(2425),ce=l(4527),M=l(5597),W=l(6599),pe=l(9901),de=l(3904);function me(o,s){if(1&o&&(e.TgZ(0,"p",13)(1,"small"),e._uU(2,"Pessoas cadastradas em "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.empresaSelected.nome||"Empresa X")}}function ue(o,s){1&o&&e._UZ(0,"span",14)}function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(a){e.CHM(t);const n=e.oxw(2);return e.KtG(n.excluirLista(a))}),e._UZ(2,"fa-icon",3),e.qZA(),e._UZ(3,"p-confirmDialog"),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.loading),e.xp6(1),e.Q6J("icon",t.faTrash)}}const he=function(){return["importar"]},ge=function(){return["cadastrar"]};function fe(o,s){if(1&o&&(e.YNc(0,_e,4,2,"div",15),e.TgZ(1,"div",16)(2,"a",17)(3,"span",18),e._uU(4," Importar Excel"),e.qZA()()(),e.TgZ(5,"div",19)(6,"a",20)(7,"span",18),e._uU(8," Cadastrar Pessoa"),e.qZA()()()),2&o){const t=e.oxw();e.Q6J("ngIf",t.selectedItems.length>1),e.xp6(2),e.Q6J("routerLink",e.DdM(3,he)),e.xp6(4),e.Q6J("routerLink",e.DdM(4,ge))}}let ve=(()=>{class o{constructor(t,i,a,n,r,c,d){var y=this;this.table=t,this.pessoaService=i,this.accountService=a,this.empresaService=n,this.confirmationService=r,this.toastr=c,this.loadingService=d,this.faCreditCard=le.Ozh,this.faTrash=g.$aW,this.list=[],this.tableLinks=[],this.columns=j.V8,this.subscription=[],this.loading=!1,this.selectedItems=[];var w=this.pessoaService.list.subscribe(f=>this.list=Object.assign([],f));this.subscription.push(w);var b=this.pessoaService.loading.subscribe(f=>this.loading=f);this.subscription.push(b);var _=this.table.selected.subscribe(f=>{f&&(this.tableLinks=[{label:"Cadastrar Saldo",routePath:["cadastrar-saldo"],paramsFieldName:["id"]},{label:"Cadastrar Opera\xe7\xe3o",routePath:["cadastrar-operacao"],paramsFieldName:["id"]},{label:"Detalhes",routePath:["detalhes"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(_);var A=this.empresaService.getEmpresa().subscribe(function(){var f=(0,R.Z)(function*(U){y.empresaSelected=U.empresa,U&&U.id&&(yield(0,p.n)(y.pessoaService.getList(!0)))});return function(U){return f.apply(this,arguments)}}());this.subscription.push(A),0==this.pessoaService.list.value.length&&(0,p.n)(this.pessoaService.getList(!0));var S=this.table.selectedItems.subscribe(f=>this.selectedItems=f);this.subscription.push(S)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}getList(){(0,p.n)(this.pessoaService.getList(!0))}excluirLista(t){this.confirmationService.confirm({target:t.target,message:"Tem certeza que deseja excluir essas linhas? \n Esses registros n\xe3o poder\xe3o ser recuperados. \n Esse processo pode demorar, n\xe3o feche a aba do seu navegador.",header:"Excluir linhas",icon:"pi pi-exclamation-triangle",acceptIcon:"none",acceptButtonStyleClass:"btn btn-primary",acceptLabel:"Excluir",rejectIcon:"none",rejectLabel:"Cancelar",rejectButtonStyleClass:"btn btn-grey me-2",closeOnEscape:!0,dismissableMask:!0,accept:()=>{this.excluirListaConfirmed(t)},reject:()=>{}})}excluirListaConfirmed(t){var i=this.selectedItems.map(a=>a.id);this.pessoaService.loading.next(!0),this.loadingService.message.next("Excluindo registros. Essa opera\xe7\xe3o pode demorar, n\xe3o feche esta aba."),(0,p.n)(this.pessoaService.deleteList(i)).then(a=>{(0,C.UB)(this.pessoaService,i),this.pessoaService.loading.next(!1),this.loadingService.message.next(""),a.sucesso?this.toastr.success("Exclus\xe3o conclu\xedda com sucesso"):(this.toastr.error("Ocorreu um erro na exclus\xe3o."),this.confirmationService.confirm({target:t.target,message:a.mensagem,header:"Excluir linhas falhou",icon:"pi pi-times",acceptIcon:"none",acceptButtonStyleClass:"btn btn-primary",acceptLabel:"OK",rejectVisible:!1,closeOnEscape:!0,dismissableMask:!0,accept:()=>{},reject:()=>{}}))}).catch(a=>{this.toastr.error("Ocorreu um erro na exclus\xe3o."),this.pessoaService.loading.next(!1),this.loadingService.message.next(""),this.confirmationService.confirm({target:t.target,message:(0,x.b)(a),header:"Excluir linhas falhou",icon:"pi pi-times",acceptIcon:"none",acceptButtonStyleClass:"btn btn-primary",acceptLabel:"OK",rejectVisible:!1,closeOnEscape:!0,dismissableMask:!0,accept:()=>{},reject:()=>{}})})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(L.i),e.Y36(I.N),e.Y36(P.B),e.Y36(V.P),e.Y36(T.YP),e.Y36(E._W),e.Y36(ce.b))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-list"]],features:[e._Bn([T.YP])],decls:20,vars:15,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["class","page__header-subtitle",4,"ngIf"],[1,"ms-auto","mt-auto",2,"margin-bottom","7px"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"topActions","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable","selectionMode"],[1,"page__header-subtitle"],[1,"spinner-border","spinner-border-sm","me-1"],["class","mx-md-1 mb-2 px-0 ",4,"ngIf"],[1,"col-xl-3","col-lg-5","col-md-6","col-sm-6","col-12","mx-md-1","mb-2","px-0","ng-star-inserted"],[1,"btn","btn-dark","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px","font-size","13px"],[1,"col-xl-3","col-lg-5","col-md-5","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[1,"mx-md-1","mb-2","px-0"],[1,"btn","btn-danger","me-md-0","me-sm-1",2,"line-height","1","height","31.5px","font-size","13px",3,"disabled","click"]],template:function(i,a){if(1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Pessoas"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Painel CPF"),e.qZA(),e.YNc(9,me,5,1,"p",6),e.qZA(),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return a.getList()}),e.YNc(12,ue,1,0,"span",9),e._uU(13,"Atualizar"),e.qZA()(),e._UZ(14,"app-empresa-selected"),e.qZA(),e.TgZ(15,"div",10),e.YNc(16,fe,9,5,"ng-template",null,11,e.W1O),e._UZ(18,"app-list-shared",12),e.qZA()(),e._UZ(19,"router-outlet")),2&i){const n=e.MAs(17);e.xp6(3),e.Q6J("icon",a.faCreditCard),e.xp6(6),e.Q6J("ngIf",a.empresaSelected),e.xp6(2),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(6),e.Q6J("topActions",n)("list",a.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0)("selectionMode","multiple")}},dependencies:[u.O5,h.lC,h.rH,M.BN,W.o,pe.j,de.Q]})}return o})();var X=l(674),v=l(2855),xe=l(1193),O=l(2828),m=l(6223),k=l(2916),D=l(3735);const be=["template"],Ce=["icon"];function Te(o,s){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faUser)}}function Ae(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Ze(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"Remova os espa\xe7os antes e depois do texto."),e.qZA())}function ye(o,s){if(1&o&&(e.TgZ(0,"p",8),e.YNc(1,Ze,2,0,"span",11),e.qZA()),2&o){e.oxw(2);const t=e.MAs(9);e.xp6(1),e.Q6J("ngIf","^\\S(.*\\S)?$"==t.errors.pattern.requiredPattern)}}function Se(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ae,2,0,"p",34),e.YNc(2,ye,2,1,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(9);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.pattern)}}function Ie(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Me(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"CPF inv\xe1lido."),e.qZA())}function we(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"CPF j\xe1 cadastrado"),e.qZA())}function Oe(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ie,2,0,"p",34),e.YNc(2,Me,2,0,"p",34),e.YNc(3,we,2,0,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(18);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.mask||t.errors.invalid),e.xp6(1),e.Q6J("ngIf",t.errors.jaCadastrado)}}function Ne(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Preencha CPF corretamente."),e.qZA())}function Ee(o,s){if(1&o&&e.YNc(0,Ne,2,0,"p",34),2&o){e.oxw();const t=e.MAs(18);e.Q6J("ngIf",t.touched&&(t.invalid||t.errors))}}function Ue(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function qe(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ue,2,0,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(32);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function je(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function De(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"E-mail inv\xe1lido."),e.qZA())}function Je(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,je,2,0,"p",34),e.YNc(2,De,2,0,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(39);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.email)}}function Qe(o,s){if(1&o&&(e.TgZ(0,"p",8),e._uU(1),e.ALo(2,"json"),e.qZA()),2&o){e.oxw(2);const t=e.MAs(39);e.xp6(1),e.Oqu(e.lcZ(2,1,t.errors))}}function Le(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Qe,3,3,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(46);e.xp6(1),e.Q6J("ngIf",t.errors)}}function Ye(o,s){if(1&o&&(e.TgZ(0,"p",8),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function Fe(o,s){1&o&&(e.TgZ(0,"p",8),e._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),e.qZA())}function He(o,s){if(1&o&&(e.TgZ(0,"div",35),e.YNc(1,Ye,2,1,"p",34),e.YNc(2,Fe,2,0,"p",34),e.qZA()),2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.erro),e.xp6(1),e.Q6J("ngIf",t.invalid&&!i.erro)}}function Re(o,s){1&o&&e._UZ(0,"span",36)}function Pe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.MAs(1),n=e.oxw();return e.KtG(n.send(a))}),e.TgZ(2,"div",5)(3,"div",6)(4,"label",7),e._uU(5,"Nome Completo: "),e.TgZ(6,"span",8),e._uU(7,"*"),e.qZA()(),e.TgZ(8,"input",9,10),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.nome=a)})("change",function(){e.CHM(t);const a=e.MAs(9),n=e.oxw();return e.KtG(n.objeto.nome=a.value.trim().toUpperCase())}),e.qZA(),e.YNc(10,Se,3,2,"div",11),e.qZA()(),e.TgZ(11,"div",5)(12,"div",12)(13,"label",13),e._uU(14,"CPF: "),e.TgZ(15,"span",8),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"input",14,15),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.cpf=a)})("change",function(){e.CHM(t);const a=e.MAs(18),n=e.oxw();return e.KtG(n.validaCPF(a,a.value))}),e.qZA(),e.YNc(19,Oe,4,3,"div",11),e.qZA(),e.TgZ(20,"div",12)(21,"label",16),e._uU(22,"Data de Nascimento: "),e.TgZ(23,"span",8),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"app-input-date",17),e.NdJ("valueChanges",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.dataNascimento=a)}),e.qZA(),e.YNc(26,Ee,1,1,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(28,"div",19)(29,"label",20),e._uU(30,"Nome da M\xe3e:"),e.qZA(),e.TgZ(31,"input",21,22),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.nomeMae=a)})("change",function(){e.CHM(t);const a=e.MAs(32),n=e.oxw();return e.KtG(n.objeto.nomeMae=a.value.trim().toUpperCase())}),e.qZA(),e.YNc(33,qe,2,1,"div",11),e.qZA()(),e.TgZ(34,"div",5)(35,"div",23)(36,"label",24),e._uU(37,"E-mail: "),e.qZA(),e.TgZ(38,"input",25,26),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.email=a)}),e.qZA(),e.YNc(40,Je,3,2,"div",11),e.qZA()(),e.TgZ(41,"div",5)(42,"div",23)(43,"label",24),e._uU(44,"Observa\xe7\xf5es: "),e.qZA(),e.TgZ(45,"textarea",27,28),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.obs=a)})("change",function(){e.CHM(t);const a=e.MAs(46),n=e.oxw();return e.KtG(n.objeto.obs=a.value.trim().toUpperCase())}),e._uU(47,"                "),e.qZA(),e.YNc(48,Le,2,1,"div",11),e.qZA()(),e.TgZ(49,"div",29)(50,"div",30),e.YNc(51,He,3,2,"div",31),e.TgZ(52,"button",32),e.YNc(53,Re,1,0,"span",33),e.TgZ(54,"span"),e._uU(55,"Salvar"),e.qZA()()()()()}if(2&o){const t=e.MAs(1),i=e.MAs(9),a=e.MAs(18),n=e.MAs(32),r=e.MAs(39),c=e.MAs(46),d=e.oxw();e.xp6(8),e.Q6J("ngModel",d.objeto.nome),e.xp6(2),e.Q6J("ngIf",i.touched&&i.errors),e.xp6(7),e.ekj("form-control-loading",d.loadingConsultaApi),e.Q6J("ngModel",d.objeto.cpf),e.xp6(2),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(6),e.Q6J("valueInput",d.objeto.dataNascimento)("inputId","dataNascimento")("showErrorMessage",!0)("required",!0)("max","hoje"),e.xp6(6),e.Q6J("ngModel",d.objeto.nomeMae),e.xp6(2),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(5),e.Q6J("email",!0)("ngModel",d.objeto.email)("pattern",d.emailPattern),e.xp6(2),e.Q6J("ngIf",r.touched&&r.errors),e.xp6(5),e.Q6J("ngModel",d.objeto.obs),e.xp6(3),e.Q6J("ngIf",c.touched&&c.errors),e.xp6(3),e.Q6J("ngIf",d.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||d.loading||d.loadingConsultaApi),e.xp6(1),e.Q6J("ngIf",d.loading)}}let ke=(()=>{class o{constructor(t,i,a,n,r,c){this.activatedRoute=t,this.toastr=i,this.modalService=a,this.pessoaService=n,this.pessoaOperacaoService=r,this.mobile=c,this.faUser=g.ILF,this.objeto=new j.Zo,this.erro="",this.loading=!1,this.subscription=[],this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,this.loadingConsultaApi=!1,this.screen=X.I.lg,this.liberaNome=!1,this.modal=new v.u,this.minDate=new Date("1900-01-01"),this.maxDate=new Date,this.mobile.value.subscribe(d=>this.screen=d)}ngAfterViewInit(){this.modal.title="Cadastrar Pessoa",this.modal.template=this.template,this.modal.style={"max-width":"700px"},this.modal.routerBack=["../"],this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.icon=this.icon,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"create pessoa")},200)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}validaCPF(t,i){if(t){if(!i||0==i)return void t.control.setErrors({required:!0});if("cpf"==t.name&&!(0,xe.p)(i))return void t.control.setErrors({invalid:!0});if([].filter(c=>c.cpf==i).length>0)return void t.control.setErrors({jaCadastrado:!0});t.control.setErrors(null)}}consultaPessoa(t){t.invalid||!this.objeto.dataNascimento||(this.loadingConsultaApi=!0,this.erro="",this.liberaNome=!1,(0,p.n)(this.pessoaService.getPessoa(this.objeto.cpf,this.objeto.dataNascimento)).then(i=>{var a;this.loadingConsultaApi=!1;try{a=JSON.parse(JSON.parse(JSON.stringify(i.retorno)))}catch{a=i.retorno}if("object"==typeof a){if(a.ERRO&&""!=a.ERRO||"ERRO"==a.RETORNO)this.objeto.brConsulta_Id_Consulta=a.ID_CONSULTA,this.objeto.brConsulta_Erro=a.ERRO,this.liberaNome=!0,this.erro=a.ERRO,this.toastr.error(a.ERRO);else if(!a.ERRO){try{this.objeto.dataNascimento=this.formataData(a.DATA_NASC).substring(0,10)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Nascimento. (${a.DATA_NASC}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Nascimento.")}try{this.objeto.brConsulta_Data_Cap=this.formataData(a.DATA_CAP)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Capta\xe7\xe3o. (${a.DATA_CAP}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Capta\xe7\xe3o.")}try{this.objeto.brConsulta_Hora_Cap=this.formataData(a.DATA_CAP,a.HORA_CAP)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Hora de Capta\xe7\xe3o. (${a.HORA_CAP}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Hora de Capta\xe7\xe3o.")}try{this.objeto.dataInscricao=this.formataData(a.DATA_INSCRICAO)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Inscri\xe7\xe3o. (${a.DATA_INSCRICAO}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Inscri\xe7\xe3o.")}this.objeto.nome=a.NOME,this.objeto.digito=a.DIGITO,this.objeto.brConsulta_Controle=a.CONTROLE,this.objeto.brConsulta_Id_Consulta=a.ID_CONSULTA,this.objeto.situacao=a.SITUACAO,this.objeto.brConsulta_Status=a.STATUS,this.objeto.brConsulta_Erro=""}this.objeto.dataAtualizacaoBRConsulta=(new Date).toISOString(),this.liberaNome=!1}else this.liberaNome=!0,this.objeto.brConsulta_Erro=i.retorno,this.erro=i.retorno,this.toastr.error(i.retorno),this.objeto.dataAtualizacaoBRConsulta=(new Date).toISOString()}).catch(i=>{this.loadingConsultaApi=!1,this.liberaNome=!0,this.erro=(0,x.b)(i)}))}send(t){this.loading=!0,this.erro="",(0,p.n)(this.pessoaService.post(this.objeto)).then(i=>{this.loading=!1,i.sucesso?(i.objeto?(0,C.fb)(this.pessoaService,i.objeto):(0,p.n)(this.pessoaService.getList()),this.voltar()):this.erro=i.mensagem??"N\xe3o foi poss\xedvel cadastrar pessoa."}).catch(i=>{this.loading=!1,this.erro=(0,x.b)(i)})}formataData(t,i,a){var n=0,r=0,c=0,d=t.split("/"),y=parseInt(d[2]),w=parseInt(d[1])-1,b=parseInt(d[0]);if(i){var _=i.split(":");n=parseInt(_[0]),r=parseInt(_[1]),c=parseInt(_[2])}return new Date(y,w,b,n,r,c).toISOString()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(E._W),e.Y36(v.Z),e.Y36(I.N),e.Y36(O.m),e.Y36(X.h))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-create"]],viewQuery:function(i,a){if(1&i&&(e.Gf(be,5),e.Gf(Ce,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"px-2",3,"ngSubmit"],["form","ngForm"],[1,"row"],[1,"form-group","col-12"],["for","nome"],[1,"text-danger"],["type","text","name","nome","id","nome","required","","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngModelChange","change"],["nome","ngModel"],[4,"ngIf"],[1,"form-group","col-lg-3","col-md-3","col-sm-6","col-6"],["for","cpf"],["type","text","name","cpf","id","cpf","mask","000.000.000-00","placeholder","000.000.000-00","required","","pattern","\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2}",1,"form-control",3,"ngModel","ngModelChange","change"],["cpf","ngModel"],["for","dataNascimento"],["type","date",3,"valueInput","inputId","showErrorMessage","required","max","valueChanges"],["erroCPF",""],[1,"form-group","col-lg-6","col-md-6","col-sm-12","col-12"],["for","nomeMae"],["type","text","name","nomeMae","id","nomeMae","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngModelChange","change"],["nomeMae","ngModel"],[1,"form-group","col-lg-12","col-md-12","col-sm-12","col-12"],["for","email"],["type","email","name","email","id","email",1,"form-control",3,"email","ngModel","pattern","ngModelChange"],["email","ngModel"],["name","obs","id","obs","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngModelChange","change"],["obs","ngModel"],[1,"row","mt-1","mt-2"],[1,"d-flex","align-items-start","justify-content-end"],["class","col-10 mb-2 me-3 px-0",4,"ngIf"],[1,"btn","btn-primary","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-10","mb-2","me-3","px-0"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,Te,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Pe,56,22,"ng-template",null,1,e.W1O))},dependencies:[u.O5,M.BN,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.c5,m.on,m.On,m.F,k.K,D.Z6,u.Ts]})}return o})();var N=l(2667);const Ge=["template"],ze=["icon"];function Be(o,s){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faTrash)}}function Ke(o,s){if(1&o&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.erro)}}function $e(o,s){1&o&&e._UZ(0,"span",9)}function Ve(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,Ke,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.YNc(7,$e,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.erro),e.xp6(2),e.Q6J("ngIf",t.loading)}}let We=(()=>{class o{constructor(t,i,a,n,r){this.activatedRoute=t,this.modalService=i,this.crypto=a,this.pessoaService=n,this.pessoaOperacaoService=r,this.faTrash=g.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new v.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var t=this.activatedRoute.params.subscribe(i=>{if(i.pessoa_id)try{this.id=this.crypto.decrypt(i.pessoa_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete pessoa")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(t)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,p.n)(this.pessoaService.delete(this.id)).then(t=>{this.loading=!1,t.sucesso?(t.objeto?((0,C.Od)(this.pessoaService,t.objeto),this.pessoaOperacaoService.list.value.filter(a=>a.cpfCliente==t.objeto.cpf).forEach(a=>{(0,C.Od)(this.pessoaOperacaoService,a)})):((0,p.n)(this.pessoaOperacaoService.getList()),(0,p.n)(this.pessoaService.getList())),this.voltar()):this.erro=t.mensagem??"N\xe3o foi poss\xedvel excluir pessoa."}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(N.w),e.Y36(I.N),e.Y36(O.m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(i,a){if(1&i&&(e.Gf(Ge,5),e.Gf(ze,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,Be,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Ve,10,2,"ng-template",null,1,e.W1O))},dependencies:[u.O5,M.BN]})}return o})();var Xe=l(5753),ee=l(5619),et=l(9397),tt=l(2096),ot=l(553),at=l(9862);let Y=(()=>{class o{constructor(t,i,a,n){this.table=t,this.http=i,this.toastr=a,this.empresaService=n,this.url=ot.N.url,this.list=new ee.X([]),this.loading=new ee.X(!1)}getList(t,i=!1){return this.loading.next(i),this.table.loading.next(!0),this.http.get(`${this.url}/pessoaSaldo/${t}`).pipe((0,et.b)({next:a=>(a=a.map(n=>(n.dataConcessao=new Date(n.dataConcessao),n)),this.list.next(a),this.loading.next(!1),(0,tt.of)(a)),error:a=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de saldos."),finalize:()=>{this.loading.next(!1),this.table.loading.next(!1)}}))}create(t){return this.http.post(`${this.url}/pessoaSaldo`,t)}delete(t){return this.http.delete(`${this.url}/pessoaSaldo/${t}`)}deleteList(t){var i=this.empresaService.getEmpresa().value.id;return this.http.post(`${this.url}/pessoaSaldo/${i}`,{ids:t})}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(L.i),e.LFG(at.eN),e.LFG(E._W),e.LFG(V.P))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var G=l(4844),Z=l(2832);class it{constructor(){this.pessoa_Id=0,this.valorConcedido=""}}var te=[{field:"dataConcessao",header:"Data de Concess\xe3o",maskType:Z.O.undefined,filterType:Z.vA.text,filterDisplay:Z.w2.menu,showAddButton:!0,showMatchMode:!0,showOperator:!1,filterMatchMode:T.a6.DATE_IS},{field:"valorConcedido",header:"Valor Concedido",maskType:Z.O.number,filterType:Z.vA.numeric,decimal:"1.2",filterDisplay:Z.w2.menu,showAddButton:!1,showMatchMode:!0,showOperator:!1,filterMatchMode:T.a6.CONTAINS},{field:"usuarioCadastroEmail",header:"Cadastrado Por",maskType:Z.O.undefined,filterType:Z.vA.text,filterDisplay:Z.w2.menu,showAddButton:!1,showMatchMode:!1,showOperator:!1,filterMatchMode:T.a6.EQUALS}],oe=l(3714),ae=l(1532);const nt=function(){return["saldo/cadastrar"]};function st(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"a",10),e._uU(4," Cadastrar Saldo "),e.qZA()(),e.TgZ(5,"div",11),e._UZ(6,"i",12),e.TgZ(7,"input",13,14),e.NdJ("input",function(){e.CHM(t);const a=e.MAs(8);e.oxw();const n=e.MAs(1);return e.KtG(n.filterGlobal(a.value,"contains"))})("enter",function(){e.CHM(t);const a=e.MAs(8);e.oxw();const n=e.MAs(1);return e.KtG(n.filterGlobal(a.value,"contains"))}),e.qZA()()()()}2&o&&(e.xp6(3),e.Q6J("routerLink",e.DdM(1,nt)))}function rt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"p-calendar",27),e.NdJ("onSelect",function(a){const r=e.CHM(t).filterCallback;e.oxw(2);const c=e.MAs(5),d=e.oxw(3);return e.KtG(d.filterDate(a,r,c))})("ngModelChange",function(a){e.CHM(t);const n=e.oxw(2).$implicit;return e.KtG(n.filterValue=a)}),e.qZA()}if(2&o){const t=e.oxw(2).$implicit;e.Q6J("styleClass",t.showMatchMode?"mt-2":"")("showIcon",!0)("ngModel",t.filterValue)}}function lt(o,s){1&o&&e.YNc(0,rt,1,3,"ng-template",26)}function ct(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"input",28),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw(2).$implicit;return e.KtG(n.filterValue=a)})("change",function(a){const r=e.CHM(t).filterCallback;e.oxw(2);const c=e.MAs(5),d=e.oxw(3);return e.KtG(d.filterNumeric(a,r,c))}),e.qZA()}if(2&o){const t=e.oxw(2).$implicit;e.Q6J("classList",t.showMatchMode?"form-control mt-2":"form-control ")("ngModel",t.filterValue)}}function pt(o,s){1&o&&e.YNc(0,ct,1,2,"ng-template",26)}function dt(o,s){if(1&o&&(e.TgZ(0,"th",19)(1,"div",20),e._UZ(2,"span",21)(3,"p-sortIcon",22),e.TgZ(4,"p-columnFilter",23,24),e.YNc(6,lt,1,0,null,25),e.YNc(7,pt,1,0,null,25),e.qZA()()()),2&o){const t=s.$implicit;e.Q6J("pSortableColumn",t.field),e.xp6(2),e.Q6J("innerHTML",t.header,e.oJD),e.xp6(1),e.Q6J("field",t.field),e.xp6(1),e.Q6J("type",t.filterType)("field",t.field)("display",t.filterDisplay)("matchMode",t.filterMatchMode)("showOperator",t.showOperator)("showMatchModes",t.filterShowMatchMode)("showAddButton",t.filterShowAddButton),e.xp6(2),e.Q6J("ngIf","date"==t.filterType||"datetime"==t.filterType),e.xp6(1),e.Q6J("ngIf","numeric"==t.filterType)}}function mt(o,s){if(1&o&&(e.TgZ(0,"tr",16),e.YNc(1,dt,8,12,"th",17),e._UZ(2,"th",18),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function ut(o,s){if(1&o&&e.YNc(0,mt,3,1,"tr",15),2&o){const t=e.oxw();e.Q6J("ngIf",t.saldos.length>0)}}function _t(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.ekj("text-danger",i[t.field]<0),e.xp6(1),e.hij(" ",e.gM2(3,3,i[t.field],"BRL","",t.decimal)," ")}}function ht(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.ekj("text-danger",i[t.field]<0),e.xp6(1),e.hij(" ",e.gM2(3,3,i[t.field],"BRL",t.moeda,t.decimal)," ")}}function gt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.ALo(3,"currency"),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.ekj("text-danger",i[t.field]<0),e.xp6(1),e.hij(" ",e.gM2(3,3,i[t.field],"BRL","",t.decimal),"% ")}}function ft(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.hij(" ",i[t.field]," ")}}function vt(o,s){if(1&o&&(e.TgZ(0,"td",31),e.YNc(1,_t,4,8,"div",32),e.YNc(2,ht,4,8,"div",32),e.YNc(3,gt,4,8,"div",32),e.YNc(4,ft,3,1,"div",33),e.qZA()),2&o){const t=s.$implicit,i=s.index,a=e.oxw(2);e.ekj("ps-4",0==i),e.Q6J("ngSwitch",t.maskType),e.xp6(1),e.Q6J("ngSwitchCase",a.maskType.number),e.xp6(1),e.Q6J("ngSwitchCase",a.maskType.money),e.xp6(1),e.Q6J("ngSwitchCase",a.maskType.percentage)}}const xt=function(o){return["saldo/excluir",o]};function bt(o,s){if(1&o&&(e.TgZ(0,"a",34),e._uU(1,"Excluir"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,xt,t.idEncrypted))}}function Ct(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,vt,5,6,"td",29),e.TgZ(2,"td",18),e.YNc(3,bt,2,3,"a",30),e.qZA()()),2&o){const t=s.$implicit,i=s.columns,a=e.oxw();e.xp6(1),e.Q6J("ngForOf",i),e.xp6(2),e.Q6J("ngIf",a.podeExcluir&&a.lastIdDelete==t.id)}}function Tt(o,s){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td"),e.TgZ(2,"td")(3,"strong"),e._uU(4,"Total: "),e.qZA(),e._uU(5),e.ALo(6,"currency"),e.qZA(),e._UZ(7,"td",18),e.qZA()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",e.gM2(6,1,t.limiteConcedido,"BRL","","1.2")," ")}}function At(o,s){1&o&&(e.TgZ(0,"p",37),e._UZ(1,"span",38),e.TgZ(2,"span"),e._uU(3,"Carregando... "),e.qZA()())}function Zt(o,s){1&o&&(e.TgZ(0,"p")(1,"span"),e._uU(2,"Nenhum registro encontrado."),e.qZA()())}function yt(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td",35),e.YNc(2,At,4,0,"p",36),e.YNc(3,Zt,3,0,"p",25),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}let St=(()=>{class o{constructor(t,i){this.table=t,this.accountService=i,this.maskType=Z.O,this.faDollarSign=g.egO,this.columns=te,this.filters=te.map(a=>a.field),this.saldos=[],this.loading=!1,this.limiteConcedido=0,this.lastIdDelete=0,this.subscription=[],this.podeExcluir=!1,this.podeExcluir=1==this.accountService.accountValue?.perfilAcesso_Id}ngAfterViewChecked(){this.table.currentPageChange()}ngOnChanges(t){t.saldos&&(this.saldos=t.saldos.currentValue,this.formata()),t.loading&&(this.loading=t.loading.currentValue),t.limiteConcedido&&(this.limiteConcedido=t.limiteConcedido.currentValue),t.lastIdDelete&&(this.lastIdDelete=t.lastIdDelete.currentValue)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}getCellData(t,i){return this.table.formatCellData(t,i)}formata(){this.table.loading.next(!0);var t=JSON.parse(JSON.stringify(this.saldos));this.saldos=Object.assign([],t),this.table.loading.next(!1)}getOptionValue(t,i,a){if(i.values){var n=this.table.getCellValue(t,i);return i.values.find(c=>c.value==n)[a]}return null}filterDate(t,i,a){t?i(t):a.clearFilter()}filterNumeric(t,i,a){var n=t.target.value.replaceAll(".","");(n=parseFloat(n.replaceAll(",",".")))?i(n):a.clearFilter()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(L.i),e.Y36(P.B))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-saldo"]],inputs:{saldos:"saldos",loading:"loading",limiteConcedido:"limiteConcedido",lastIdDelete:"lastIdDelete"},features:[e.TTD],decls:7,vars:9,consts:[["responsiveLayout","scroll","currentPageReportTemplate","Exibindo {first} de {totalRecords} resultado(s)",1,"table","table-striped",3,"columns","value","rowHover","paginator","showCurrentPageReport","globalFilterFields","filterDelay"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"d-flex","flex-column-reverse","flex-sm-row","flex-wrap","px-0","py-0","w-100"],[1,"align-items-center","col-12","col-lg-9","col-md-10","col-sm-9","col-xl-6","d-flex","flex-column-reverse","flex-sm-row","flex-wrap","justify-content-end","mb-sm-0","ms-auto","px-0"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-4","col-12","mb-2","me-md-2","mx-0","mx-sm-1","px-0"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center",3,"routerLink"],[1,"p-input-icon-left","col-xl-6","col-lg-4","col-md-5","col-sm-7","col-12","mb-2"],[1,"pi","pi-search"],["pInputText","","type","search","placeholder","Pesquisar",1,"form-control",3,"input","enter"],["filter",""],["class","grey",4,"ngIf"],[1,"grey"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[1,"td-actions"],[3,"pSortableColumn"],[1,"d-flex","align-items-baseline","justify-content-between"],[1,"me-auto","pe-4",3,"innerHTML"],[3,"field"],[3,"type","field","display","matchMode","showOperator","showMatchModes","showAddButton"],["filterEl",""],[4,"ngIf"],["pTemplate","filter"],["name","filter","dateFormat","dd.mm.yy",3,"styleClass","showIcon","ngModel","onSelect","ngModelChange"],["type","text","mask","separator.2","decimalMarker",",","thousandSeparator",".",3,"classList","ngModel","ngModelChange","change"],[3,"ps-4","ngSwitch",4,"ngFor","ngForOf"],["class","btn btn-dark",3,"routerLink",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"btn","btn-dark",3,"routerLink"],["colspan","7",1,"py-2","px-3","border-0","border-light"],["class","py-1 px-1",4,"ngIf"],[1,"py-1","px-1"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.TgZ(0,"p-table",0,1),e.YNc(2,st,9,2,"ng-template",2),e.YNc(3,ut,1,1,"ng-template",3),e.YNc(4,Ct,4,2,"ng-template",4),e.YNc(5,Tt,8,6,"ng-template",5),e.YNc(6,yt,4,2,"ng-template",6),e.qZA()),2&i&&(e.ekj("mt-2",0==a.saldos.length),e.Q6J("columns",a.columns)("value",a.saldos)("rowHover",!0)("paginator",!1)("showCurrentPageReport",!0)("globalFilterFields",a.filters)("filterDelay",100))},dependencies:[u.sg,u.O5,u.RF,u.n9,u.ED,h.rH,q.iA,T.jx,q.lQ,q.fz,q.xl,m.Fj,m.JJ,m.On,oe.o,ae.f,D.Z6,u.H9]})}return o})();var F=l(8145);const It=["shared"],Mt=function(){return["operacao","cadastrar"]};function wt(o,s){1&o&&(e.TgZ(0,"div",4)(1,"a",5)(2,"span",6),e._uU(3," Cadastrar Opera\xe7\xe3o"),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,Mt)))}function Ot(o,s){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td"),e.TgZ(2,"td",8)(3,"p"),e._uU(4,"Total: "),e.TgZ(5,"strong"),e._uU(6),e.ALo(7,"currency"),e.qZA()()(),e._UZ(8,"td")(9,"td")(10,"td"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.hij("",e.gM2(7,1,t.limiteUtilizado,"BRL","","1.2")," ")}}function Nt(o,s){if(1&o&&e.YNc(0,Ot,11,6,"tr",7),2&o){const t=e.oxw();e.Q6J("ngIf",!t.loading)}}let Et=(()=>{class o{constructor(t,i){this.table=t,this.accountService=i,this.columns=F.c5,this.tableLinks=[],this.subscription=[],this.list=[],this.pessoa=new j.Zo,this.pessoaIdEncrypted=new j.Zo,this.limiteUtilizado=0,this.loading=!1;var a=this.table.selected.subscribe(n=>{n&&(this.tableLinks=[{label:"Detalhes",routePath:["operacao","detalhes"],paramsFieldName:["id"]},{label:"Editar",routePath:["operacao","editar"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["operacao","excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(a)}ngOnChanges(t){t.list&&(this.list=t.list.currentValue),t.pessoa&&(this.pessoa=t.pessoa.currentValue),t.limiteUtilizado&&(this.limiteUtilizado=t.limiteUtilizado.currentValue),t.loading&&(this.loading=t.loading.currentValue)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(L.i),e.Y36(P.B))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-operacao"]],viewQuery:function(i,a){if(1&i&&e.Gf(It,5),2&i){let n;e.iGM(n=e.CRH())&&(a.shared=n.first)}},inputs:{list:"list",pessoa:"pessoa",pessoaIdEncrypted:"pessoaIdEncrypted",limiteUtilizado:"limiteUtilizado",loading:"loading"},features:[e.TTD],decls:6,vars:12,consts:[["topActions",""],[3,"topActions","tableFooter","list","showResultLength","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],["shared",""],["tableFooter",""],[1,"col-xl-4","col-lg-4","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"],[4,"ngIf"],[1,"td-number"]],template:function(i,a){if(1&i&&(e.YNc(0,wt,4,2,"ng-template",null,0,e.W1O),e._UZ(2,"app-list-shared",1,2),e.YNc(4,Nt,1,1,"ng-template",null,3,e.W1O)),2&i){const n=e.MAs(1),r=e.MAs(5);e.xp6(2),e.Q6J("topActions",n)("tableFooter",r)("list",a.list)("showResultLength",!1)("filterLink",!1)("filterTable",!0)("paginator",!1)("sortTable",!0)("menuTable",!0)("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0)}},dependencies:[u.O5,h.rH,W.o,u.H9]})}return o})();function Ut(o,s){if(1&o&&(e._UZ(0,"fa-icon",3),e.TgZ(1,"span"),e._uU(2,"Dados Cadastrais"),e.qZA()),2&o){const t=e.oxw();e.Q6J("icon",t.faIdCard)}}function qt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.erroPessoa)}}function jt(o,s){1&o&&(e.TgZ(0,"p",106),e._uU(1,"E-mail inv\xe1lido"),e.qZA())}function Dt(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,jt,2,0,"p",105),e.qZA()),2&o){e.oxw();const t=e.MAs(36);e.xp6(1),e.Q6J("ngIf",t.errors.email)}}function Jt(o,s){if(1&o&&(e.TgZ(0,"p",106),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function Qt(o,s){1&o&&(e.TgZ(0,"p",106),e._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),e.qZA())}function Lt(o,s){if(1&o&&(e.TgZ(0,"div",107),e.YNc(1,Jt,2,1,"p",105),e.YNc(2,Qt,2,0,"p",105),e.qZA()),2&o){e.oxw();const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.erro),e.xp6(1),e.Q6J("ngIf",t.invalid&&!i.erro)}}function Yt(o,s){1&o&&e._UZ(0,"span",108)}function Ft(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"form",null,17)(3,"div",18)(4,"div",19)(5,"label",20),e._uU(6,"Id:"),e.qZA(),e._UZ(7,"input",21),e.qZA(),e.TgZ(8,"div",22)(9,"label",23),e._uU(10,"Nome Completo:"),e.qZA(),e._UZ(11,"input",24),e.qZA(),e.TgZ(12,"div",25)(13,"label",26),e._uU(14,"CPF:"),e.qZA(),e._UZ(15,"input",27,28),e.ALo(17,"mask"),e.qZA(),e.TgZ(18,"div",25)(19,"label",29),e._uU(20,"Data de Nascimento:"),e.qZA(),e.TgZ(21,"app-input-date",30),e.NdJ("valueChanges",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.dataNascimento=a)}),e.qZA()(),e.TgZ(22,"div",25)(23,"label",31),e._uU(24,"Telefone:"),e.qZA(),e.TgZ(25,"input",32,33),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.telefone=a)}),e.qZA()(),e.TgZ(27,"div",34)(28,"label",35),e._uU(29,"Nome da M\xe3e:"),e.qZA(),e.TgZ(30,"input",36,37),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.nomeMae=a)}),e.qZA()(),e.TgZ(32,"div",38)(33,"label",39),e._uU(34,"E-mail:"),e.qZA(),e.TgZ(35,"input",40,41),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.email=a)}),e.qZA(),e.YNc(37,Dt,2,1,"div",13),e.qZA(),e.TgZ(38,"div",42)(39,"label",43),e._uU(40,"Data de Cadastro:"),e.qZA(),e._UZ(41,"input",44),e.ALo(42,"date"),e.qZA(),e.TgZ(43,"div",42)(44,"label",45),e._uU(45,"Cadastrado Por:"),e.qZA(),e._UZ(46,"input",46),e.qZA()(),e.TgZ(47,"div",18)(48,"div",47)(49,"label",48),e._uU(50,"Observa\xe7\xf5es: "),e.qZA(),e.TgZ(51,"textarea",49,50),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.obs=a)}),e._uU(53,"                                        "),e.qZA()()(),e.TgZ(54,"div",18)(55,"div",51)(56,"label",52),e._uU(57,"Situa\xe7\xe3o CPF: "),e.qZA(),e._UZ(58,"input",53),e.qZA(),e.TgZ(59,"div",51)(60,"label",54),e._uU(61,"D\xedgito: "),e.qZA(),e._UZ(62,"input",55),e.qZA(),e.TgZ(63,"div",51)(64,"label",56),e._uU(65,"Data Inscri\xe7\xe3o: "),e.qZA(),e._UZ(66,"input",57),e.ALo(67,"date"),e.qZA(),e.TgZ(68,"div",51)(69,"label",58),e._uU(70,"Limite Dispon\xedvel: "),e.qZA(),e._UZ(71,"input",59),e.ALo(72,"currency"),e.qZA(),e.TgZ(73,"div",51)(74,"label",60),e._uU(75,"Limite Concedido: "),e.qZA(),e._UZ(76,"input",61),e.ALo(77,"currency"),e.qZA(),e.TgZ(78,"div",51)(79,"label",62),e._uU(80,"Limite Utilizado: "),e.qZA(),e._UZ(81,"input",63),e.ALo(82,"currency"),e.qZA()(),e.TgZ(83,"div",64)(84,"h6"),e._uU(85,"Dados Excel"),e.qZA()(),e.TgZ(86,"div",18)(87,"div",65)(88,"label",66),e._uU(89,"Data da \xdaltima Atualiza\xe7\xe3o: "),e.qZA(),e._UZ(90,"input",67),e.ALo(91,"date"),e.qZA(),e.TgZ(92,"div",68)(93,"label",69),e._uU(94,"Erro: "),e.qZA(),e._UZ(95,"input",70),e.qZA(),e.TgZ(96,"div",71)(97,"label",72),e._uU(98,"Id Num: "),e.qZA(),e._UZ(99,"input",73),e.qZA(),e.TgZ(100,"div",74)(101,"label",75),e._uU(102,"Status: "),e.qZA(),e._UZ(103,"input",76),e.qZA(),e.TgZ(104,"div",74)(105,"label",77),e._uU(106,"Data Capta\xe7\xe3o: "),e.qZA(),e._UZ(107,"input",78),e.ALo(108,"date"),e.qZA(),e.TgZ(109,"div",74)(110,"label",79),e._uU(111,"Hora Capta\xe7\xe3o: "),e.qZA(),e._UZ(112,"input",80),e.ALo(113,"date"),e.qZA()(),e.TgZ(114,"div",64)(115,"div",81)(116,"h6"),e._uU(117,"Dados BR Consulta"),e.qZA()()(),e.TgZ(118,"div",18)(119,"div",82)(120,"label",83),e._uU(121,"Data da Consulta: "),e.qZA(),e._UZ(122,"input",84),e.ALo(123,"date"),e.qZA(),e.TgZ(124,"div",85)(125,"label",86),e._uU(126,"Erro: "),e.qZA(),e._UZ(127,"input",87),e.qZA(),e.TgZ(128,"div",82)(129,"label",88),e._uU(130,"Id Consulta: "),e.qZA(),e._UZ(131,"input",89),e.qZA(),e.TgZ(132,"div",90)(133,"label",91),e._uU(134,"Status: "),e.qZA(),e._UZ(135,"input",92),e.qZA(),e.TgZ(136,"div",90)(137,"label",93),e._uU(138,"Controle: "),e.qZA(),e._UZ(139,"input",94),e.qZA(),e.TgZ(140,"div",95)(141,"label",96),e._uU(142,"Data Capta\xe7\xe3o: "),e.qZA(),e._UZ(143,"input",97),e.ALo(144,"date"),e.qZA(),e.TgZ(145,"div",95)(146,"label",98),e._uU(147,"Hora Capta\xe7\xe3o: "),e.qZA(),e._UZ(148,"input",99),e.ALo(149,"date"),e.qZA()(),e.TgZ(150,"div",100)(151,"div",101),e.YNc(152,Lt,3,2,"div",102),e.TgZ(153,"button",103),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.YNc(154,Yt,1,0,"span",104),e.TgZ(155,"span"),e._uU(156,"Salvar altera\xe7\xf5es"),e.qZA()()()()()()}if(2&o){const t=e.MAs(2),i=e.MAs(36),a=e.oxw();e.xp6(7),e.Q6J("value",a.objeto.id?a.objeto.id:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.nome?a.objeto.nome:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.cpf?e.xi3(17,42,a.objeto.cpf,"000.000.000-00"):"N/A"),e.xp6(6),e.Q6J("valueInput",a.objeto.dataNascimento)("inputId","dataNascimento")("showErrorMessage",!0)("required",!1)("readonly",a.loadingConsultaApi)("max","hoje"),e.xp6(4),e.Q6J("ngModel",a.objeto.telefone),e.xp6(5),e.Q6J("ngModel",a.objeto.nomeMae),e.xp6(5),e.Q6J("email",!0)("ngModel",a.objeto.email)("pattern",a.emailPattern),e.xp6(2),e.Q6J("ngIf",i.touched&&i.errors),e.xp6(4),e.Q6J("value",a.objeto.dataCadastro?e.xi3(42,45,a.objeto.dataCadastro,"dd/MM/yyyy HH:mm"):"N/A"),e.xp6(5),e.Q6J("value",a.objeto.usuarioCadastroEmail?a.objeto.usuarioCadastroEmail:"N/A"),e.xp6(5),e.Q6J("ngModel",a.objeto.obs)("placeholder",a.objeto.obs?"":"N/A")("rows",a.objeto.obs?3:1),e.xp6(7),e.Q6J("value",a.objeto.situacao?a.objeto.situacao:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.digito?a.objeto.digito:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.dataInscricao?e.xi3(67,48,a.objeto.dataInscricao,"dd/MM/yyyy"):"N/A"),e.xp6(5),e.Q6J("value",e.gM2(72,51,a.objeto.saldoAtual,"BRL","","1.2")),e.xp6(5),e.Q6J("value",e.gM2(77,56,a.limiteConcedido,"BRL","","1.2")),e.xp6(5),e.Q6J("value",e.gM2(82,61,a.limiteUtilizado,"BRL","","1.2")),e.xp6(9),e.Q6J("value",a.objeto.dataAtualizacaoExcel?e.xi3(91,66,a.objeto.dataAtualizacaoExcel,"dd/MM/yyyy HH:mm"):"N/A"),e.xp6(5),e.Q6J("value",a.objeto.excel_Erro?a.objeto.excel_Erro:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.excel_IdNum?a.objeto.excel_IdNum:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.excel_Status?a.objeto.excel_Status:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.excel_Data_Cap?e.xi3(108,69,a.objeto.excel_Data_Cap,"dd/MM/yyyy"):"N/A"),e.xp6(5),e.Q6J("value",a.objeto.excel_Hora_Cap?e.xi3(113,72,a.objeto.excel_Hora_Cap,"HH:mm"):"N/A"),e.xp6(10),e.Q6J("value",a.objeto.dataAtualizacaoBRConsulta?e.xi3(123,75,a.objeto.dataAtualizacaoBRConsulta,"dd/MM/yyyy HH:mm"):"N/A"),e.xp6(5),e.Q6J("value",a.objeto.brConsulta_Erro?a.objeto.brConsulta_Erro:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.brConsulta_Id_Consulta?a.objeto.brConsulta_Id_Consulta:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.brConsulta_Status?a.objeto.brConsulta_Status:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.brConsulta_Controle?a.objeto.brConsulta_Controle:"N/A"),e.xp6(4),e.Q6J("value",a.objeto.brConsulta_Data_Cap?e.xi3(144,78,a.objeto.brConsulta_Data_Cap,"dd/MM/yyyy"):"N/A"),e.xp6(5),e.Q6J("value",a.objeto.brConsulta_Hora_Cap?e.xi3(149,81,a.objeto.brConsulta_Hora_Cap,"HH:mm"):"N/A"),e.xp6(4),e.Q6J("ngIf",a.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||a.loading||a.loadingConsultaApi),e.xp6(1),e.Q6J("ngIf",a.loading||a.loadingConsultaApi)}}function Ht(o,s){if(1&o&&(e._UZ(0,"fa-icon",3),e.TgZ(1,"span"),e._uU(2,"Saldo"),e.qZA()),2&o){const t=e.oxw();e.Q6J("icon",t.faDollarSign)}}function Rt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.erroSaldo)}}function Pt(o,s){if(1&o&&e._UZ(0,"app-saldo",109),2&o){const t=e.oxw();e.Q6J("saldos",t.saldos)("loading",t.loadingSaldo)("limiteConcedido",t.limiteConcedido)("lastIdDelete",t.lastIdDeleteSaldo)}}function kt(o,s){if(1&o&&(e._UZ(0,"fa-icon",3),e.TgZ(1,"span"),e._uU(2,"Opera\xe7\xf5es"),e.qZA()),2&o){const t=e.oxw();e.Q6J("icon",t.faDollarSign)}}function Gt(o,s){if(1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.erroOperacoes)}}function zt(o,s){if(1&o&&e._UZ(0,"app-operacao",110),2&o){const t=e.oxw();e.Q6J("list",t.operacoes)("loading",t.loadingOperacoes)("limiteUtilizado",t.limiteUtilizado)}}let Bt=(()=>{class o{constructor(t,i,a,n,r,c,d,y){this.activatedRoute=t,this.pessoaService=i,this.pessoaSaldoService=a,this.pessoaOperacaoService=n,this.crypto=r,this.datepipe=c,this.toastr=d,this.router=y,this.faIdCard=g.Ukp,this.faChevronCircleLeft=g.jio,this.faDollarSign=g.egO,this.erro="",this.loading=!1,this.subscription=[],this.activeIndex=0,this.objeto=new j.Zo,this.loadingPessoa=!0,this.erroPessoa="",this.saldos=[],this.loadingSaldo=!0,this.erroSaldo="",this.operacoes=[],this.loadingOperacoes=!0,this.erroOperacoes="",this.limiteConcedido=0,this.limiteUtilizado=0,this.lastIdDeleteSaldo=0,this.loadingConsultaApi=!1,this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,this.activeIndex=parseInt(localStorage.getItem("tabIndex")??"0"),this.tabChanged(this.activeIndex);var w=this.activatedRoute.params.subscribe(b=>{b.pessoa_id?(this.loadingPessoa=!0,this.loadingSaldo=!0,this.objeto.id=this.crypto.decrypt(b.pessoa_id),(0,p.n)(this.pessoaService.get(this.objeto.id)).then(_=>{_.cpf=_.cpf.toString().padStart(11,"0"),this.objeto=_,this.loadingPessoa=!1;var A=this.pessoaService.object.subscribe(S=>this.objeto=S);this.subscription.push(A)}).catch(_=>{this.erroPessoa=(0,x.b)(_),this.loadingPessoa=!1}),(0,p.n)(this.pessoaSaldoService.getList(this.objeto.id)).then(_=>{this.saldos=_;var A=this.pessoaSaldoService.list.subscribe(S=>{this.saldos=S.map(f=>(f.dataConcessao=this.datepipe.transform(f.dataConcessao,"dd/MM/yyyy HH:mm","pt-BR"),f.idEncrypted=this.crypto.encrypt(f.id)??"",f)).sort((f,U)=>f.id-U.id),this.lastIdDeleteSaldo=S.length>0?S[S.length-1].id:0,this.calculaLimiteConcedido()});this.subscription.push(A),this.loadingSaldo=!1}).catch(_=>{this.erroSaldo=(0,x.b)(_),this.loadingSaldo=!1}),(0,p.n)(this.pessoaOperacaoService.getListByPessoaId(this.objeto.id)).then(_=>{this.operacoes=_;var A=this.pessoaOperacaoService.listOperacaoPorPessoa.subscribe(S=>{this.operacoes=Object.assign([],S),this.calculaLimiteUtilizado()});this.subscription.push(A),this.loadingOperacoes=!1}).catch(_=>{this.erroOperacoes=(0,x.b)(_),this.loadingOperacoes=!1})):this.router.navigate(["../../"],{relativeTo:this.activatedRoute})});this.subscription.push(w)}ngAfterViewInit(){}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}tabChanged(t){(0,Xe.Z)(t)}calculaLimiteConcedido(){this.limiteConcedido=this.saldos.length>0?this.saldos.map(t=>t.valorConcedido).reduce((t,i)=>t+i):0}calculaLimiteUtilizado(){var t=this.operacoes.filter(i=>"LIBERADO"==i.statusOperacao.toUpperCase());this.limiteUtilizado=t.length>0?t.map(i=>i.valorOperacao).reduce((i,a)=>i+a):0}consultaPessoa(){!this.objeto.cpf||!this.objeto.dataNascimento||(this.loadingConsultaApi=!0,this.erro="",(0,p.n)(this.pessoaService.getPessoa(this.objeto.cpf,this.objeto.dataNascimento)).then(t=>{var i;this.loadingConsultaApi=!1;try{i=JSON.parse(JSON.parse(JSON.stringify(t.retorno)))}catch{i=t.retorno}if("object"==typeof i){if(i.ERRO&&""!=i.ERRO||"ERRO"==i.RETORNO)this.objeto.brConsulta_Id_Consulta=i.ID_CONSULTA,this.objeto.brConsulta_Erro=i.ERRO,this.erro=i.ERRO,this.toastr.error(i.ERRO);else if(!i.ERRO){try{this.objeto.dataNascimento=this.formataData(i.DATA_NASC).substring(0,10)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Nascimento. (${i.DATA_NASC}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Nascimento.")}try{this.objeto.brConsulta_Data_Cap=this.formataData(i.DATA_CAP)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Capta\xe7\xe3o. (${i.DATA_CAP}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Capta\xe7\xe3o.")}try{this.objeto.brConsulta_Hora_Cap=this.formataData(i.DATA_CAP,i.HORA_CAP)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Hora de Capta\xe7\xe3o. (${i.HORA_CAP}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Hora de Capta\xe7\xe3o.")}try{this.objeto.dataInscricao=this.formataData(i.DATA_INSCRICAO)}catch{this.erro+=`N\xe3o foi poss\xedvel ler Data de Inscri\xe7\xe3o. (${i.DATA_INSCRICAO}) \n`,this.toastr.error("N\xe3o foi poss\xedvel ler Data de Inscri\xe7\xe3o.")}this.objeto.nome=i.NOME,this.objeto.digito=i.DIGITO,this.objeto.brConsulta_Controle=i.CONTROLE,this.objeto.brConsulta_Id_Consulta=i.ID_CONSULTA,this.objeto.situacao=i.SITUACAO,this.objeto.brConsulta_Status=i.STATUS,this.objeto.brConsulta_Erro=""}this.objeto.dataAtualizacaoBRConsulta=(new Date).toISOString()}else this.objeto.brConsulta_Erro=t.retorno,this.erro=t.retorno,this.toastr.error(t.retorno),this.objeto.dataAtualizacaoBRConsulta=(new Date).toISOString()}).catch(t=>{this.loadingConsultaApi=!1,this.erro=(0,x.b)(t)}))}formataData(t,i,a){var n=0,r=0,c=0,d=t.split("/"),y=parseInt(d[2]),w=parseInt(d[1])-1,b=parseInt(d[0]);if(i){var _=i.split(":");n=parseInt(_[0]),r=parseInt(_[1]),c=parseInt(_[2])}return new Date(y,w,b,n,r,c).toISOString()}send(){this.loading=!0,this.erro="",(0,p.n)(this.pessoaService.post(this.objeto)).then(t=>{this.loading=!1,t.sucesso?(0,p.n)(this.pessoaService.getList()):this.erro=t.mensagem}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(I.N),e.Y36(Y),e.Y36(O.m),e.Y36(N.w),e.Y36(u.uU),e.Y36(E._W),e.Y36(h.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-details"]],decls:31,vars:9,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["routerLink","./../../",1,"link","text-dark"],[1,"me-2"],[1,"page__body"],[1,"content"],[3,"activeIndex","activeIndexChange"],["pTemplate","header"],[1,"px-4"],[4,"ngIf"],[1,"px-2"],[3,"saldos","loading","limiteConcedido","lastIdDelete",4,"ngIf"],[3,"list","loading","limiteUtilizado",4,"ngIf"],["form","ngForm"],[1,"row"],[1,"form-group","col-xl-2","col-lg-2","col-md-2","col-sm-2","col-12"],["for","id",2,"white-space","nowrap"],["type","text","name","id","id","id","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],["for","nome",2,"white-space","nowrap"],["type","text","name","nome","id","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-2","col-lg-2","col-md-3","col-sm-3","col-6"],["for","cpf",2,"white-space","nowrap"],["type","text","name","cpf","id","cpf","ngModel","","readonly","",1,"form-control",3,"value"],["cpf","ngModel"],["for","dataNascimento",2,"white-space","nowrap"],["type","date",3,"valueInput","inputId","showErrorMessage","required","readonly","max","valueChanges"],["for","telefone",2,"white-space","nowrap"],["type","text","name","telefone","id","telefone",1,"form-control",3,"ngModel","ngModelChange"],["telefone","ngModel"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-6"],["for","nomeMae",2,"white-space","nowrap"],["type","text","name","nomeMae","id","nomeMae",1,"form-control",3,"ngModel","ngModelChange"],["nomeMae","ngModel"],[1,"form-group","col-xl-4","col-lg-4","col-md-5","col-sm-5","col-12"],["for","email",2,"white-space","nowrap"],["type","email","name","email","id","email",1,"form-control",3,"email","ngModel","pattern","ngModelChange"],["email","ngModel"],[1,"form-group","col-xl-2","col-lg-2","col-md-6","col-sm-6","col-12"],["for","dataCadastro",2,"white-space","nowrap"],["type","text","name","dataCadastro","id","dataCadastro","readonly","",1,"form-control",3,"value"],["for","usuarioCadastroEmail",2,"white-space","nowrap"],["type","text","name","usuarioCadastroEmail","id","usuarioCadastroEmail","readonly","",1,"form-control",3,"value"],[1,"form-group","col-12"],["for","obs",2,"white-space","nowrap"],["name","obs","id","obs",1,"form-control",3,"ngModel","placeholder","rows","ngModelChange"],["obs","ngModel"],[1,"form-group","col-xl-2","col-lg-2","col-md-4","col-sm-4","col-6"],["for","situacao",2,"white-space","nowrap"],["name","situacao","id","situacao","readonly","",1,"form-control",3,"value"],["for","digito",2,"white-space","nowrap"],["name","digito","id","digito","readonly","",1,"form-control",3,"value"],["for","dataInscricao",2,"white-space","nowrap"],["name","dataInscricao","id","dataInscricao","readonly","",1,"form-control",3,"value"],["for","saldoAtual",2,"white-space","nowrap"],["name","saldoAtual","id","saldoAtual","readonly","",1,"form-control",3,"value"],["for","limiteConcedido",2,"white-space","nowrap"],["name","limiteConcedido","id","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado",2,"white-space","nowrap"],["name","limiteUtilizado","id","limiteUtilizado","readonly","",1,"form-control",3,"value"],[1,"row","mt-2","mb-2","border-top","pt-2"],[1,"form-group","col-xl-2","col-lg-3","col-md-4","col-sm-4","col-12"],["for","dataAtualizacaoExcel",2,"white-space","nowrap"],["name","dataAtualizacaoExcel","id","dataAtualizacaoExcel","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-2","col-lg-6","col-md-8","col-sm-8","col-12"],["for","excel_Erro",2,"white-space","nowrap"],["name","excel_Erro","id","excel_Erro","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-2","col-lg-3","col-md-6","col-sm-6","col-6"],["for","excel_IdNum",2,"white-space","nowrap"],["name","excel_IdNum","id","excel_IdNum","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-2","col-lg-4","col-md-6","col-sm-6","col-6"],["for","excel_Status",2,"white-space","nowrap"],["name","excel_Status","id","excel_Status","readonly","",1,"form-control",3,"value"],["for","excel_Data_Cap",2,"white-space","nowrap"],["name","excel_Data_Cap","id","excel_Data_Cap","readonly","",1,"form-control",3,"value"],["for","excel_Hora_Cap",2,"white-space","nowrap"],["name","excel_Hora_Cap","id","excel_Hora_Cap","readonly","",1,"form-control",3,"value"],[1,"d-flex","align-items-center"],[1,"form-group","col-xl-3","col-lg-3","col-md-4","col-sm-4","col-12"],["for","dataAtualizacaoBRConsulta",2,"white-space","nowrap"],["name","dataAtualizacaoBRConsulta","id","dataAtualizacaoBRConsulta","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-6","col-lg-6","col-md-8","col-sm-8","col-12"],["for","brConsulta_Erro",2,"white-space","nowrap"],["name","brConsulta_Erro","id","brConsulta_Erro","readonly","",1,"form-control",3,"value"],["for","brConsulta_Id_Consulta",2,"white-space","nowrap"],["name","brConsulta_Id_Consulta","id","brConsulta_Id_Consulta","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-3","col-lg-3","col-md-4","col-sm-4","col-6"],["for","brConsulta_Status",2,"white-space","nowrap"],["name","brConsulta_Status","id","brConsulta_Status","readonly","",1,"form-control",3,"value"],["for","brConsulta_Controle",2,"white-space","nowrap"],["name","brConsulta_Controle","id","brConsulta_Controle","readonly","",1,"form-control",3,"value"],[1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-6","col-6"],["for","brConsulta_Data_Cap",2,"white-space","nowrap"],["name","brConsulta_Data_Cap","id","brConsulta_Data_Cap","readonly","",1,"form-control",3,"value"],["for","brConsulta_Hora_Cap",2,"white-space","nowrap"],["name","brConsulta_Hora_Cap","id","brConsulta_Hora_Cap","readonly","",1,"form-control",3,"value"],[1,"row","mt-1","mt-2"],[1,"d-flex","align-items-start","justify-content-end"],["class","col-lg-10 col-md-8 col-12 mb-2 me-3 px-0",4,"ngIf"],[1,"btn","btn-primary","ms-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"col-lg-10","col-md-8","col-12","mb-2","me-3","px-0"],[1,"spinner-border","spinner-border-sm","me-1"],[3,"saldos","loading","limiteConcedido","lastIdDelete"],[3,"list","loading","limiteUtilizado"]],template:function(i,a){1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Detalhes"),e.qZA(),e.TgZ(7,"a",6)(8,"span",7),e._UZ(9,"fa-icon",3),e.qZA(),e.TgZ(10,"span"),e._uU(11,"Voltar"),e.qZA()()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"p-tabView",10),e.NdJ("activeIndexChange",function(r){return a.tabChanged(r)}),e.TgZ(15,"p-tabPanel"),e.YNc(16,Ut,3,1,"ng-template",11),e.TgZ(17,"div",12),e.YNc(18,qt,3,1,"div",13),e.YNc(19,Ft,157,84,"div",13),e.qZA()(),e.TgZ(20,"p-tabPanel"),e.YNc(21,Ht,3,1,"ng-template",11),e.TgZ(22,"div",14),e.YNc(23,Rt,3,1,"div",13),e.YNc(24,Pt,1,4,"app-saldo",15),e.qZA()(),e.TgZ(25,"p-tabPanel"),e.YNc(26,kt,3,1,"ng-template",11),e.TgZ(27,"div",14),e.YNc(28,Gt,3,1,"div",13),e.YNc(29,zt,1,3,"app-operacao",16),e.qZA()()()()()(),e._UZ(30,"router-outlet")),2&i&&(e.xp6(3),e.Q6J("icon",a.faIdCard),e.xp6(6),e.Q6J("icon",a.faChevronCircleLeft),e.xp6(5),e.Q6J("activeIndex",a.activeIndex),e.xp6(4),e.Q6J("ngIf",a.erroPessoa),e.xp6(1),e.Q6J("ngIf",!a.erroPessoa),e.xp6(4),e.Q6J("ngIf",a.erroSaldo),e.xp6(1),e.Q6J("ngIf",!a.erroSaldo),e.xp6(4),e.Q6J("ngIf",a.erroOperacoes),e.xp6(1),e.Q6J("ngIf",!a.erroOperacoes))},dependencies:[u.O5,h.lC,h.rH,T.jx,M.BN,m._Y,m.Fj,m.JJ,m.JL,m.c5,m.on,m.On,m.F,k.K,G.xf,G.x4,St,Et,u.H9,u.uU,D.AW],styles:[".form-control[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px}.p-tabview[_ngcontent-%COMP%]{display:flex;flex-flow:column;width:100%}  .p-tabview-nav-container{flex:1 0 20%;display:flex}  .p-tabview-panels{flex:1 0 80%;border:1px var(--neutral) solid;padding:15px 0;background-color:#f7f7f7}  .p-tabview-nav{display:flex;flex-flow:row;margin:0;padding:0;width:100%}  .p-tabview-nav li{background-color:var(--neutral);display:flex;align-items:center}  .p-tabview-nav li a{color:#fff;line-height:1;height:100%;width:100%;display:flex;padding:10px;background-color:var(--neutral)}  .p-tabview-nav li a>*:not(span){margin-right:10px}  .p-tabview-nav li.p-tabview-ink-bar{display:none}  .p-tabview-nav li:nth-child(2n){background:var(--neutral)}  .p-tabview-nav li a:hover{color:#fff;background-color:var(--neutral)}  .p-tabview-nav li.p-highlight a{background-color:var(--neutral)}"]})}return o})();const Kt=["template"],$t=["icon"];function Vt(o,s){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faTrash)}}function Wt(o,s){if(1&o&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.erro)}}function Xt(o,s){1&o&&e._UZ(0,"span",9)}function eo(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,Wt,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.YNc(7,Xt,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.erro),e.xp6(2),e.Q6J("ngIf",t.loading)}}let to=(()=>{class o{constructor(t,i,a,n,r,c){this.activatedRoute=t,this.modalService=i,this.pessoaSaldoService=a,this.pessoaService=n,this.crypto=r,this.toastr=c,this.faTrash=g.$aW,this.id=0,this.pessoa_Id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new v.u}ngAfterViewInit(){this.modal.title="Excluir Saldo",this.modal.template=this.template,this.modal.style={"max-width":"500px"},this.modal.routerBack=["../../../"],this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.activatedRoute=this.activatedRoute,this.modal.icon=this.icon;var t=this.activatedRoute.params.subscribe(c=>{c.saldo_id?this.id=this.crypto.decrypt(c.saldo_id):this.voltar()});this.subscription.push(t);var i=this.activatedRoute.parent?.snapshot.paramMap.has("pessoa_id"),a=this.activatedRoute.snapshot.paramMap.has("pessoa_id"),n=i?this.activatedRoute.parent?.params:a?this.activatedRoute.params:this.voltar();if(n){var r=n.subscribe(c=>{c.pessoa_id?(this.pessoa_Id=this.crypto.decrypt(c.pessoa_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)):this.voltar()});this.subscription.push(r)}else this.voltar()}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,p.n)(this.pessoaSaldoService.delete(this.id)).then(t=>{this.loading=!1,t.sucesso?(t.objeto?((0,C.fb)(this.pessoaService,t.objeto.pessoa),(0,C.Od)(this.pessoaSaldoService,t.objeto.saldo)):((0,p.n)(this.pessoaSaldoService.getList(this.pessoa_Id)),(0,p.n)(this.pessoaService.getList())),(0,p.n)(this.pessoaService.get(this.pessoa_Id)),this.voltar()):this.erro=t.mensagem??"N\xe3o foi poss\xedvel excluir saldo."}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(Y),e.Y36(I.N),e.Y36(N.w),e.Y36(E._W))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-saldo"]],viewQuery:function(i,a){if(1&i&&(e.Gf(Kt,5),e.Gf($t,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,Vt,1,1,"ng-template",null,0,e.W1O),e.YNc(2,eo,10,2,"ng-template",null,1,e.W1O))},dependencies:[u.O5,M.BN]})}return o})();var ie=l(6044);const oo=["template"],ao=["icon"];function io(o,s){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faDollarSign)}}function no(o,s){if(1&o&&(e.TgZ(0,"h6",15),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE("",t.pessoa.nome," - ",t.pessoa.cpf,"")}}function so(o,s){if(1&o&&(e.TgZ(0,"p",9),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.erro)}}function ro(o,s){if(1&o&&(e.TgZ(0,"div",16),e.YNc(1,so,2,1,"p",17),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.erro)}}function lo(o,s){1&o&&e._UZ(0,"span",18)}function co(o,s){if(1&o){const t=e.EpF();e.YNc(0,no,2,2,"h6",3),e.TgZ(1,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.TgZ(3,"div",6)(4,"div",7)(5,"label",8),e._uU(6,"Valor Concedido: "),e.TgZ(7,"span",9),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"app-input-number",10),e.NdJ("valueChanges",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.valorConcedido=a)}),e.qZA()()(),e.TgZ(10,"div",11),e.YNc(11,ro,2,1,"div",12),e.TgZ(12,"button",13),e.YNc(13,lo,1,0,"span",14),e.TgZ(14,"span"),e._uU(15,"Salvar"),e.qZA()()()()}if(2&o){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.pessoa),e.xp6(9),e.Q6J("valueInput",i.objeto.valorConcedido)("inputId","valorConcedido")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("min",.1)("max",999999999)("autoReplaceValue",!1)("leadZero",!0),e.xp6(2),e.Q6J("ngIf",i.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}}let ne=(()=>{class o{constructor(t,i,a,n,r,c){this.activatedRoute=t,this.modalService=i,this.pessoaOperacaoService=a,this.pessoaSaldoService=n,this.pessoaService=r,this.crypto=c,this.faDollarSign=g.egO,this.objeto=new it,this.erro="",this.loading=!1,this.subscription=[],this.modal=new v.u}ngAfterViewInit(){this.modal.title="Cadastrar Saldo",this.modal.template=this.template,this.modal.style={"max-width":"500px"},this.modal.routerBack=["../../"],this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.icon=this.icon;var t=this.activatedRoute.parent?.snapshot.paramMap.has("pessoa_id"),i=this.activatedRoute.snapshot.paramMap.has("pessoa_id"),a=t?this.activatedRoute.parent?.params:i?this.activatedRoute.params:this.voltar();if(a){var n=a.subscribe(r=>{r.pessoa_id?(this.objeto.pessoa_Id=this.crypto.decrypt(r.pessoa_id),0==this.pessoaService.list.value.length?(0,p.n)(this.pessoaService.getList()).then(c=>{this.getPessoa()}):this.getPessoa(),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"create saldo")},200)):this.voltar()});this.subscription.push(n)}}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}getPessoa(){var t=this.pessoaService.list.value.find(i=>i.id==this.objeto.pessoa_Id);return this.pessoa=t,t}send(){this.loading=!0,this.erro="",(0,p.n)(this.pessoaSaldoService.create(this.objeto)).then(t=>{this.loading=!1,t.sucesso?(t.objeto?((0,C.fb)(this.pessoaService,t.objeto.pessoa),(0,C.fb)(this.pessoaSaldoService,t.objeto.saldo)):((0,p.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,p.n)(this.pessoaService.getList())),(0,p.n)(this.pessoaService.get(this.objeto.pessoa_Id)),this.voltar()):this.erro=t.mensagem??"N\xe3o foi poss\xedvel atribuir saldo."}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(O.m),e.Y36(Y),e.Y36(I.N),e.Y36(N.w))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-saldo"]],viewQuery:function(i,a){if(1&i&&(e.Gf(oo,5),e.Gf(ao,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],["class","my-3","style","color: var(--complementar);",4,"ngIf"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"form-row"],[1,"form-group","col-12"],["for","valorConcedido"],[1,"text-danger"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","min","max","autoReplaceValue","leadZero","valueChanges"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"my-3",2,"color","var(--complementar)"],[1,"m-0","me-3"],["class","text-danger",4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,io,1,1,"ng-template",null,0,e.W1O),e.YNc(2,co,16,14,"ng-template",null,1,e.W1O))},dependencies:[u.O5,M.BN,m._Y,m.JL,m.F,ie.l]})}return o})();var po=l(1433);const mo=["template"],uo=["icon"];function _o(o,s){1&o&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),e.qZA())}function ho(o,s){if(1&o&&(e.TgZ(0,"h6",53),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE("",t.pessoa.nome," - ",t.pessoa.cpf,"")}}function go(o,s){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function fo(o,s){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function vo(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,fo,2,0,"p",54),e.qZA()),2&o){e.oxw();const t=e.MAs(23);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function xo(o,s){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Valor inv\xe1lido."),e.qZA())}function bo(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,xo,2,0,"p",54),e.qZA()),2&o){e.oxw();const t=e.MAs(40);e.xp6(1),e.Q6J("ngIf",t.errors.mask)}}function Co(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",55)(1,"div",56)(2,"span",57),e._uU(3),e.qZA(),e.TgZ(4,"span",58),e._uU(5),e.qZA(),e.TgZ(6,"span",59),e._uU(7),e.qZA()(),e.TgZ(8,"div",60)(9,"a",61),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.moedaEditar(n))}),e._UZ(10,"fa-icon",62),e.qZA(),e.TgZ(11,"a",61),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.moedaExcluir(n.id))}),e._UZ(12,"fa-icon",62),e.qZA()()()}if(2&o){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("title",t.nome),e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.nome),e.xp6(2),e.Oqu(t.simbolo),e.xp6(3),e.Q6J("icon",i.faEdit),e.xp6(2),e.Q6J("icon",i.faTrash)}}const To=function(){return["./moeda"]};function Ao(o,s){1&o&&(e.TgZ(0,"div",63),e._uU(1," N\xe3o encontrou? Clique para "),e.TgZ(2,"a",64),e._uU(3,"adicionar"),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("routerLink",e.DdM(1,To)))}function Zo(o,s){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function yo(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Zo,2,0,"p",54),e.qZA()),2&o){e.oxw();const t=e.MAs(56);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function So(o,s){if(1&o&&e._UZ(0,"p",67),2&o){const t=e.oxw(3);e.Q6J("innerHTML",t.erro,e.oJD)}}function Io(o,s){1&o&&(e.TgZ(0,"p",14),e._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),e.qZA())}function Mo(o,s){if(1&o&&(e.TgZ(0,"div",65),e.YNc(1,So,1,1,"p",66),e.YNc(2,Io,2,0,"p",54),e.qZA()),2&o){e.oxw();const t=e.MAs(2),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.erro),e.xp6(1),e.Q6J("ngIf",t.invalid&&!i.erro)}}function wo(o,s){1&o&&e._UZ(0,"span",68)}const Oo=function(){return["nome","codigo","simbolo"]};function No(o,s){if(1&o){const t=e.EpF();e.YNc(0,ho,2,2,"h6",7),e.TgZ(1,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.TgZ(3,"div",10)(4,"div",11)(5,"div",12)(6,"label",13),e._uU(7,"Data da Transa\xe7\xe3o: "),e.TgZ(8,"span",14),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"app-input-date",15),e.NdJ("valueChanges",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.dataTransacao=a)}),e.qZA()(),e.TgZ(11,"div",12)(12,"label",16),e._uU(13,"Valor: "),e.TgZ(14,"span",14),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"app-input-number",17),e.NdJ("valueChanges",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.valor=a)}),e.qZA()(),e.TgZ(17,"div",12)(18,"label",18),e._uU(19,"Status: "),e.TgZ(20,"span",14),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"select",19,20),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.operacao_Status_Id=a)}),e.TgZ(24,"option",21),e._uU(25,"Selecione"),e.qZA(),e.YNc(26,go,2,2,"option",22),e.qZA(),e.YNc(27,vo,2,1,"div",23),e.qZA()(),e.TgZ(28,"div",11)(29,"div",24)(30,"label",25),e._uU(31,"Data de cadastro no sistema: "),e.TgZ(32,"span",14),e._uU(33,"*"),e.qZA()(),e._UZ(34,"input",26),e.ALo(35,"date"),e.qZA(),e.TgZ(36,"div",27)(37,"label",28),e._uU(38,"N\xba Opera\xe7\xe3o: "),e.qZA(),e.TgZ(39,"input",29,30),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.num_Op=a)}),e.qZA(),e.YNc(41,bo,2,1,"div",23),e.qZA(),e.TgZ(42,"div",27)(43,"label",31),e._uU(44,"Tipo de Transa\xe7\xe3o: "),e.qZA(),e.TgZ(45,"input",32,33),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.tipoTransacao=a)}),e.qZA()(),e.TgZ(47,"div",34)(48,"label",35),e._uU(49,"Forma de Pagamento: "),e.qZA(),e.TgZ(50,"input",36,37),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.formaPagamento=a)}),e.qZA()(),e.TgZ(52,"div",34)(53,"label",38),e._uU(54,"Moeda: "),e.qZA(),e.TgZ(55,"p-dropdown",39,40),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.moeda=a)}),e.YNc(57,Co,13,6,"ng-template",41),e.YNc(58,Ao,4,2,"ng-template",42),e.qZA(),e.YNc(59,yo,2,1,"div",23),e.qZA(),e.TgZ(60,"div",34)(61,"label",43),e._uU(62,"Nome do Comprador: "),e.qZA(),e.TgZ(63,"input",44,45),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.nomeComprador=a)}),e.qZA()(),e.TgZ(65,"div",34)(66,"label",46),e._uU(67,"Pa\xeds do Comprador: "),e.qZA(),e.TgZ(68,"input",47,48),e.NdJ("ngModelChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.objeto.paisComprador=a)}),e.qZA()()()(),e.TgZ(70,"div",49),e.YNc(71,Mo,3,2,"div",50),e.TgZ(72,"button",51),e.YNc(73,wo,1,0,"span",52),e.TgZ(74,"span"),e._uU(75,"Salvar"),e.qZA()()()()}if(2&o){const t=e.MAs(2),i=e.MAs(23),a=e.MAs(40),n=e.MAs(56),r=e.oxw();e.Q6J("ngIf",r.pessoa),e.xp6(10),e.Q6J("valueInput",r.objeto.dataTransacao)("inputId","dataTransacao")("showErrorMessage",!0)("required",!0),e.xp6(6),e.Q6J("valueInput",r.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1)("min",.1)("max",999999999)("leadZero",!0),e.xp6(6),e.ekj("form-control-loading",r.loadingStatus),e.Q6J("ngModel",r.objeto.operacao_Status_Id),e.xp6(2),e.Q6J("ngValue",void 0),e.xp6(2),e.Q6J("ngForOf",r.status),e.xp6(1),e.Q6J("ngIf",i.touched&&i.errors),e.xp6(7),e.Q6J("value",e.xi3(35,42,r.objeto.dataCadastro,"dd/MM/yyyy HH:mm")),e.xp6(5),e.Q6J("ngModel",r.objeto.num_Op),e.xp6(2),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(4),e.Q6J("ngModel",r.objeto.tipoTransacao),e.xp6(5),e.Q6J("ngModel",r.objeto.formaPagamento),e.xp6(5),e.Q6J("options",r.moedas)("ngModel",r.objeto.moeda)("styleClass","form-control "+(r.loadingMoedas?"form-control-loading":""))("showClear",!0)("filter",!0)("filterFields",e.DdM(45,Oo))("showClear",!0)("virtualScroll",!0)("virtualScrollItemSize",50)("scrollHeight","150px"),e.xp6(4),e.Q6J("ngIf",n.touched&&n.errors),e.xp6(4),e.Q6J("ngModel",r.objeto.nomeComprador),e.xp6(5),e.Q6J("ngModel",r.objeto.paisComprador),e.xp6(3),e.Q6J("ngIf",r.erro||t.invalid),e.xp6(1),e.Q6J("disabled",t.invalid||r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}}let z=(()=>{class o{constructor(t,i,a,n,r,c,d,y){this.activatedRoute=t,this.modalService=i,this.pessoaService=a,this.pessoaOperacaoService=n,this.crypto=r,this.datepipe=c,this.router=d,this.moedaService=y,this.faEdit=g.Xcf,this.faTrash=g.$aW,this.objeto=new F.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.isEditPage=!1,this.modal=new v.u,this.moedas=[],this.loadingMoedas=!1,(0,p.n)(this.pessoaOperacaoService.getStatus()).then(b=>{this.loadingStatus=!1,this.status=b}),(0,p.n)(this.moedaService.getList()).then(b=>this.moedas=b).finally(()=>this.loadingMoedas=!1);var w=this.moedaService.list.subscribe(b=>this.moedas=b);this.subscription.push(w)}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"800px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"];var t=this.activatedRoute.parent?.snapshot.paramMap.has("pessoa_id"),i=this.activatedRoute.snapshot.paramMap.has("pessoa_id");if(t||i){var a=t?this.activatedRoute.parent?.params:i?this.activatedRoute.params:void 0;if(a){var n=a.subscribe(c=>{c.pessoa_id?(this.objeto.pessoa_Id=this.crypto.decrypt(c.pessoa_id),0==this.pessoaService.list.value.length?(0,p.n)(this.pessoaService.getList()).then(d=>{this.getPessoa()}):this.getPessoa()):this.voltar()});this.subscription.push(n)}n=this.activatedRoute.params.subscribe(r=>{r.operacao_id?(this.objeto.id=this.crypto.decrypt(r.operacao_id),this.modal.title="Editar Opera\xe7\xe3o",this.modal.routerBack=["../../../"],this.isEditPage=!0,(0,p.n)(this.pessoaOperacaoService.get(this.objeto.id)).then(d=>{this.loading=!1,d.dataCadastro=this.datepipe.transform(d.dataCadastro,"yyyy-MM-ddTHH:mm"),d.dataTransacao=this.datepipe.transform(d.dataTransacao,"yyyy-MM-dd"),d.num_Op=d.num_Op?d.num_Op.toString().padStart(4,"0"):"",this.objeto=d,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)}).catch(d=>{this.loading=!1,this.voltar()})):(this.modal.title="Cadastrar Opera\xe7\xe3o",this.modal.routerBack=["../../"],this.isEditPage=!1,this.objeto.dataCadastro=this.datepipe.transform(this.objeto.dataCadastro,"yyyy-MM-ddTHH:mm"),this.objeto.dataTransacao=this.datepipe.transform(this.objeto.dataTransacao,"yyyy-MM-dd"),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200))}),this.subscription.push(n)}else this.voltar()}getPessoa(){var t=this.pessoaService.list.value.find(i=>i.id==this.objeto.pessoa_Id);return this.pessoa=t,t}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}moedaEditar(t){var i=this.crypto.encrypt(t.id);this.router.navigate(["moeda",i],{relativeTo:this.activatedRoute})}moedaExcluir(t){var i=this.crypto.encrypt(t);this.router.navigate(["moeda","excluir",i],{relativeTo:this.activatedRoute})}request(){return(0,p.n)(0==this.objeto.id?this.pessoaOperacaoService.create(this.objeto):this.pessoaOperacaoService.edit(this.objeto))}send(){this.loading=!0,this.erro="",this.request().then(t=>{this.loading=!1,t.sucesso?(t.objeto?((0,C.fb)(this.pessoaService,t.objeto.pessoa),(0,C.fb)(this.pessoaOperacaoService,t.objeto.operacao,"listOperacaoPorPessoa")):((0,p.n)(this.pessoaOperacaoService.getListByPessoaId(this.objeto.pessoa_Id)),(0,p.n)(this.pessoaOperacaoService.getList()),(0,p.n)(this.pessoaService.getList())),(0,p.n)(this.pessoaService.get(this.objeto.pessoa_Id)),this.voltar()):this.erro=t.mensagem??`N\xe3o foi poss\xedvel ${this.isEditPage?"editar":"cadastrar"} opera\xe7\xe3o.`}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(I.N),e.Y36(O.m),e.Y36(N.w),e.Y36(u.uU),e.Y36(h.F0),e.Y36(po.g))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-form-operacao"]],viewQuery:function(i,a){if(1&i&&(e.Gf(mo,5),e.Gf(uo,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],["class","my-3","style","color: var(--complementar);",4,"ngIf"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],["for","dataTransacao"],[1,"text-danger"],["type","date",3,"valueInput","inputId","showErrorMessage","required","valueChanges"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","min","max","leadZero","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-12","col-12"],["for","dataCadastro"],["type","text","name","dataCadastro","id","dataCadastro","disabled","",1,"form-control",3,"value"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-6","col-12"],["for","num_Op"],["name","num_Op","id","num_Op","mask","0000",1,"form-control",3,"ngModel","ngModelChange"],["num_Op","ngModel"],["for","tipoTransacao"],["name","tipoTransacao","id","tipoTransacao",1,"form-control",3,"ngModel","ngModelChange"],["tipoTransacao","ngModel"],[1,"form-group","col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],["for","formaPagamento"],["name","formaPagamento","id","formaPagamento",1,"form-control",3,"ngModel","ngModelChange"],["formaPagamento","ngModel"],["for","moeda"],["name","moeda","inputId","moeda","optionLabel","codigo","optionValue","codigo","placeholder","Selecione uma moeda","appendTo","body","appendTo","body",3,"options","ngModel","styleClass","showClear","filter","filterFields","virtualScroll","virtualScrollItemSize","scrollHeight","ngModelChange"],["moeda","ngModel"],["pTemplate","item"],["pTemplate","footer"],["for","nomeComprador"],["name","nomeComprador","id","nomeComprador",1,"form-control",3,"ngModel","ngModelChange"],["nomeComprador","ngModel"],["for","paisComprador"],["name","paisComprador","id","paisComprador",1,"form-control",3,"ngModel","ngModelChange"],["paisComprador","ngModel"],[1,"d-flex","align-items-start","flex-wrap","p-0","my-2"],["class","me-3",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"my-3",2,"color","var(--complementar)"],["class","text-danger",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center","w-100",3,"title"],[1,"flag","flag-info","px-2","me-2"],[1,"text-ellipsis"],[1,"flag","flag-info","px-2","ms-auto"],[1,"ms-2"],["title","Editar",1,"py-1","px-1","text-dark",3,"click"],[3,"icon"],[1,"py-2","px-3","border-top","bg-light"],[1,"link","text-info",3,"routerLink"],[1,"me-3"],["class","text-danger",3,"innerHTML",4,"ngIf"],[1,"text-danger",3,"innerHTML"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,_o,5,0,"ng-template",null,0,e.W1O),e.YNc(2,No,76,46,"ng-template",null,1,e.W1O),e._UZ(4,"router-outlet"))},dependencies:[u.sg,u.O5,h.lC,h.rH,T.jx,M.BN,$.Lt,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.Q7,m.On,m.F,k.K,ie.l,D.Z6,u.uU]})}return o})();const Eo=["template"],Uo=["icon"];function qo(o,s){if(1&o&&e._UZ(0,"fa-icon",2),2&o){const t=e.oxw();e.Q6J("icon",t.faTrash)}}function jo(o,s){if(1&o&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.erro)}}function Do(o,s){1&o&&e._UZ(0,"span",9)}function Jo(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,jo,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.YNc(7,Do,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.erro),e.xp6(2),e.Q6J("ngIf",t.loading)}}let Qo=(()=>{class o{constructor(t,i,a,n,r,c){this.activatedRoute=t,this.modalService=i,this.pessoaOperacaoService=a,this.pessoaSaldoService=n,this.pessoaService=r,this.crypto=c,this.faTrash=g.$aW,this.id=0,this.pessoa_Id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new v.u}ngAfterViewInit(){this.modal.title="Excluir Opera\xe7\xe3o",this.modal.template=this.template,this.modal.style={"max-width":"500px"},this.modal.routerBack=["../../../"],this.modal.activatedRoute=this.activatedRoute,this.modal.icon=this.icon,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var t=this.activatedRoute.parent.params.subscribe(a=>{a.pessoa_id?this.pessoa_Id=this.crypto.decrypt(a.pessoa_id):this.voltar()});this.subscription.push(t);var i=this.activatedRoute.params.subscribe(a=>{a.operacao_id?(this.id=this.crypto.decrypt(a.operacao_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)):this.voltar()});this.subscription.push(i)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,p.n)(this.pessoaOperacaoService.delete(this.id)).then(t=>{this.loading=!1,t.sucesso?(t.objeto?((0,C.fb)(this.pessoaService,t.objeto.pessoa),(0,C.Od)(this.pessoaOperacaoService,t.objeto.operacao,"listOperacaoPorPessoa")):((0,p.n)(this.pessoaOperacaoService.getListByPessoaId(this.pessoa_Id)),(0,p.n)(this.pessoaOperacaoService.getList()),(0,p.n)(this.pessoaService.getList())),(0,p.n)(this.pessoaService.get(this.pessoa_Id)),this.voltar()):this.erro=t.mensagem??"N\xe3o foi poss\xedvel excluir opera\xe7\xe3o."}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(O.m),e.Y36(Y),e.Y36(I.N),e.Y36(N.w))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete-operacao"]],viewQuery:function(i,a){if(1&i&&(e.Gf(Eo,5),e.Gf(Uo,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","mt-0 mb-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"mt-0","mb-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.YNc(0,qo,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Jo,10,2,"ng-template",null,1,e.W1O))},dependencies:[u.O5,M.BN]})}return o})();const Lo=["template"],Yo=["icon"];function Fo(o,s){1&o&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"path",3)(2,"path",4),e.qZA())}function Ho(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",null,5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),e._uU(6,"Nome:"),e.qZA(),e._UZ(7,"input",10),e.qZA(),e.TgZ(8,"div",11)(9,"label",12),e._uU(10,"CPF:"),e.qZA(),e._UZ(11,"input",13),e.qZA()(),e.TgZ(12,"div",7)(13,"div",14)(14,"label",15),e._uU(15,"Data da Transa\xe7\xe3o:"),e.qZA(),e._UZ(16,"input",16),e.qZA(),e.TgZ(17,"div",14)(18,"label",17),e._uU(19,"Valor da Opera\xe7\xe3o:"),e.qZA(),e._UZ(20,"input",18),e.qZA()(),e.TgZ(21,"div",7)(22,"div",19)(23,"label",20),e._uU(24,"Limite Concedido:"),e.qZA(),e._UZ(25,"input",21),e.ALo(26,"currency"),e.qZA(),e.TgZ(27,"div",19)(28,"label",22),e._uU(29,"Limite Utilizado:"),e.qZA(),e._UZ(30,"input",23),e.ALo(31,"currency"),e.qZA(),e.TgZ(32,"div",19)(33,"label",24),e._uU(34,"Limite Atual:"),e.qZA(),e._UZ(35,"input",25),e.ALo(36,"currency"),e.qZA(),e.TgZ(37,"div",26)(38,"label",27),e._uU(39,"Status Opera\xe7\xe3o:"),e.qZA(),e._UZ(40,"input",28),e.qZA(),e.TgZ(41,"div",14)(42,"label",29),e._uU(43,"Data de cadastro no sistema:"),e.qZA(),e._UZ(44,"input",30),e.qZA()(),e.TgZ(45,"div",31)(46,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportarPDF())}),e.TgZ(47,"span",33),e.O4$(),e.TgZ(48,"svg",34),e._UZ(49,"path",35)(50,"path",36),e.qZA()(),e._uU(51," Exportar relat\xf3rio "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("value",t.objetoList.nomeCliente),e.xp6(4),e.Q6J("value",t.objetoList.cpfCliente),e.xp6(5),e.Q6J("value",t.objeto.dataTransacao),e.xp6(4),e.Q6J("value",t.objetoList.valorOperacao),e.xp6(5),e.Q6J("value",e.gM2(26,10,t.objetoList.limiteConcedido,"BRL","","1.2")),e.xp6(5),e.Q6J("value",e.gM2(31,15,t.objetoList.limiteUtilizado,"BRL","","1.2")),e.xp6(5),e.Q6J("value",e.gM2(36,20,t.objetoList.limiteAtual,"BRL","","1.2")),e.xp6(5),e.Q6J("value",t.objetoList.statusOperacao),e.xp6(4),e.Q6J("value",t.objeto.dataCadastro),e.xp6(2),e.Q6J("disabled",t.loading)}}let Ro=(()=>{class o{constructor(t,i,a,n,r){this.activatedRoute=t,this.modalService=i,this.crypto=a,this.datepipe=n,this.pessoaOperacaoService=r,this.faFile=g.gMD,this.modalOpen=!1,this.objeto=new F.fs,this.objetoList=new F.cU,this.loading=!1,this.subscription=[],this.modal=new v.u}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}ngAfterViewInit(){var t=this;this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../../"],this.modal.title="Detalhes",this.modal.style={"max-width":"600px"};var i=this.activatedRoute.params.subscribe(function(){var a=(0,R.Z)(function*(n){if(n.operacao_id){if(t.objeto.id=t.crypto.decrypt(n.operacao_id),0==(r=t.pessoaOperacaoService.list.value).length)var r=yield(0,p.n)(t.pessoaOperacaoService.getList());if(t.objetoList=r.find(c=>c.id==t.objeto.id),!t.objetoList)return void t.voltar();(0,p.n)(t.pessoaOperacaoService.get(t.objeto.id)).then(c=>{c.dataCadastro=t.datepipe.transform(c.dataCadastro,"yyyy-MM-ddTHH:mm"),c.dataTransacao=t.datepipe.transform(c.dataTransacao,"yyyy-MM-dd"),t.objeto=c,setTimeout(()=>{t.modal=t.modalService.addModal(t.modal,"detalhe operacao")},200)}).catch(c=>{t.voltar()})}else t.voltar()});return function(n){return a.apply(this,arguments)}}());this.subscription.push(i)}voltar(){this.modalService.removeModal(this.modal)}exportarPDF(){var t=this;return(0,R.Z)(function*(){t.loading=!0,yield(0,p.n)(t.pessoaOperacaoService.exportacaoOperacao(t.objeto.id)),t.loading=!1})()}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(h.gz),e.Y36(v.Z),e.Y36(N.w),e.Y36(u.uU),e.Y36(O.m))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-detalhes-operacao"]],viewQuery:function(i,a){if(1&i&&(e.Gf(Lo,5),e.Gf(Yo,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-post",2,"margin-top","-6px"],["d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],["d","M4 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7zm0-3a.5.5 0 0 1 .5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5z"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-lg-9","col-md-6","col-12"],["for","nome"],["type","text","id","nome","name","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-3","col-md-6","col-12"],["for","cpfCliente"],["type","text","id","cpfCliente","name","cpfCliente","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-6","col-12"],["for","dataTransacao"],["type","date","id","dataTransacao","name","dataTransacao","readonly","",1,"form-control",3,"value"],["for","valorOperacao"],["type","text","id","valorOperacao","name","valorOperacao","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-4","col-md-6","col-sm-6","col-12"],["for","limiteConcedido"],["type","text","id","limiteConcedido","name","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado"],["type","text","id","limiteUtilizado","name","limiteUtilizado","readonly","",1,"form-control",3,"value"],["for","limiteAtual"],["type","text","id","limiteAtual","name","limiteAtual","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-6","col-md-6","col-sm-6","col-12"],["for","status"],["type","text","id","status","name","status","readonly","",1,"form-control",3,"value"],["for","dataCadastro"],["type","datetime-local","id","dataCadastro","name","dataCadastro","readonly","",1,"form-control",3,"value"],[1,"row","px-1","my-2"],[1,"btn","btn-dark",3,"disabled","click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-down"],["fill-rule","evenodd","d","M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"],["fill-rule","evenodd","d","M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"]],template:function(i,a){1&i&&(e.YNc(0,Fo,3,0,"ng-template",null,0,e.W1O),e.YNc(2,Ho,52,25,"ng-template",null,1,e.W1O))},dependencies:[m._Y,m.JL,m.F,u.H9]})}return o})();var Po=l(9336);const ko=["template"],Go=["icon"],zo=["form"];function Bo(o,s){1&o&&e._UZ(0,"img",2)}function Ko(o,s){if(1&o&&(e.TgZ(0,"p")(1,"strong"),e._uU(2,"Nome do arquivo:"),e.qZA(),e._uU(3),e.qZA()),2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.fileUpload.name,"")}}function $o(o,s){if(1&o&&e._UZ(0,"div",21),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.mensagem,e.oJD)}}function Vo(o,s){if(1&o&&e._UZ(0,"p",22),2&o){const t=e.oxw(2);e.Q6J("innerHTML",t.erro,e.oJD)}}function Wo(o,s){1&o&&(e.TgZ(0,"p",23),e._uU(1,"Selecione um arquivo para enviar."),e.qZA())}function Xo(o,s){1&o&&e._UZ(0,"span",24)}function ea(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.send())}),e.TgZ(2,"div")(3,"label",5)(4,"p",6),e._UZ(5,"i",7),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"Clique e arraste para selecionar arquivo"),e.qZA(),e.TgZ(8,"p"),e._uU(9,"ou "),e.TgZ(10,"label",8),e._uU(11,"clique aqui"),e.qZA(),e._uU(12," para abrir explorador de arquivos"),e.qZA(),e.YNc(13,Ko,4,1,"p",9),e.TgZ(14,"input",10,11),e.NdJ("input",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.fileChange(a))}),e.qZA()(),e.TgZ(16,"p",12)(17,"a",13),e._uU(18,"Clique aqui para saber como deve ser o arquivo XLSX"),e.qZA()()(),e.TgZ(19,"div",14)(20,"div",15),e.YNc(21,$o,1,1,"div",16),e.YNc(22,Vo,1,1,"p",17),e.YNc(23,Wo,2,0,"p",18),e.qZA(),e.TgZ(24,"button",19),e.YNc(25,Xo,1,0,"span",20),e.TgZ(26,"span"),e._uU(27,"Salvar"),e.qZA()()()()}if(2&o){const t=e.MAs(1),i=e.oxw();e.xp6(13),e.Q6J("ngIf",i.fileUpload),e.xp6(8),e.Q6J("ngIf",i.mensagem&&!i.erro),e.xp6(1),e.Q6J("ngIf",i.erro),e.xp6(1),e.Q6J("ngIf",!i.erro&&!i.fileUpload||t.invalid&&t.errors&&t.errors.fileRequired),e.xp6(1),e.Q6J("disabled",t.invalid||i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}}let ta=(()=>{class o{constructor(t,i,a,n,r){this.toastr=t,this.modalService=i,this.activatedRoute=a,this.pessoaService=n,this.alertService=r,this.faUpload=g.cf$,this.faCircleXmark=g.WA2,this.faTriangleExclamation=g.ik8,this.faCircleCheck=g.fV7,this.loading=!1,this.modalOpen=!1,this.erro="",this.subscription=[],this.mensagem="",this.modal=new v.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={width:"max-content","max-width":"95vw"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../"],this.modal.title="Importar Arquivo",setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"moeda")},200)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}fileChange(t){t&&t.target&&t.target.files&&t.target.files.length>0?(this.fileUpload=t.target.files[0],this.form.control.setErrors(null)):(this.form.control.setErrors({fileRequired:!0}),this.toastr.error("Selecione um arquivo para importa\xe7\xe3o."),delete this.fileUpload)}send(){if(this.loading=!0,this.mensagem="",this.erro="",!this.fileUpload)return this.toastr.error("Selecione um arquivo para enviar."),void(this.erro="Selecione um arquivo para enviar.");(0,p.n)(this.pessoaService.importarArquivo(this.fileUpload)).then(t=>{(0,p.n)(this.pessoaService.getList()),this.loading=!1,t.sucesso?(this.voltar(),"Importa\xe7\xe3o realizada com sucesso."!=t.mensagem?this.alertService.info(t.mensagem,{classList:"alert-big"}):this.alertService.success("Importa\xe7\xe3o realizada com sucesso")):(this.toastr.error("Erro ao salvar registros."),this.alertService.error(t.mensagem??"Erro ao salvar registros",{classList:"alert-big"}))}).catch(t=>{this.loading=!1,this.erro=(0,x.b)(t)})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(E._W),e.Y36(v.Z),e.Y36(h.gz),e.Y36(I.N),e.Y36(Po.c))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-importacao-arquivo"]],viewQuery:function(i,a){if(1&i&&(e.Gf(ko,5),e.Gf(Go,5),e.Gf(zo,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.template=n.first),e.iGM(n=e.CRH())&&(a.icon=n.first),e.iGM(n=e.CRH())&&(a.form=n.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-excel.png"],["enctype","multipart/form-data",1,"needs-validation",3,"ngSubmit"],["form","ngForm"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],[4,"ngIf"],["type","file","name","file","id","file","required","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"input"],["file",""],[1,"text-info"],["href","assets/modelos/modelo-importacao-pessoa.xlsx","download","modelo-importacao-pessoa.xlsx"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-2","mb-1"],[1,"me-3"],[3,"innerHTML",4,"ngIf"],["class","text-danger",3,"innerHTML",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[3,"innerHTML"],[1,"text-danger",3,"innerHTML"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,a){1&i&&(e.TgZ(0,"div"),e.YNc(1,Bo,1,0,"ng-template",null,0,e.W1O),e.YNc(3,ea,28,6,"ng-template",null,1,e.W1O),e.qZA())},dependencies:[u.O5,m._Y,m.JL,m.F],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed var(--neutral);text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:var(--primary);margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}"]})}return o})();var B=l(7280),H=l(1353),se=l(424),J=l(490),Q=l(9742);const oa=[{path:"",component:re,children:[{path:"",component:ve,title:"Zentech - Pessoas",children:[{path:"cadastrar",title:"Zentech - Cadastrar Pessoa",component:ke,data:{modalOrder:1}},{path:"cadastrar-operacao/:pessoa_id",title:"Zentech - Cadastrar Opera\xe7\xe3o",component:z,data:{modalOrder:1}},{path:"cadastrar-saldo/:pessoa_id",title:"Zentech - Cadastrar Saldo",component:ne,data:{modalOrder:1}},{path:"importar",title:"Zentech - Importar Arquivo",component:ta,data:{modalOrder:1}},{path:"excluir/:pessoa_id",title:"Zentech - Excluir Pessoa",component:We,data:{modalOrder:1,roles:[J.uU.Admin]},canActivate:[Q.p]},B.D]},{path:"detalhes/:pessoa_id",title:"Zentech - Pessoa",component:Bt,children:[{path:"saldo/cadastrar",title:"Zentech - Cadastrar Saldo",component:ne,data:{modalOrder:1}},{path:"saldo/excluir/:saldo_id",title:"Zentech - Excluir Saldo",component:to,data:{modalOrder:1,roles:[J.uU.Admin]},canActivate:[Q.p]},{path:"operacao/cadastrar",title:"Zentech - Cadastrar Opera\xe7\xe3o",component:z,data:{modalOrder:1},children:[{path:"moeda",title:"Zentech - Cadastrar Moeda",component:H.U,data:{modalOrder:2}},{path:"moeda/:moeda_id",title:"Zentech - Editar Moeda",component:H.U,data:{modalOrder:2}},{path:"moeda/excluir/:moeda_id",title:"Zentech - Excluir Moeda",component:se.T,canActivate:[Q.p],data:{modalOrder:2,roles:[J.uU.Admin]}}]},{path:"operacao/editar/:operacao_id",component:z,data:{modalOrder:1},children:[{path:"moeda",title:"Zentech - Cadastrar Moeda",component:H.U,data:{modalOrder:2}},{path:"moeda/:moeda_id",title:"Zentech - Editar Moeda",component:H.U,data:{modalOrder:2}},{path:"moeda/excluir/:moeda_id",title:"Zentech - Excluir Moeda",component:se.T,canActivate:[Q.p],data:{modalOrder:2,roles:[J.uU.Admin]}}]},{path:"operacao/detalhes/:operacao_id",title:"Zentech - Opera\xe7\xe3o",component:Ro,data:{modalOrder:1}},{path:"operacao/excluir/:operacao_id",title:"Zentech - Excluir Opera\xe7\xe3o",component:Qo,canActivate:[Q.p],data:{modalOrder:1,roles:[J.uU.Admin]}},B.D]},B.D]}];let aa=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(oa),h.Bz]})}return o})();var ia=l(6005),na=l(4562);let _a=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[u.ez,na.X,ia.v,T.m8]})}return o})();var ha=l(5805);let xa=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[u.ez,T.m8,T.m8]})}return o})(),ba=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({providers:[(0,D.e$)()],imports:[u.ez,aa,q.U$,M.uH,$.kW,m.u5,_a,ha.m,xa,oe.j,ae._8,G.LU]})}return o})()}}]);
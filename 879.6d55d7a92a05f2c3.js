"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[879],{1064:(N,E,i)=>{i.d(E,{V:()=>b}),i(5219),i(2832);class b{constructor(){this.id=0,this.nome="",this.simbolo="",this.codigo=""}}},9952:(N,E,i)=>{i.r(E),i.d(E,{BeneficiarioModule:()=>ae});var u=i(6814),o=i(5597),b=i(2352),m=i(6223),t=i(4685),f=i(1532),l=i(132),g=i(5861),x=i(9296),y=i(2832),S=i(708),U=i(590),e=i(9291),R=i(8787),I=i(6793),J=i(6434),Y=i(5038),d=i(6599),A=i(9901);function a(s,Z){if(1&s&&(e.TgZ(0,"p",13)(1,"small"),e._uU(2,"Benefici\xe1rios cadastrados em "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&s){const n=e.oxw();e.xp6(4),e.Oqu(n.empresaSelected.nome||"Empresa X")}}function p(s,Z){1&s&&e._UZ(0,"span",14)}const h=function(){return["cadastrar"]};function _(s,Z){1&s&&(e.TgZ(0,"div",15)(1,"a",16)(2,"span",17),e._uU(3," Cadastrar Benefici\xe1rio"),e.qZA()()()),2&s&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,h)))}let C=(()=>{class s{constructor(n,r,c,v){var G=this;this.table=n,this.beneficiarioService=r,this.accountService=c,this.empresaService=v,this.faUsers=U.FVb,this.maskType=y.O,this.list=[],this.tableLinks=[],this.columns=x.XM,this.subscription=[],this.loading=!1;var re=this.beneficiarioService.list.subscribe(M=>this.list=Object.assign([],M));this.subscription.push(re);var oe=this.beneficiarioService.loading.subscribe(M=>this.loading=M);this.subscription.push(oe);var le=this.empresaService.getEmpresa().subscribe(function(){var M=(0,g.Z)(function*(P){G.empresaSelected=P.empresa,P&&P.id&&(yield(0,S.n)(G.beneficiarioService.getList(!0)))});return function(P){return M.apply(this,arguments)}}());this.subscription.push(le);var ce=this.table.selected.subscribe(M=>{M&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(ce)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}getList(){(0,S.n)(this.beneficiarioService.getList(!0))}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(R.i),e.Y36(I.i),e.Y36(J.B),e.Y36(Y.P))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-list"]],decls:18,vars:14,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["class","page__header-subtitle",4,"ngIf"],[1,"ms-auto","mt-auto",2,"margin-bottom","7px"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"page__header-subtitle"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"col-xl-4","col-lg-4","col-md-7","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",2,"width","-1px",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(r,c){if(1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Benefici\xe1rios"),e.qZA(),e.YNc(7,a,5,1,"p",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return c.getList()}),e.YNc(10,p,1,0,"span",9),e._uU(11,"Atualizar"),e.qZA()(),e._UZ(12,"app-empresa-selected"),e.qZA(),e.TgZ(13,"div",10),e.YNc(14,_,4,2,"ng-template",null,11,e.W1O),e._UZ(16,"app-list-shared",12),e.qZA()(),e._UZ(17,"router-outlet")),2&r){const v=e.MAs(15);e.xp6(3),e.Q6J("icon",c.faUsers),e.xp6(4),e.Q6J("ngIf",c.empresaSelected),e.xp6(2),e.Q6J("disabled",c.loading),e.xp6(1),e.Q6J("ngIf",c.loading),e.xp6(6),e.Q6J("list",c.list)("topActions",v)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",c.columns)("tableLinks",c.tableLinks)("selectable",!0)}},dependencies:[u.O5,l.lC,l.rH,o.BN,d.o,A.j]})}return s})();var D=i(8902),B=i(2855),W=i(342),O=i(9324),T=i(2667);const V=["template"],H=["icon"];function z(s,Z){if(1&s&&e._UZ(0,"fa-icon",2),2&s){const n=e.oxw();e.Q6J("icon",n.faTrash)}}function w(s,Z){if(1&s&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&s){const n=e.oxw(2);e.xp6(2),e.Oqu(n.erro)}}function X(s,Z){1&s&&e._UZ(0,"span",9)}function $(s,Z){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,w,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.send())}),e.YNc(7,X,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&s){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.erro),e.xp6(2),e.Q6J("ngIf",n.loading)}}let k=(()=>{class s{constructor(n,r,c,v){this.activatedRoute=n,this.modalService=r,this.beneficiarioService=c,this.crypto=v,this.faTrash=U.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new B.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var n=this.activatedRoute.params.subscribe(r=>{if(r.beneficiario_id)try{this.id=this.crypto.decrypt(r.beneficiario_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete beneficiario")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(n)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,S.n)(this.beneficiarioService.delete(this.id)).then(n=>{this.loading=!1,n.sucesso?(n.objeto?(0,O.Od)(this.beneficiarioService,n.objeto):(0,S.n)(this.beneficiarioService.getList()),this.voltar()):this.erro=n.mensagem}).catch(n=>{this.loading=!1,this.erro=(0,W.b)(n)})}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(l.gz),e.Y36(B.Z),e.Y36(I.i),e.Y36(T.w))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-delete"]],viewQuery:function(r,c){if(1&r&&(e.Gf(V,5),e.Gf(H,5)),2&r){let v;e.iGM(v=e.CRH())&&(c.template=v.first),e.iGM(v=e.CRH())&&(c.icon=v.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(r,c){1&r&&(e.YNc(0,z,1,1,"ng-template",null,0,e.W1O),e.YNc(2,$,10,2,"ng-template",null,1,e.W1O))},dependencies:[u.O5,o.BN]})}return s})();var F=i(2996),L=i(2951),j=i(8410),q=i(7280),K=i(490),Q=i(9742);const ee=[{path:"",component:C,title:"Zentech - Benefici\xe1rios",children:[{path:"cadastrar",component:D.U,title:"Zentech - Cadastrar Benefici\xe1rio",data:{modalOrder:1},children:[{path:"banco",component:F.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:L.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}},{path:"representante/:representante_id",component:L.U,title:"Zentech - Editar Representante",data:{modalOrder:2}},{path:"representante/excluir/:representante_id",component:j.T,title:"Zentech - Excluir Representante",data:{modalOrder:2,data:[K.uU.Admin]},canActivate:[Q.p]}]},{path:"editar/:beneficiario_id",title:"Zentech - Editar Benefici\xe1rio",component:D.U,data:{modalOrder:1},children:[{path:"banco",component:F.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:L.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}},{path:"representante/:representante_id",component:L.U,title:"Zentech - Editar Representante",data:{modalOrder:2}},{path:"representante/excluir/:representante_id",component:j.T,title:"Zentech - Excluir Representante",data:{modalOrder:2,data:[K.uU.Admin]},canActivate:[Q.p]}]},{path:"excluir/:beneficiario_id",title:"Zentech - Excluir Benefici\xe1rio",component:k,data:{modalOrder:1,data:[K.uU.Admin]},canActivate:[Q.p]},q.D]}];let te=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(ee),l.Bz]})}return s})();var ie=i(5805),se=i(3735),ne=i(5096);let ae=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({providers:[(0,se.e$)()],imports:[u.ez,te,o.uH,b.kW,m.u5,ie.m,t.U$,f._8,ne.O]})}return s})()},9901:(N,E,i)=>{i.d(E,{j:()=>Y});var u=i(5861),o=i(708),b=i(490),m=i(5038),t=i(9291),f=i(6434),l=i(4939),g=i(8787),x=i(6814),y=i(6223),S=i(5219),U=i(2352);function e(d,A){if(1&d&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&d){const a=t.oxw(3);t.xp6(1),t.Oqu(null==a.empresaSelected.empresa?null:a.empresaSelected.empresa.nome)}}function R(d,A){if(1&d&&t.YNc(0,e,2,1,"span",7),2&d){const a=t.oxw(2);t.Q6J("ngIf",a.empresaSelected.id)}}function I(d,A){if(1&d&&(t.TgZ(0,"p"),t._uU(1),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA()),2&d){const a=A.$implicit;t.xp6(1),t.Oqu(a.nome),t.xp6(2),t.Oqu(a.logo)}}function J(d,A){if(1&d){const a=t.EpF();t.TgZ(0,"div",1)(1,"label",2),t._uU(2,"Selecione a Empresa para carregar dados"),t.qZA(),t.TgZ(3,"p-dropdown",3,4),t.NdJ("ngModelChange",function(h){t.CHM(a);const _=t.oxw();return t.KtG(_.empresaChange(h))})("ngModelChange",function(h){t.CHM(a);const _=t.oxw();return t.KtG(_.empresaSelected.id=h)}),t.YNc(5,R,1,1,"ng-template",5),t.YNc(6,I,4,2,"ng-template",6),t.qZA()()}if(2&d){const a=t.oxw();t.xp6(3),t.Q6J("options",a.empresas)("ngModel",a.empresaSelected.id)("filter",!0)("showClear",!1)("required",!0)}}let Y=(()=>{class d{constructor(a,p,h,_){var C=this;this.empresaService=a,this.accountService=p,this.colors=h,this.table=_,this.empresaSelected=new m.I,this.empresas=[],this.loading=!1,this.Role=b.uU,this.subscription=[];var D=this.accountService.accountSubject.subscribe(function(){var O=(0,u.Z)(function*(T){C.account=T,T&&(1==T.perfilAcesso_Id&&0==C.empresaService.list.value.length&&(yield(0,o.n)(C.empresaService.getList())),(1!=T.perfilAcesso_Id||!C.empresaService.getEmpresa().value.empresa)&&C.empresaService.setEmpresa({id:T.empresa_Id,empresa:T.empresa}))});return function(T){return O.apply(this,arguments)}}());this.subscription.push(D);var B=this.empresaService.getEmpresa().subscribe(O=>{this.empresaSelected=O,this.table.selected.next(void 0),this.table.selectedItems.next([]),O&&this.setColorsJquery()});this.subscription.push(B);var W=this.empresaService.list.subscribe(O=>{this.empresas=O});this.subscription.push(W)}ngOnDestroy(){this.subscription.forEach(a=>a.unsubscribe())}empresaChange(a){var p=this;return(0,u.Z)(function*(){if(p.accountService.accountValue&&1==p.accountService.accountValue?.perfilAcesso_Id&&a){0==p.empresas.length&&(yield(0,o.n)(p.empresaService.getList()));var h=p.empresas.find(_=>_.id==a);p.empresaService.setEmpresa({empresa:h,id:a})}})()}setColorsJquery(){this.colors.setColorsJquery(this.empresaSelected.empresa)}static#e=this.\u0275fac=function(p){return new(p||d)(t.Y36(m.P),t.Y36(f.B),t.Y36(l.w),t.Y36(g.i))};static#t=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-empresa-selected"]],decls:1,vars:1,consts:[["class","form-group ms-2",4,"ngIf"],[1,"form-group","ms-2"],["for","empresa_Id"],["name","empresa_Id","id","empresa_Id","optionValue","id","filterBy","nome","styleClass","form-control","placeholder","Selecione uma empresa",3,"options","ngModel","filter","showClear","required","ngModelChange"],["empresa_Id","ngModel"],["pTemplate","selectedItem"],["pTemplate","item"],[4,"ngIf"]],template:function(p,h){1&p&&t.YNc(0,J,7,5,"div",0),2&p&&t.Q6J("ngIf",h.account&&1==(null==h.account?null:h.account.perfilAcesso_Id))},dependencies:[x.O5,y.JJ,y.Q7,y.On,S.jx,U.Lt]})}return d})()},9324:(N,E,i)=>{function u(m,t,f="list"){var l=JSON.parse(JSON.stringify(m[f].value));l=l.filter(g=>!t.includes(g.id)),m[f].next(l)}function o(m,t,f="list"){var l=JSON.parse(JSON.stringify(m[f].value)),g=l.findIndex(x=>x.id==t.id);l.splice(g,1),m[f].next(l)}function b(m,t,f="list"){var l=JSON.parse(JSON.stringify(m[f].value));if(t.id){var g=l.findIndex(x=>x.id==t.id);-1==g&&l.push(t),l.splice(g,1,t)}else l.push(t);m[f].next(l)}i.d(E,{Od:()=>o,UB:()=>u,fb:()=>b})}}]);
"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[466],{1064:(S,v,s)=>{s.d(v,{V:()=>f}),s(5219),s(2832);class f{constructor(){this.id=0,this.nome="",this.simbolo="",this.codigo=""}}},9466:(S,v,s)=>{s.r(v),s.d(v,{EmpresaModule:()=>jt});var g=s(6814),l=s(6223),f=s(5597),h=s(2352),m=s(132),_=s(2832),p=s(708),x=s(590),C=s(394),t=s(9291),E=s(8787),T=s(5038),I=s(6599);function q(o,r){1&o&&t._UZ(0,"span",13)}const Y=function(){return["cadastrar"]};function Q(o,r){1&o&&(t.TgZ(0,"div",14)(1,"a",15)(2,"span",16),t._uU(3," Cadastrar Empresa"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,Y)))}let j=(()=>{class o{constructor(e,i){this.table=e,this.empresaService=i,this.faFilePdf=x.gSj,this.maskType=_.O,this.list=[],this.tableLinks=[],this.columns=C.j,this.subscription=[],this.loading=!1;var n=this.empresaService.list.subscribe(c=>this.list=Object.assign([],c));this.subscription.push(n);var a=this.empresaService.loading.subscribe(c=>this.loading=c);this.subscription.push(a),(0,p.n)(this.empresaService.getList(!0));var d=this.table.selected.subscribe(c=>{c&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:c.ativo?"Desabilitar":"Habilitar",routePath:[c.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(d)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}getList(){(0,p.n)(this.empresaService.getList(!0))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(E.i),t.Y36(T.P))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:17,vars:12,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],["xmlns","http://www.w3.org/2000/svg","height","16","width","16","viewBox","0 0 512 512","fill","currentColor"],["d","M243.4 2.6l-224 96c-14 6-21.8 21-18.7 35.8S16.8 160 32 160v8c0 13.3 10.7 24 24 24H456c13.3 0 24-10.7 24-24v-8c15.2 0 28.3-10.7 31.3-25.6s-4.8-29.9-18.7-35.8l-224-96c-8-3.4-17.2-3.4-25.2 0zM128 224H64V420.3c-.6 .3-1.2 .7-1.8 1.1l-48 32c-11.7 7.8-17 22.4-12.9 35.9S17.9 512 32 512H480c14.1 0 26.5-9.2 30.6-22.7s-1.1-28.1-12.9-35.9l-48-32c-.6-.4-1.2-.7-1.8-1.1V224H384V416H344V224H280V416H232V224H168V416H128V224zM256 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"],[1,"me-auto"],[1,"page__header-title"],[1,"ms-auto"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"col-xl-4","col-lg-4","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(i,n){if(1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4),t.qZA()(),t.kcU(),t.TgZ(5,"div",5)(6,"h3",6),t._uU(7,"Empresas"),t.qZA()(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return n.getList()}),t.YNc(10,q,1,0,"span",9),t._uU(11,"Atualizar"),t.qZA()()(),t.TgZ(12,"div",10),t.YNc(13,Q,4,2,"ng-template",null,11,t.W1O),t._UZ(15,"app-list-shared",12),t.qZA()(),t._UZ(16,"router-outlet")),2&i){const a=t.MAs(14);t.xp6(9),t.Q6J("disabled",n.loading),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(5),t.Q6J("list",n.list)("topActions",a)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[g.O5,m.lC,m.rH,I.o]})}return o})();var H=s(1193),F=s(342),b=s(2855),N=s(9324),M=s(2667),A=s(2425),y=s(3735);const L=["template"],G=["icon"];function P(o,r){1&o&&(t.TgZ(0,"span",3),t.O4$(),t.TgZ(1,"svg",4),t._UZ(2,"path",5),t.qZA()())}function k(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function V(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,k,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(10);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function B(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function z(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,B,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(18);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function K(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function W(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,K,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(27);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function X(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function $(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,X,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(36);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function tt(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function et(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"RG inv\xe1lido."),t.qZA())}function ot(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"RG j\xe1 cadastrado"),t.qZA())}function it(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,tt,2,0,"p",46),t.YNc(2,et,2,0,"p",46),t.YNc(3,ot,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(45);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.mask||e.errors.invalid),t.xp6(1),t.Q6J("ngIf",e.errors.jaCadastrado)}}function nt(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function at(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"CPF inv\xe1lido."),t.qZA())}function rt(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"CPF j\xe1 cadastrado"),t.qZA())}function st(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,nt,2,0,"p",46),t.YNc(2,at,2,0,"p",46),t.YNc(3,rt,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(53);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.mask||e.errors.invalid),t.xp6(1),t.Q6J("ngIf",e.errors.jaCadastrado)}}function lt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"label",47)(1,"p",48),t._UZ(2,"i",49),t.qZA(),t.TgZ(3,"h3"),t._uU(4,"Clique e arraste para selecionar uma imagem"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"ou "),t.TgZ(7,"label",50),t._uU(8,"clique aqui"),t.qZA(),t._uU(9," para abrir explorador de arquivos"),t.qZA(),t.TgZ(10,"input",51,52),t.NdJ("input",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.fileChange(n))}),t.qZA()()}}function ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.importarNovamente())}),t._uU(1,"Refazer upload"),t.qZA()}}function pt(o,r){if(1&o&&t._UZ(0,"img",54),2&o){const e=t.oxw(2);t.Q6J("src",e.fileSrc,t.LSH)("alt",e.fileName)}}function mt(o,r){if(1&o&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function dt(o,r){1&o&&(t.TgZ(0,"p",12),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function _t(o,r){if(1&o&&(t.TgZ(0,"div",55),t.YNc(1,mt,2,1,"p",46),t.YNc(2,dt,2,0,"p",46),t.qZA()),2&o){t.oxw();const e=t.MAs(1),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!i.erro)}}function ut(o,r){1&o&&t._UZ(0,"span",56)}function gt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.MAs(1),a=t.oxw();return t.KtG(a.send(n))}),t.TgZ(2,"div",8)(3,"div",9)(4,"div",10)(5,"label",11),t._uU(6,"Nome: "),t.TgZ(7,"span",12),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",13,14),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.nome=n)})("change",function(){t.CHM(e);const n=t.MAs(10),a=t.oxw();return t.KtG(a.objeto.nome=n.value.trim())}),t.qZA(),t.YNc(11,V,2,1,"div",15),t.qZA(),t.TgZ(12,"div",16)(13,"label",17),t._uU(14,"C\xf3digo do Registro: "),t.TgZ(15,"span",12),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"input",18,19),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.codigoRegistro=n)})("change",function(){t.CHM(e);const n=t.MAs(18),a=t.oxw();return t.KtG(a.objeto.codigoRegistro=n.value.trim())}),t.qZA(),t.YNc(19,z,2,1,"div",15),t.qZA()(),t.TgZ(20,"div",9)(21,"div",20)(22,"label",21),t._uU(23,"Endere\xe7o: "),t.TgZ(24,"span",12),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"input",22,23),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.endereco=n)})("change",function(){t.CHM(e);const n=t.MAs(27),a=t.oxw();return t.KtG(a.objeto.endereco=n.value.trim())}),t.qZA(),t.YNc(28,W,2,1,"div",15),t.qZA()(),t.TgZ(29,"div",9)(30,"div",20)(31,"label",24),t._uU(32,"S\xf3cio Diretor: "),t.TgZ(33,"span",12),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"input",25,26),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.socioDiretor=n)})("change",function(){t.CHM(e);const n=t.MAs(36),a=t.oxw();return t.KtG(a.objeto.socioDiretor=n.value.trim())}),t.qZA(),t.YNc(37,$,2,1,"div",15),t.qZA()(),t.TgZ(38,"div",9)(39,"div",27)(40,"label",28),t._uU(41,"RG do S\xf3cio Diretor: "),t.TgZ(42,"span",12),t._uU(43,"*"),t.qZA()(),t.TgZ(44,"input",29,30),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.rgSocioDiretor=n)})("change",function(){t.CHM(e);const n=t.MAs(45),a=t.oxw();return t.KtG(a.validaRG(n,n.value))}),t.qZA(),t.YNc(46,it,4,3,"div",15),t.qZA(),t.TgZ(47,"div",27)(48,"label",31),t._uU(49,"CPF do S\xf3cio Diretor: "),t.TgZ(50,"span",12),t._uU(51,"*"),t.qZA()(),t.TgZ(52,"input",32,33),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.objeto.cpfSocioDiretor=n)})("change",function(){t.CHM(e);const n=t.MAs(53),a=t.oxw();return t.KtG(a.validaCPF(n,n.value))}),t.qZA(),t.YNc(54,st,4,3,"div",15),t.qZA()(),t.TgZ(55,"div",34)(56,"div",35)(57,"div")(58,"label",36),t._uU(59,"Logo: "),t.TgZ(60,"span",12),t._uU(61,"*"),t.qZA()(),t.YNc(62,lt,12,0,"label",37),t.TgZ(63,"div",38),t.YNc(64,ct,2,0,"button",39),t.qZA(),t.TgZ(65,"div",40),t.YNc(66,pt,1,2,"img",41),t.qZA()()()(),t.TgZ(67,"div",9)(68,"div",42),t.YNc(69,_t,3,2,"div",43),t.TgZ(70,"button",44),t.YNc(71,ut,1,0,"span",45),t.TgZ(72,"span"),t._uU(73,"Salvar"),t.qZA()()()()()()}if(2&o){const e=t.MAs(1),i=t.MAs(10),n=t.MAs(18),a=t.MAs(27),d=t.MAs(36),c=t.MAs(45),Z=t.MAs(53),u=t.oxw();t.xp6(9),t.Q6J("ngModel",u.objeto.nome),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(6),t.Q6J("ngModel",u.objeto.codigoRegistro),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(7),t.Q6J("ngModel",u.objeto.endereco),t.xp6(2),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(7),t.Q6J("ngModel",u.objeto.socioDiretor),t.xp6(2),t.Q6J("ngIf",d.touched&&d.errors),t.xp6(7),t.Q6J("ngModel",u.objeto.rgSocioDiretor),t.xp6(2),t.Q6J("ngIf",c.touched&&c.errors),t.xp6(6),t.Q6J("ngModel",u.objeto.cpfSocioDiretor),t.xp6(2),t.Q6J("ngIf",Z.touched&&Z.errors),t.xp6(8),t.Q6J("ngIf",!u.fileUploaded),t.xp6(2),t.Q6J("ngIf",u.fileUploaded),t.xp6(2),t.Q6J("ngIf",u.fileSrc&&u.fileUploaded),t.xp6(3),t.Q6J("ngIf",u.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||u.loading),t.xp6(1),t.Q6J("ngIf",u.loading)}}let U=(()=>{class o{constructor(e,i,n,a,d){this.activatedRoute=e,this.modalService=i,this.crypto=n,this.toastr=a,this.empresaService=d,this.objeto=new C.o,this.erro="",this.loading=!1,this.loadingCep=!1,this.subscription=[],this.isEditPage=!1,this.modal=new b.u,this.fileUploaded=!1,this.fileSrc="",this.fileName="",this.fileLoading=!1}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"600px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var e=this.activatedRoute.params.subscribe(i=>{i.empresa_id?(this.objeto.id=this.crypto.decrypt(i.empresa_id),this.modal.title="Editar Empresa",this.modal.routerBack=["../../"],this.isEditPage=!0,(0,p.n)(this.empresaService.get(this.objeto.id)).then(n=>{this.objeto=n,this.fileSrc=n.logoDataUri,this.fileLoading=!1,this.fileName="",this.fileUploaded=!0,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"Empresa")},200)}).catch(n=>{this.voltar()})):(this.modal.title="Cadastrar Empresa",this.modal.routerBack=["../"],this.isEditPage=!1,setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"Empresa")},200))});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}fileChange(e){var i=e.target.files[0];if(this.importarNovamente(),i){this.fileLoading=!0;var n=new FileReader,a=this;n.onload=function(c){var Z=c.target?.result;a.fileSrc=Z,a.fileUploaded=!0,a.fileLoading=!1,a.fileName=i.name,a.objeto.logoDataUri=Z},n.onerror=function(c){a.fileLoading=!1,a.toastr.error("N\xe3o foi poss\xedvel realizar upload")},n.readAsDataURL(i)}else this.toastr.error("Selecione uma imagem para salvar.")}validaCPF(e,i){if(e){if(!i||0==i)return void e.control.setErrors({required:!0});if("cpfSocioDiretor"==e.name&&!(0,H.p)(i))return void e.control.setErrors({invalid:!0});if([].filter(c=>c.cpf==i).length>0)return void e.control.setErrors({jaCadastrado:!0});e.control.setErrors(null)}}validaRG(e,i){if(e){if(!i||0==i)return void e.control.setErrors({required:!0});if("rgSocioDiretor"==e.name){var n=function R(o){var r=o.toString(),e=parseInt(r);return!(Number.isNaN(e)||r.length<7)}(i);if(!n)return void e.control.setErrors({invalid:!0})}if([].filter(c=>c.rg==i).length>0)return void e.control.setErrors({jaCadastrado:!0});e.control.setErrors(null)}}importarNovamente(){this.fileUploaded=!1,this.fileSrc="",this.fileName=""}send(e){if(e.invalid)return this.toastr.error("Campos inv\xe1lidos"),void(this.erro="Campos inv\xe1lidos");this.erro="",this.request().then(i=>{this.loading=!1,1==i.sucesso?(i.objeto?(0,N.f)(this.empresaService,i.objeto):(0,p.n)(this.empresaService.getList()),this.voltar()):this.erro=i.mensagem}).catch(i=>{this.loading=!1,this.erro=(0,F.b)(i)})}request(){return(0,p.n)(0==this.objeto.id?this.empresaService.create(this.objeto):this.empresaService.edit(this.objeto))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.gz),t.Y36(b.Z),t.Y36(M.w),t.Y36(A._W),t.Y36(T.P))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(i,n){if(1&i&&(t.Gf(L,5),t.Gf(G,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.template=a.first),t.iGM(a=t.CRH())&&(n.icon=a.first)}},decls:4,vars:0,consts:[["class","align-items-center"],["icon",""],["template",""],[1,"title-icon"],["xmlns","http://www.w3.org/2000/svg","height","16","width","16","viewBox","0 0 512 512","fill","currentColor"],["d","M243.4 2.6l-224 96c-14 6-21.8 21-18.7 35.8S16.8 160 32 160v8c0 13.3 10.7 24 24 24H456c13.3 0 24-10.7 24-24v-8c15.2 0 28.3-10.7 31.3-25.6s-4.8-29.9-18.7-35.8l-224-96c-8-3.4-17.2-3.4-25.2 0zM128 224H64V420.3c-.6 .3-1.2 .7-1.8 1.1l-48 32c-11.7 7.8-17 22.4-12.9 35.9S17.9 512 32 512H480c14.1 0 26.5-9.2 30.6-22.7s-1.1-28.1-12.9-35.9l-48-32c-.6-.4-1.2-.7-1.8-1.1V224H384V416H344V224H280V416H232V224H168V416H128V224zM256 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-xl-8","col-lg-8","col-md-8","col-sm-8","col-12"],["for","nome"],[1,"text-danger"],["type","text","name","nome","id","nome","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["nome","ngModel"],[4,"ngIf"],[1,"form-group","col-xl-4","col-lg-4","col-md-4","col-sm-4","col-12"],["for","codigoRegistro"],["type","text","name","codigoRegistro","id","codigoRegistro","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["codigoRegistro","ngModel"],[1,"form-group","col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],["for","endereco"],["type","text","name","endereco","id","endereco","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["endereco","ngModel"],["for","socioDiretor"],["type","text","name","socioDiretor","id","socioDiretor","pattern","\\S(.*\\S)?","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["socioDiretor","ngModel"],[1,"form-group","col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12"],["for","rgSocioDiretor"],["type","text","name","rgSocioDiretor","id","rgSocioDiretor","mask","00.000.000-0","placeholder","00.000.000-0","required","","pattern","\\d{2}\\.?\\d{3}\\.?\\d{3}-?\\d{1}",1,"form-control",3,"ngModel","ngModelChange","change"],["rgSocioDiretor","ngModel"],["for","cpfSocioDiretor"],["type","text","name","cpfSocioDiretor","id","cpfSocioDiretor","mask","000.000.000-00","placeholder","000.000.000-00","required","","pattern","\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2}",1,"form-control",3,"ngModel","ngModelChange","change"],["cpfSocioDiretor","ngModel"],[1,"row","mt-3"],[1,"col-12"],["for","file",1,"mb-0"],["for","file","class","input-file-container",4,"ngIf"],[1,"my-3"],["class","btn btn-dark  ",3,"click",4,"ngIf"],[1,""],["class","input-file-image",3,"src","alt",4,"ngIf"],[1,"col","mt-3","mb-2","d-flex","align-items-center"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","me-0","ms-auto",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","text-danger",4,"ngIf"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],["type","file","name","file","id","file","required","","accept","image/png, image/gif, image/jpeg, image/svg",3,"input"],["file",""],[1,"btn","btn-dark",3,"click"],[1,"input-file-image",3,"src","alt"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,n){1&i&&(t.YNc(0,P,3,0,"ng-template",0,1,t.W1O),t.YNc(2,gt,74,18,"ng-template",null,2,t.W1O))},dependencies:[g.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.c5,l.On,l.F,y.Z6],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}.input-file-image[_ngcontent-%COMP%]{max-height:300px}"]})}return o})();var ft=s(1064);const ht=["template"],vt=["icon"];function xt(o,r){if(1&o&&t._UZ(0,"fa-icon",2),2&o){const e=t.oxw();t.Q6J("icon",e.faTrash)}}function bt(o,r){if(1&o&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function Tt(o,r){1&o&&t._UZ(0,"span",9)}function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,bt,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(7,Tt,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading)}}let Ct=(()=>{class o{constructor(e,i,n,a){this.activatedRoute=e,this.modalService=i,this.crypto=n,this.empresaService=a,this.faTrash=x.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new b.u,this.objeto=new ft.V}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var e="";this.activatedRoute.snapshot.url.forEach(n=>{e+="../"}),this.modal.routerBack=[e],this.modal.title="Excluir registro";var i=this.activatedRoute.params.subscribe(n=>{n.empresa_id?(this.id=this.crypto.decrypt(n.empresa_id),this.modal=this.modalService.addModal(this.modal,"empresa")):this.voltar()});this.subscription.push(i)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,p.n)(this.empresaService.delete(this.id)).then(e=>{this.loading=!1,1==e.sucesso?(e.objeto?(0,N.O)(this.empresaService,e.objeto):(0,p.n)(this.empresaService.getList()),this.voltar()):this.erro=e.mensagem}).catch(e=>{this.loading=!1,this.erro=(0,F.b)(e)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.gz),t.Y36(b.Z),t.Y36(M.w),t.Y36(T.P))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(i,n){if(1&i&&(t.Gf(ht,5),t.Gf(vt,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.template=a.first),t.iGM(a=t.CRH())&&(n.icon=a.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2","mb-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(i,n){1&i&&(t.YNc(0,xt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,Zt,10,2,"ng-template",null,1,t.W1O))},dependencies:[g.O5,f.BN]})}return o})();var Mt=s(7280),At=s(5861),w=s(6434);const St=["template"];function Ft(o,r){1&o&&(t.TgZ(0,"span",7),t._uU(1,"habilitar"),t.qZA())}function Nt(o,r){1&o&&(t.TgZ(0,"span",7),t._uU(1,"desabilitar"),t.qZA())}function yt(o,r){if(1&o&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Ut(o,r){1&o&&t._UZ(0,"span",9)}function wt(o,r){1&o&&(t.TgZ(0,"span"),t._uU(1,"Desabilitar"),t.qZA())}function Dt(o,r){1&o&&(t.TgZ(0,"span"),t._uU(1,"Habilitar"),t.qZA())}function Ot(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"Tem certeza que deseja "),t.YNc(3,Ft,2,0,"span",3),t.YNc(4,Nt,2,0,"span",3),t._uU(5," esse registro? "),t.qZA(),t.YNc(6,yt,2,1,"p",4),t.TgZ(7,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.send())}),t.YNc(8,Ut,1,0,"span",6),t.YNc(9,wt,2,0,"span",1),t.YNc(10,Dt,2,0,"span",1),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.habilitar),t.xp6(1),t.Q6J("ngIf",!e.habilitar),t.xp6(2),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.habilitar),t.xp6(1),t.Q6J("ngIf",e.habilitar)}}function Jt(o,r){if(1&o&&(t.TgZ(0,"div",10)(1,"p",8),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function Et(o,r){if(1&o&&(t.YNc(0,Ot,11,6,"div",1),t.YNc(1,Jt,3,1,"div",2)),2&o){const e=t.oxw();t.Q6J("ngIf",e.podeAtivar),t.xp6(1),t.Q6J("ngIf",!e.podeAtivar)}}let D=(()=>{class o{constructor(e,i,n,a,d,c){this.empresaService=e,this.modalService=i,this.activatedRoute=n,this.crypto=a,this.accountService=d,this.toastr=c,this.objeto=new C.o,this.loading=!1,this.erro="",this.subscription=[],this.modal=new b.u,this.podeAtivar=!0,this.habilitar=!1,this.isUser=!1,this.account=this.accountService.accountValue}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute};var e=this.activatedRoute.params.subscribe(i=>{i.empresa_id?(this.objeto.id=this.crypto.decrypt(i.empresa_id),this.isUser=this.account?.id==this.objeto.id,this.modal.routerBack=["../../"],(0,p.n)(this.empresaService.get(this.objeto.id)).then(n=>{this.objeto=n,this.habilitar=!(null==this.objeto.dataDesativado||null==this.objeto.dataDesativado),this.objeto.ativo=!this.habilitar,this.modal.title=this.habilitar?"Habilitar Empresa":"Desabilitar Empresa",setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"empresa")},200)}).catch(n=>{this.voltar()})):this.voltar()});this.subscription.push(e)}voltar(){this.modalService.removeModal(this.modal)}send(){var e=this;this.loading=!0,this.erro="",(0,p.n)(this.empresaService.deactivated(this.objeto.id,this.habilitar)).then(function(){var i=(0,At.Z)(function*(n){e.habilitar&&e.isUser&&e.accountService.logout(),yield(0,p.n)(e.empresaService.getList()),e.voltar()});return function(n){return i.apply(this,arguments)}}()).finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(T.P),t.Y36(b.Z),t.Y36(m.gz),t.Y36(M.w),t.Y36(w.B),t.Y36(A._W))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-deactivated"]],viewQuery:function(i,n){if(1&i&&t.Gf(St,5),2&i){let a;t.iGM(a=t.CRH())&&(n.template=a.first)}},decls:3,vars:0,consts:[["template",""],[4,"ngIf"],["class","mb-2",4,"ngIf"],["class","font-weight-bold",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"font-weight-bold"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"mb-2"]],template:function(i,n){1&i&&(t.YNc(0,Et,2,2,"ng-template",null,0,t.W1O),t._UZ(2,"router-outlet"))},dependencies:[g.O5,m.lC]})}return o})();var It=s(5592),O=s(490);let J=(()=>{class o{constructor(e,i,n,a){this.accountService=e,this.empresaService=i,this.router=n,this.toastr=a}canActivate(e,i){return new It.y(n=>{this.empresaService.objeto.subscribe(a=>{var d=this.accountService.accountValue;n.next(d?.perfilAcesso_Id!=O.uU.Master||a?.perfilAcesso_Id!=O.uU.Admin)})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(w.B),t.LFG(T.P),t.LFG(m.F0),t.LFG(A._W))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const qt=[{path:"",component:j,children:[{path:"cadastrar",component:U,data:{modalOrder:1}},{path:"editar/:empresa_id",component:U,data:{modalOrder:1}},{path:"excluir/:empresa_id",component:Ct,data:{modalOrder:1}},{path:"habilitar/:empresa_id",component:D,data:{modalOrder:1},title:"Zentech - Habilitar empresa",canActivate:[J]},{path:"desabilitar/:empresa_id",component:D,data:{modalOrder:1},title:"Zentech - Desabilitar empresa",canActivate:[J]},Mt.D]}];let Yt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(qt),m.Bz]})}return o})();var Qt=s(9227);let jt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[(0,y.e$)()],imports:[g.ez,Yt,l.u5,f.uH,Qt.m,h.kW]})}return o})()},9324:(S,v,s)=>{function g(f,h,m="list"){console.log("remove");var _=JSON.parse(JSON.stringify(f[m].value));console.log("list",_);var p=_.findIndex(x=>x.id==h.id);console.log("index",p),console.log("item",_[p]),_.splice(p,1),console.log("list",_),f[m].next(_)}function l(f,h,m="list"){var _=JSON.parse(JSON.stringify(f[m].value));if(h.id){var p=_.findIndex(x=>x.id==h.id);-1==p&&_.push(h),_.splice(p,1,h)}else _.push(h);f[m].next(_)}s.d(v,{O:()=>g,f:()=>l})}}]);
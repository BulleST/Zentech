"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[132],{7132:(X,m,n)=>{n.r(m),n.d(m,{InvoiceModule:()=>R});var f=n(6814),c=n(132),d=n(708),l=n(5219),o=n(2832);class w{constructor(){this.id=0,this.dataInvoice=new Date,this.valor=0,this.beneficiario_Id=0,this.banco_Id=0,this.swift="",this.conta=0,this.instituicaoFinanceira_Id=0,this.moeda_Id=0}}var I=[{field:"id",header:"Id",maskType:o.O.undefined,filterType:o.vA.text,filterDisplay:o.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,showOperator:!1,filterMatchMode:l.a6.EQUALS},{field:"dataInvoice",header:"Data",maskType:o.O.dateTime,filterType:o.vA.datetime,filterDisplay:o.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,showOperator:!0,filterMatchMode:l.a6.DATE_IS},{field:"valor",header:"Valor",maskType:o.O.number,filterType:o.vA.numeric,filterDisplay:o.w2.menu,decimal:"1.2",filterShowAddButton:!0,filterShowMatchMode:!0,showOperator:!0,filterMatchMode:l.a6.CONTAINS},{field:"banco",header:"Banco",maskType:o.O.undefined,filterType:o.vA.text,filterDisplay:o.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,showOperator:!1,filterMatchMode:l.a6.CONTAINS},{field:"beneficiario",header:"Beneficiario",maskType:o.O.undefined,filterType:o.vA.text,filterDisplay:o.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,showOperator:!1,filterMatchMode:l.a6.CONTAINS},{field:"instituicaoFinanceira",header:"Institui\xe7\xe3o Financeira",maskType:o.O.undefined,filterType:o.vA.text,filterDisplay:o.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,showOperator:!1,filterMatchMode:l.a6.CONTAINS}],t=n(9291),v=n(8787),u=n(9862),g=n(5619),b=n(9397),T=n(2096),O=n(553),S=n(2425);let x=(()=>{class e{constructor(i,s,a){this.table=i,this.http=s,this.toastr=a,this.url=O.N.url,this.list=new g.X([]),this.object=new g.X(new w)}getList(){return this.table.loading.next(!0),this.http.get(`${this.url}/invoice`,{headers:new u.WM({loading:"false"})}).pipe((0,b.b)({next:i=>(i=i.map(s=>(s.dataInvoice=new Date(s.dataInvoice),s)),this.list.next(Object.assign([],i)),(0,T.of)(i)),error:i=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de invoices.")}))}get(i){return this.http.get(`${this.url}/invoice/${i}`,{headers:new u.WM({loading:"true"})}).pipe((0,b.b)({next:s=>(this.object.next(Object.assign({},s)),(0,T.of)(s)),error:s=>this.toastr.error("N\xe3o foi poss\xedvel carregar listagem de invoices.")}))}create(i){return this.http.post(`${this.url}/invoice`,i)}delete(i){return this.http.delete(`${this.url}/invoice/${i}`)}static#t=this.\u0275fac=function(s){return new(s||e)(t.LFG(v.i),t.LFG(u.eN),t.LFG(S._W))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var C=n(6599);const Z=function(){return["cadastrar"]};function D(e,p){1&e&&(t.TgZ(0,"div",9)(1,"a",10)(2,"span",11),t._uU(3," Cadastrar Invoice"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,Z)))}let L=(()=>{class e{constructor(i,s){this.table=i,this.invoiceService=s,this.list=[],this.tableLinks=[],this.columns=I,this.subscription=[];var a=this.invoiceService.list.subscribe(h=>this.list=Object.assign([],h));this.subscription.push(a),(0,d.n)(this.invoiceService.getList());var r=this.table.selected.subscribe(h=>{h&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(r)}ngOnDestroy(){this.subscription.forEach(i=>i.unsubscribe())}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(v.i),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:12,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[1,"bi","bi-file-earmark-text"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"topActions","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-4","col-md-5","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(s,a){if(1&s&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t._UZ(3,"i",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6,"Invoice"),t.qZA()()(),t.TgZ(7,"div",6),t.YNc(8,D,4,2,"ng-template",null,7,t.W1O),t._UZ(10,"app-list-shared",8),t.qZA()(),t._UZ(11,"router-outlet")),2&s){const r=t.MAs(9);t.xp6(10),t.Q6J("topActions",r)("list",a.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0)}},dependencies:[c.lC,c.rH,C.o]})}return e})(),y=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:2,vars:0,template:function(s,a){1&s&&(t.TgZ(0,"p"),t._uU(1,"form works!"),t.qZA())}})}return e})();var N=n(590),B=n(342),F=n(8008),U=n(2667),A=n(5597);const E=["template"],Y=["icon"];function k(e,p){if(1&e&&t._UZ(0,"fa-icon",2),2&e){const i=t.oxw();t.Q6J("icon",i.faTrash)}}function j(e,p){if(1&e&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&e){const i=t.oxw(2);t.xp6(2),t.Oqu(i.erro)}}function G(e,p){1&e&&t._UZ(0,"span",9)}function J(e,p){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,j,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.send())}),t.YNc(7,G,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&e){const i=t.oxw();t.xp6(5),t.Q6J("ngIf",i.erro),t.xp6(2),t.Q6J("ngIf",i.loading)}}const Q=[{path:"",component:L,children:[{path:"cadastrar",component:y},{path:"editar/:invoice_id",component:y},{path:"excluir/:invoice_id",component:(()=>{class e{constructor(i,s,a,r){this.activatedRoute=i,this.modal=s,this.invoiceService=a,this.crypto=r,this.faTrash=N.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var h=i.params.subscribe(M=>{M.id?(this.id=this.crypto.decrypt(M.id),(0,d.n)(this.invoiceService.get(this.id)).then(H=>{setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(H=>{this.voltar()})):this.voltar()});this.subscription.push(h)}ngAfterViewInit(){this.modal.title.next("Excluir registro"),this.modal.template.next(this.template),this.modal.style.next({"max-width":"400px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon)}ngOnDestroy(){this.subscription.forEach(i=>i.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){this.loading=!0,this.erro="",(0,d.n)(this.invoiceService.delete(this.id)).then(i=>{(0,d.n)(this.invoiceService.getList()),this.voltar(),this.loading=!1}).catch(i=>{this.loading=!1,this.erro=(0,B.b)(i)})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(c.gz),t.Y36(F.u),t.Y36(x),t.Y36(U.w))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-delete"]],viewQuery:function(s,a){if(1&s&&(t.Gf(E,5),t.Gf(Y,5)),2&s){let r;t.iGM(r=t.CRH())&&(a.template=r.first),t.iGM(r=t.CRH())&&(a.icon=r.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,a){1&s&&(t.YNc(0,k,1,1,"ng-template",null,0,t.W1O),t.YNc(2,J,10,2,"ng-template",null,1,t.W1O))},dependencies:[f.O5,A.BN]})}return e})()}]}];let W=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(Q),c.Bz]})}return e})();var $=n(6223),z=n(6208);let R=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[f.ez,W,$.u5,A.uH,z.m]})}return e})()}}]);
"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[982],{9982:(Fe,S,p)=>{p.r(S),p.d(S,{OperacoesModule:()=>Je});var g=p(6814),f=p(132),H=p(2832),_=p(708),w=p(8145),v=p(590),L=p(674),t=p(9291),G=p(8787),C=p(2828),V=p(6599);const R=function(){return["exportar"]},z=function(){return["importar"]},j=function(){return["cadastrar"]};function $(o,s){1&o&&(t.TgZ(0,"div",13)(1,"a",14)(2,"span",15),t.O4$(),t.TgZ(3,"svg",16),t._UZ(4,"path",17)(5,"path",18),t.qZA()(),t.kcU(),t.TgZ(6,"span",19),t._uU(7," Exportar PDF"),t.qZA()()(),t.TgZ(8,"div",13)(9,"a",20)(10,"span",15),t.O4$(),t.TgZ(11,"svg",21),t._UZ(12,"path",17)(13,"path",22),t.qZA()(),t.kcU(),t.TgZ(14,"span",19),t._uU(15," Importar EXCEL"),t.qZA()()(),t.TgZ(16,"div",23)(17,"a",24)(18,"span",19),t._uU(19," Cadastrar Opera\xe7\xe3o"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("routerLink",t.DdM(3,R)),t.xp6(8),t.Q6J("routerLink",t.DdM(4,z)),t.xp6(8),t.Q6J("routerLink",t.DdM(5,j)))}let K=(()=>{class o{constructor(e,a,n){this.table=e,this.pessoaOperacaoService=a,this.isMobile=n,this.faFilePdf=v.gSj,this.maskType=H.O,this.list=[],this.tableLinks=[],this.columns=w.Yv,this.subscription=[],this.screen=L.I.lg;var i=this.pessoaOperacaoService.list.subscribe(m=>{this.list=Object.assign([],m)});this.subscription.push(i);var l=this.isMobile.value.subscribe(m=>this.screen=m);this.subscription.push(l),(0,_.n)(this.pessoaOperacaoService.getList());var r=this.table.selected.subscribe(m=>{m&&(this.tableLinks=[{label:"Detalhes",routePath:["detalhes"],paramsFieldName:["id"]},{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(r)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(G.i),t.Y36(C.m),t.Y36(L.h))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],decls:16,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"me-auto"],[1,"page__header-title"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mx-md-1","mb-2","px-0","ng-star-inserted"],[1,"btn","btn-danger","btn-pdf","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],[1,"me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"],[2,"margin-top","-1px","margin-bottom","1px"],[1,"btn","btn-success","bg-success","border-success","btn-excel","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-upload",2,"filter","drop-shadow(0px 0px 0px white)"],["d","M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"],[1,"col-xl-3","col-lg-3","col-md-4","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",3,"routerLink"]],template:function(a,n){if(1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),t.qZA()(),t.kcU(),t.TgZ(8,"div",8)(9,"h3",9),t._uU(10,"Opera\xe7\xf5es"),t.qZA()()(),t.TgZ(11,"div",10),t.YNc(12,$,20,6,"ng-template",null,11,t.W1O),t._UZ(14,"app-list-shared",12),t.qZA()(),t._UZ(15,"router-outlet")),2&a){const i=t.MAs(13);t.xp6(14),t.Q6J("list",n.list)("topActions",i)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0)}},dependencies:[f.lC,f.rH,V.o]})}return o})();var y=p(342),M=p(8008),q=p(2719),W=p(1225),E=p(2667),I=p(2425),O=p(2352),J=p(5219),d=p(6223),B=p(8839),X=p(6044);const tt=["template"],et=["icon"];function ot(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4)(3,"path",5)(4,"path",6),t.qZA())}function at(o,s){if(1&o&&(t.TgZ(0,"table",37)(1,"tbody")(2,"tr")(3,"td",38),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"tr")(11,"td",38),t._uU(12),t.qZA(),t.TgZ(13,"td",38),t._uU(14,"Situa\xe7\xe3o CPF: "),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()),2&o){const e=s.$implicit;let a;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(t.gM2(9,4,e.saldoAtual,"BRL","","1.2")),t.xp6(4),t.Oqu(e.cpf),t.xp6(4),t.Oqu(null!==(a=e.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function nt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function it(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,nt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(10);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function st(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function rt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,st,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(19);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function lt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function pt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,lt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(28);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function ct(o,s){if(1&o&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("ngValue",e.id),t.xp6(1),t.Oqu(e.name)}}function dt(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function mt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,dt,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(42);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function _t(o,s){if(1&o&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function ut(o,s){1&o&&(t.TgZ(0,"p",13),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function gt(o,s){if(1&o&&(t.TgZ(0,"div",40),t.YNc(1,_t,2,1,"p",39),t.YNc(2,ut,2,0,"p",39),t.qZA()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!a.erro)}}function ht(o,s){1&o&&t._UZ(0,"span",41)}function ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",7,8),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.TgZ(2,"div",9)(3,"div",10)(4,"div",11)(5,"label",12),t._uU(6,"Pessoa: "),t.TgZ(7,"span",13),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"p-dropdown",14,15),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.pessoa_Id=n)}),t.YNc(11,at,17,9,"ng-template",16),t.qZA(),t.YNc(12,it,2,1,"div",17),t.qZA(),t.TgZ(13,"div",18)(14,"label",19),t._uU(15,"N\xba Opera\xe7\xe3o: "),t.TgZ(16,"span",13),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"input",20,21),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.num_Op=n)}),t.qZA(),t.YNc(20,rt,2,1,"div",17),t.qZA()(),t.TgZ(21,"div",10)(22,"div",22)(23,"label",23),t._uU(24,"Data: "),t.TgZ(25,"span",13),t._uU(26,"*"),t.qZA()(),t.TgZ(27,"input",24,25),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.data=n)}),t.qZA(),t.YNc(29,pt,2,1,"div",17),t.qZA(),t.TgZ(30,"div",22)(31,"label",26),t._uU(32,"Valor: "),t.TgZ(33,"span",13),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"app-input-number",27),t.NdJ("valueChanges",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.valor=n)}),t.qZA()(),t.TgZ(36,"div",22)(37,"label",28),t._uU(38,"Status: "),t.TgZ(39,"span",13),t._uU(40,"*"),t.qZA()(),t.TgZ(41,"select",29,30),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.objeto.operacao_Status_Id=n)}),t.TgZ(43,"option",31),t._uU(44,"Selecione"),t.qZA(),t.YNc(45,ct,2,2,"option",32),t.qZA(),t.YNc(46,mt,2,1,"div",17),t.qZA()()(),t.TgZ(47,"div",33),t.YNc(48,gt,3,2,"div",34),t.TgZ(49,"button",35),t.YNc(50,ht,1,0,"span",36),t.TgZ(51,"span"),t._uU(52,"Salvar"),t.qZA()()()()}if(2&o){const e=t.MAs(1),a=t.MAs(10),n=t.MAs(19),i=t.MAs(28),l=t.MAs(42),r=t.oxw();t.xp6(9),t.Q6J("options",r.pessoas)("ngModel",r.objeto.pessoa_Id)("styleClass","form-control "+(r.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0)("disabled",r.isEditPage)("readonly",r.isEditPage)("required",!0),t.xp6(3),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(6),t.Q6J("ngModel",r.objeto.num_Op),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(7),t.Q6J("ngModel",r.objeto.data),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(6),t.Q6J("valueInput",r.objeto.valor)("inputId","valor")("mask","separator.2")("showErrorMessage",!0)("allowNegativeNumbers",!1)("required",!0)("autoReplaceValue",!1),t.xp6(6),t.ekj("form-control-loading",r.loadingStatus),t.Q6J("ngModel",r.objeto.operacao_Status_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",r.status),t.xp6(1),t.Q6J("ngIf",l.touched&&l.errors),t.xp6(2),t.Q6J("ngIf",r.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}let D=(()=>{class o{constructor(e,a,n,i,l,r,m,u){this.activatedRoute=e,this.modal=a,this.pessoaService=n,this.pessoaSaldoService=i,this.pessoaOperacaoService=l,this.crypto=r,this.datepipe=m,this.toastr=u,this.objeto=new w.fs,this.erro="",this.loading=!1,this.subscription=[],this.status=[],this.loadingStatus=!0,this.pessoas=[],this.loadingPessoa=!0,this.isEditPage=!0,this.pessoa_id=0,this.routeBackOptions={relativeTo:this.activatedRoute},(0,_.n)(this.pessoaOperacaoService.getStatus()).then(h=>{this.loadingStatus=!1,this.status=h}),(0,_.n)(this.pessoaService.getList()).then(h=>{this.loadingPessoa=!1,this.pessoas=h})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.style.next({"max-width":"600px",overflow:"visible"}),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon);var e=this.activatedRoute.params.subscribe(a=>{a.operacao_id?(this.objeto.id=this.crypto.decrypt(a.operacao_id),this.modal.title.next("Editar Opera\xe7\xe3o"),this.modal.routerBack.next(["../../"]),this.isEditPage=!0,(0,_.n)(this.pessoaOperacaoService.get(this.objeto.id)).then(n=>{n.data=this.datepipe.transform(n.data,"yyyy-MM-ddThh:mm"),n.num_Op=n.num_Op.toString().padStart(4,"0"),this.objeto=n,this.pessoa_id=this.objeto.pessoa_Id,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(n=>{this.voltar()})):(this.modal.title.next("Cadastrar Opera\xe7\xe3o"),this.modal.routerBack.next(["../"]),this.isEditPage=!1,this.objeto.data=this.datepipe.transform(this.objeto.data,"yyyy-MM-ddThh:mm"),setTimeout(()=>{this.modal.setOpen(!0)},200))});this.subscription.push(e)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}send(){this.loading=!0,this.erro="",this.request().then(e=>{1==e.successo?((0,_.n)(this.pessoaService.getList()),(0,_.n)(this.pessoaSaldoService.getList(this.objeto.pessoa_Id)),(0,_.n)(this.pessoaOperacaoService.getListById(this.objeto.pessoa_Id)),(0,_.n)(this.pessoaOperacaoService.getList()),this.voltar()):(this.erro=e.mensagem,this.toastr.error(e.mensagem)),this.loading=!1}).catch(e=>{this.loading=!1,this.erro=(0,y.b)(e)})}request(){return 0==this.objeto.id?(0,_.n)(this.pessoaOperacaoService.create(this.objeto)):(this.isEditPage&&(this.objeto.pessoa_Id=this.pessoa_id),(0,_.n)(this.pessoaOperacaoService.edit(this.objeto)))}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(f.gz),t.Y36(M.u),t.Y36(q.N),t.Y36(W.R),t.Y36(C.m),t.Y36(E.w),t.Y36(g.uU),t.Y36(I._W))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form"]],viewQuery:function(a,n){if(1&a&&(t.Gf(tt,5),t.Gf(et,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cash-coin"],["fill-rule","evenodd","d","M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"],["d","M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"],["d","M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"],["d","M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-md-8","col-sm-8","col-12"],["for","pessoa_Id"],[1,"text-danger"],["filterBy","nome, saldoAtual, cpf, situacaoCPF","name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Selecione um pessoa",3,"options","ngModel","styleClass","showClear","filter","disabled","readonly","required","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"form-group","col-md-4","col-sm-4","col-sm-12"],["for","num_Op"],["mask","0000","name","num_Op","id","num_Op","required","",1,"form-control",3,"ngModel","ngModelChange"],["num_Op","ngModel"],[1,"form-group","col-md-4","col-sm-12"],["for","data"],["type","datetime-local","name","data","id","data","required","",1,"form-control",3,"ngModel","ngModelChange"],["data","ngModel"],["for","valor"],[3,"valueInput","inputId","mask","showErrorMessage","allowNegativeNumbers","required","autoReplaceValue","valueChanges"],["for","operacao_Status_Id"],["name","operacao_Status_Id","id","operacao_Status_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["operacao_Status_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],["class","text-danger",4,"ngIf"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.YNc(0,ot,5,0,"ng-template",null,0,t.W1O),t.YNc(2,ft,53,29,"ng-template",null,1,t.W1O))},dependencies:[g.sg,g.O5,O.Lt,J.jx,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.On,d.F,B.hx,X.l,g.H9]})}return o})();var N=p(5597);const xt=["template"],vt=["icon"];function Zt(o,s){if(1&o&&t._UZ(0,"fa-icon",2),2&o){const e=t.oxw();t.Q6J("icon",e.faTrash)}}function Tt(o,s){if(1&o&&(t.TgZ(0,"div",7)(1,"p",8),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.erro)}}function Ct(o,s){1&o&&t._UZ(0,"span",9)}function bt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"p",3),t._uU(2,"Tem certeza que deseja excluir esse registro? "),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.YNc(5,Tt,3,1,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(7,Ct,1,0,"span",6),t.TgZ(8,"span"),t._uU(9,"Excluir"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.erro),t.xp6(2),t.Q6J("ngIf",e.loading)}}let At=(()=>{class o{constructor(e,a,n,i,l){this.modal=e,this.crypto=a,this.activatedRoute=n,this.pessoaService=i,this.pessoaOperacaoService=l,this.faTrash=v.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.routeBackOptions={relativeTo:this.activatedRoute};var r=n.params.subscribe(m=>{m.operacao_id?(this.id=this.crypto.decrypt(m.operacao_id),(0,_.n)(this.pessoaService.get(this.id)).then(u=>{setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(u=>{this.voltar()})):this.voltar()});this.subscription.push(r)}ngAfterViewInit(){this.modal.title.next("Excluir registro"),this.modal.template.next(this.template),this.modal.style.next({"max-width":"400px"}),this.modal.routerBack.next(["../../"]),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}send(){this.loading=!0,this.erro="",(0,_.n)(this.pessoaOperacaoService.delete(this.id)).then(e=>{(0,_.n)(this.pessoaService.getList()),(0,_.n)(this.pessoaOperacaoService.getList()),this.voltar(),this.loading=!1}).catch(e=>{this.loading=!1,this.erro=(0,y.b)(e)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(M.u),t.Y36(E.w),t.Y36(f.gz),t.Y36(q.N),t.Y36(C.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete"]],viewQuery:function(a,n){if(1&a&&(t.Gf(xt,5),t.Gf(vt,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.YNc(0,Zt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,bt,10,2,"ng-template",null,1,t.W1O))},dependencies:[g.O5,N.BN]})}return o})();var Mt=p(1193),k=p(1486),U=p(4685),P=p(1532);const qt=["template"],wt=["icon"],It=["file"];function Ut(o,s){1&o&&t._UZ(0,"img",2)}function yt(o,s){if(1&o&&(t.TgZ(0,"div",21),t._UZ(1,"span",22)(2,"br"),t.TgZ(3,"p"),t._uU(4,"Carregando arquivo."),t.qZA()()),2&o){const e=t.oxw(2);t.ekj("active",e.loading)}}function Et(o,s){1&o&&(t.TgZ(0,"h5"),t._uU(1,"Nenhuma linha incorreta"),t.qZA())}function Ot(o,s){if(1&o&&(t.TgZ(0,"div")(1,"h6",25),t._uU(2),t.qZA(),t.TgZ(3,"p",25),t._uU(4,"As linhas incorretas n\xe3o ser\xe3o cadastradas."),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij("",e.listErros.length," linha(s) incorreta(s)")}}function Jt(o,s){if(1&o&&(t.TgZ(0,"div",23)(1,"p"),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.YNc(4,Et,2,0,"h5",24),t.YNc(5,Ot,5,1,"div",24),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij("",t.gM2(3,3,e.listOkValidation.length,"BRL","","1.0")," linha(s) processada(s)"),t.xp6(2),t.Q6J("ngIf",0==e.listErros.length),t.xp6(1),t.Q6J("ngIf",e.listErros.length>0)}}function Nt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"p-calendar",40),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw(5);return t.KtG(i.currentDateFilter.dataTransacao=n)})("onClear",function(){t.CHM(e);const n=t.oxw(5);return t.KtG(n.currentDateFilter.dataTransacao=void 0)})("onBlur",function(){const i=t.CHM(e).filterCallback;t.oxw();const l=t.MAs(14),r=t.oxw(4);return t.KtG(r.primeNgDataFilter(r.currentDateFilter.dataTransacao,i,l))})("onSelect",function(){const i=t.CHM(e).filterCallback;t.oxw();const l=t.MAs(14),r=t.oxw(4);return t.KtG(r.primeNgDataFilter(r.currentDateFilter.dataTransacao,i,l))}),t.qZA()}if(2&o){const e=t.oxw(5);t.Q6J("ngModel",e.currentDateFilter.dataTransacao)("showIcon",!0)}}function Ft(o,s){1&o&&(t.TgZ(0,"tr",31)(1,"th")(2,"span",15),t._uU(3,"Linha"),t.qZA()(),t.TgZ(4,"th")(5,"span",15),t._uU(6,"Erro"),t.qZA()(),t.TgZ(7,"th")(8,"span",15),t._uU(9,"Data da "),t._UZ(10,"br"),t._uU(11," Transa\xe7\xe3o"),t.qZA(),t._UZ(12,"p-sortIcon",32),t.TgZ(13,"p-columnFilter",33,34),t.YNc(15,Nt,1,2,"ng-template",35),t.qZA()(),t.TgZ(16,"th")(17,"span",15),t._uU(18,"Tipo de "),t._UZ(19,"br"),t._uU(20," Cliente no "),t._UZ(21,"br"),t._uU(22," Brasil"),t.qZA(),t._UZ(23,"p-sortIcon",32)(24,"p-columnFilter",36),t.qZA(),t.TgZ(25,"th")(26,"div",37)(27,"span",38),t._uU(28,"CPF/CNPJ do "),t._UZ(29,"br"),t._uU(30," cliente no "),t._UZ(31,"br"),t._uU(32," Brasil"),t.qZA(),t._UZ(33,"p-sortIcon",32)(34,"p-columnFilter",36),t.qZA()(),t.TgZ(35,"th")(36,"span",15),t._uU(37,"Nome do Cliente no Brasil"),t.qZA(),t._UZ(38,"p-sortIcon",32)(39,"p-columnFilter",36),t.qZA(),t.TgZ(40,"th")(41,"span",15),t._uU(42,"Nome do Comprador ou Vendedor no "),t._UZ(43,"br"),t._uU(44," Exterior"),t.qZA(),t._UZ(45,"p-sortIcon",32)(46,"p-columnFilter",36),t.qZA(),t.TgZ(47,"th")(48,"span",15),t._uU(49,"Pa\xeds do "),t._UZ(50,"br"),t._uU(51," Comprador "),t._UZ(52,"br"),t._uU(53," ou Vendedor "),t._UZ(54,"br"),t._uU(55," no Exterior"),t.qZA(),t._UZ(56,"p-sortIcon",32)(57,"p-columnFilter",36),t.qZA(),t.TgZ(58,"th")(59,"span",15),t._uU(60,"Moeda"),t.qZA(),t._UZ(61,"p-sortIcon",32)(62,"p-columnFilter",36),t.qZA(),t.TgZ(63,"th")(64,"span",15),t._uU(65,"Tipo de "),t._UZ(66,"br"),t._uU(67," Transa\xe7\xe3o"),t.qZA(),t._UZ(68,"p-sortIcon",32)(69,"p-columnFilter",36),t.qZA(),t.TgZ(70,"th")(71,"span",15),t._uU(72,"Forma de "),t._UZ(73,"br"),t._uU(74," Pagamento"),t.qZA(),t._UZ(75,"p-sortIcon",32)(76,"p-columnFilter",36),t.qZA(),t.TgZ(77,"th")(78,"span",15),t._uU(79,"Valor na "),t._UZ(80,"br"),t._uU(81," Moeda "),t._UZ(82,"br"),t._uU(83," Estrangeira"),t.qZA(),t._UZ(84,"p-sortIcon",32)(85,"p-columnFilter",36),t.qZA(),t.TgZ(86,"th")(87,"span",15),t._uU(88,"Valor na "),t._UZ(89,"br"),t._uU(90," Moeda "),t._UZ(91,"br"),t._uU(92," Nacional"),t.qZA(),t._UZ(93,"p-sortIcon",32)(94,"p-columnFilter",36),t.qZA(),t.TgZ(95,"th")(96,"span",15),t._uU(97,"Status Opera\xe7\xe3o"),t.qZA(),t._UZ(98,"p-sortIcon",32)(99,"p-columnFilter",36),t.qZA(),t._UZ(100,"th",39),t.qZA()),2&o&&(t.xp6(12),t.Q6J("field","dataTransacao"),t.xp6(1),t.Q6J("type","date")("field","dataTransacao")("display","menu")("matchMode","dateIs")("showMatchModes",!0)("showAddButton",!0)("showOperator",!1),t.xp6(10),t.Q6J("field","tipoCliente"),t.xp6(1),t.Q6J("type","text")("field","tipoCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(9),t.Q6J("field","docCliente"),t.xp6(1),t.Q6J("type","text")("field","docCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","nomeCliente"),t.xp6(1),t.Q6J("type","text")("field","nomeCliente")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","nomeComprador"),t.xp6(1),t.Q6J("type","text")("field","nomeComprador")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(10),t.Q6J("field","paisCompradorVendedor"),t.xp6(1),t.Q6J("type","text")("field","paisCompradorVendedor")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","moeda"),t.xp6(1),t.Q6J("type","text")("field","moeda")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","tipoTransacao"),t.xp6(1),t.Q6J("type","text")("field","tipoTransacao")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(6),t.Q6J("field","formaPagamento"),t.xp6(1),t.Q6J("type","text")("field","formaPagamento")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(8),t.Q6J("field","valorMoedaEstrangeira"),t.xp6(1),t.Q6J("type","text")("field","valorMoedaEstrangeira")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(8),t.Q6J("field","valorMoedaNacional"),t.xp6(1),t.Q6J("type","text")("field","valorMoedaNacional")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1),t.xp6(4),t.Q6J("field","statusOperacao"),t.xp6(1),t.Q6J("type","text")("field","statusOperacao")("display","menu")("matchMode","contains")("showMatchModes",!1)("showAddButton",!1))}function Qt(o,s){if(1&o&&t.YNc(0,Ft,101,85,"tr",30),2&o){const e=t.oxw(3);t.Q6J("ngIf",e.listErros.length>0)}}function Yt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.dataTransacao,"dd/MM/yyyy"))}}function St(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.tipoCliente)}}function Lt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.docCliente)}}function Bt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.nomeCliente)}}function Dt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.nomeComprador)}}function kt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.paisCompradorVendedor)}}function Pt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.moeda)}}function Ht(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.tipoTransacao)}}function Gt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.formaPagamento)}}function Vt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,e.valorMoedaEstrangeira,"BRL","","1.2"))}}function Rt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,e.valorMoedaNacional,"BRL","","1.2"))}}function zt(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.statusOperacao)}}function jt(o,s){1&o&&(t.TgZ(0,"span",25),t._uU(1,"N\\A"),t.qZA())}function $t(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",41)(5,"span",42),t._UZ(6,"fa-icon",43),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()()(),t.TgZ(9,"td"),t.YNc(10,Yt,3,4,"span",44),t.qZA(),t.TgZ(11,"td"),t.YNc(12,St,2,1,"span",44),t.qZA(),t.TgZ(13,"td"),t.YNc(14,Lt,2,1,"span",44),t.qZA(),t.TgZ(15,"td"),t.YNc(16,Bt,2,1,"span",44),t.qZA(),t.TgZ(17,"td"),t.YNc(18,Dt,2,1,"span",44),t.qZA(),t.TgZ(19,"td"),t.YNc(20,kt,2,1,"span",44),t.qZA(),t.TgZ(21,"td"),t.YNc(22,Pt,2,1,"span",44),t.qZA(),t.TgZ(23,"td"),t.YNc(24,Ht,2,1,"span",44),t.qZA(),t.TgZ(25,"td"),t.YNc(26,Gt,2,1,"span",44),t.qZA(),t.TgZ(27,"td"),t.YNc(28,Vt,3,6,"span",44),t.qZA(),t.TgZ(29,"td"),t.YNc(30,Rt,3,6,"span",44),t.qZA(),t.TgZ(31,"td"),t.YNc(32,zt,2,1,"span",44),t.qZA(),t.TgZ(33,"td",39)(34,"button",45),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.removeItem(i))}),t._uU(35,"excluir"),t.qZA()(),t.YNc(36,jt,2,0,"ng-template",null,46,t.W1O),t.qZA()}if(2&o){const e=s.$implicit,a=t.MAs(37),n=t.oxw(3);t.xp6(2),t.Oqu(e.excelLinha),t.xp6(4),t.Q6J("icon",n.faCircleXmark),t.xp6(2),t.Oqu(e.detalhes),t.xp6(2),t.Q6J("ngIf",e.dataTransacao)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.tipoCliente)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.docCliente)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.nomeCliente)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.nomeComprador)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.paisCompradorVendedor)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.moeda)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.tipoTransacao)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.formaPagamento)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.valorMoedaEstrangeira)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.valorMoedaNacional)("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",e.statusOperacao)("ngIfElse",a)}}function Kt(o,s){if(1&o&&(t.TgZ(0,"div",26)(1,"p-table",27),t.YNc(2,Qt,1,1,"ng-template",28),t.YNc(3,$t,38,27,"ng-template",29),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("value",e.listErros)("globalFilterFields",e.filters)("filterDelay",100)("virtualScroll",!0)("scrollable",!0)("scrollHeight",e.listErros.length>5?"300px":46*e.listErros.length+51+"px")("virtualScrollItemSize",46)("loading",e.loading)}}function Wt(o,s){if(1&o&&(t.TgZ(0,"p",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Xt(o,s){1&o&&(t.TgZ(0,"p",25),t._uU(1,"Selecione um arquivo com o padr\xe3o definido."),t.qZA())}function te(o,s){if(1&o&&(t.TgZ(0,"div",47),t.YNc(1,Wt,2,1,"p",48),t.YNc(2,Xt,2,0,"p",48),t.qZA()),2&o){t.oxw();const e=t.MAs(1),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.erro),t.xp6(1),t.Q6J("ngIf",e.valid&&!a.erro||0==a.listOkValidation.length)}}function ee(o,s){1&o&&t._UZ(0,"span",49)}function oe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",3,4),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.TgZ(2,"label",5)(3,"p",6),t._UZ(4,"i",7),t.qZA(),t.TgZ(5,"h3"),t._uU(6,"Clique e arraste para selecionar arquivo"),t.qZA(),t.TgZ(7,"p"),t._uU(8,"ou "),t.TgZ(9,"label",8),t._uU(10,"clique aqui"),t.qZA(),t._uU(11," para abrir explorador de arquivos"),t.qZA(),t.TgZ(12,"input",9,10),t.NdJ("change",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.readExcel1(n))}),t.qZA()(),t.YNc(14,yt,5,2,"div",11),t.YNc(15,Jt,6,8,"div",12),t.YNc(16,Kt,4,8,"div",13),t.TgZ(17,"div",14)(18,"div",15)(19,"p",16)(20,"a",17),t._uU(21,"Clique aqui para saber como deve ser o arquivo XLSX"),t.qZA()(),t.YNc(22,te,3,2,"div",18),t.qZA(),t.TgZ(23,"button",19),t.YNc(24,ee,1,0,"span",20),t.TgZ(25,"span"),t._uU(26,"Salvar"),t.qZA()()()()}if(2&o){const e=t.MAs(1),a=t.oxw();t.xp6(14),t.Q6J("ngIf",a.loading),t.xp6(1),t.Q6J("ngIf",!a.loading&&a.listAll.length>0),t.xp6(1),t.Q6J("ngIf",a.listErros.length>0),t.xp6(6),t.Q6J("ngIf",a.erro||e.invalid||0==a.listOkValidation.length),t.xp6(1),t.Q6J("disabled",e.invalid||a.loading||0==a.listOkValidation.length),t.xp6(1),t.Q6J("ngIf",a.loading)}}let ae=(()=>{class o{constructor(e,a,n,i,l){this.toastr=e,this.modal=a,this.activatedRoute=n,this.pessoaOperacaoService=i,this.pessoaService=l,this.faUpload=v.cf$,this.faCircleXmark=v.WA2,this.faTriangleExclamation=v.ik8,this.faCircleCheck=v.fV7,this.loading=!1,this.modalOpen=!1,this.erro="",this.subscription=[],this.routerBack=["../"],this.listErros=[],this.listAll=[],this.listOkValidation=[],this.requestResponse=[],this.filters=["cpf","nome","dataNascimento","situacaoCPF","dataInscricao","digito","anoObito","excel_Status","excel_Data_Cap","excel_Hora_Cap","excel_IdNum","excel_Erro"],this.currentDateFilter={dataTransacao:void 0},this.retornoAPI=!1,this.routeBackOptions={relativeTo:this.activatedRoute},this.modal.title.next("Importar Arquivo"),this.modal.style.next({width:"max-content","max-width":"95vw"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute)}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.icon.next(this.icon),setTimeout(()=>{this.modal.setOpen(!0)},200)}primeNgDataFilter(e,a,n){e?a(new Date(e)):n.clearFilter()}ngOnDestroy(){this.modal.setOpen(!1),this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions),this.modal.resetModal()}readExcel1(e){this.loading=!0;var a=e.target.files[0];if(a){let i=function(l){n.onload=function(r){var u=k.ij(n.result,{type:"binary"});u.SheetNames.reduce((Z,x)=>{var A=k.P6.sheet_to_txt(u.Sheets[x],{blankrows:!1,rawNumbers:!1}).split("\n");return A.splice(0,1),l.readRows(A,a.name),Z},{}),l.loading=!1},n.readAsBinaryString(a)};var n=new FileReader;this.listErros=[],this.listOkValidation=[],this.listAll=[],i(this)}else this.toastr.info("Nenhum arquivo selecionado")}readRows(e,a){var n=this.setNewId(this.listErros),i=1;e.forEach(l=>{this.readCells(l,n+=1,i+=1,a)}),setTimeout(()=>{this.loading=!1},500)}readCells(e,a,n,i){var l=e.split("\t");try{var r=this.formataData(l[0]),m=l[1],u=l[2]?l[2].toString().replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").padStart(11,"0"):"",h=l[3],Z=l[4],x=l[5],T=l[6],b=l[7],A=l[8],F=l[9],Q=l[10],Y=l[11],c={id:a++,dataTransacao:r,tipoCliente:m,docCliente:u,nomeCliente:h,nomeComprador:Z,paisCompradorVendedor:x,moeda:T,tipoTransacao:b,formaPagamento:A,valorMoedaEstrangeira:F,valorMoedaNacional:Q,statusOperacao:Y,detalhes:"",sucesso:!1,excel:"Linha "+n+" - "+i,excelLinha:n};return!r||Number.isNaN(Date.parse(r.toString()))?(c.detalhes="Data de transa\xe7\xe3o inv\xe1lida.",this.listErros.push(c)):m&&m.trim()?u&&(0,Mt.v)(u)?h&&h.trim()?Z&&Z.trim()?x&&x.trim()?T&&T.trim()?b&&b.trim()?A&&A.trim()?F&&F.trim()?Q&&Q.trim()?Y&&Y.trim()?(c.detalhes="",c.sucesso=!0,this.listOkValidation.push(c)):(c.detalhes="Status opera\xe7\xe3o \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Valor na moeda nacional \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Valor na moeda estrangeira \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Forma de pagamento \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Tipo de transa\xe7\xe3o \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Moeda \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Pa\xeds do comprador ou vendedor no exterior \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Nome do comprador ou vendedor no exterior \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="Nome do Cliente no Brasil \xe9 obrigat\xf3rio.",this.listErros.push(c)):(c.detalhes="CPF inv\xe1lido.",this.listErros.push(c)):(c.detalhes="Tipo de Cliente no Brasil \xe9 obrigat\xf3rio.",this.listErros.push(c)),this.listErros.length>0&&this.modal.style.next({width:"95vw","max-width":"95vw"}),this.listAll.push(c),c}catch(Ne){console.error(Ne),this.toastr.error("N\xe3o foi poss\xedvel importar uma linha. <br> Ignorando linha e processando pr\xf3xima.")}}setNewId(e){return((e=this.sortList(e)).length>0?e[e.length-1].id:0)+1}sortList(e){return e.sort((a,n)=>a.id-n.id)}removeItem(e){var a=this.listAll.findIndex(n=>n.id==e.id&&n.docCliente==e.docCliente);-1!=a?this.listAll.splice(a,1):this.toastr.error("N\xe3o foi poss\xedvel remover item.")}formataData(e,a,n){try{var i=0,l=0,r=0,m=e.split("/"),u=parseInt(m[2]),h=parseInt(m[1]),Z=parseInt(m[0]);if(a){var x=a.split(":");i=parseInt(x[0]),l=parseInt(x[1]),r=parseInt(x[2])}return new Date(u,h,Z,i,l,r)}catch{return}}send(){this.loading=!0,this.erro="";var e=Object.assign([],this.listOkValidation);if(0==(e=e.map(a=>(delete a.id,delete a.detalhes,delete a.sucesso,delete a.excelLinha,delete a.statusCadastro,a))).length)return this.toastr.error("Nenhum item selecionado."),void(this.erro="Nenhum item selecionado.");(0,_.n)(this.pessoaOperacaoService.importacao(e)).then(a=>{this.loading=!1,this.toastr.clear(),a.successo?((0,_.n)(this.pessoaOperacaoService.getList()),(0,_.n)(this.pessoaService.getList()),this.voltar()):(this.toastr.error(a.mensagem),this.erro=a.mensagem,this.retornoAPI=!0)}).catch(a=>{this.loading=!1,this.erro=(0,y.b)(a)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(I._W),t.Y36(M.u),t.Y36(f.gz),t.Y36(C.m),t.Y36(q.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-importacao"]],viewQuery:function(a,n){if(1&a&&(t.Gf(qt,5),t.Gf(wt,5),t.Gf(It,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first),t.iGM(i=t.CRH())&&(n.file=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-excel.png"],[1,"needs-validation",3,"ngSubmit"],["form","ngForm"],["for","file",1,"input-file-container"],[1,"icon"],[1,"pi","pi-upload"],["for","file",1,"link"],["type","file","name","file","id","file","multiple","","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",3,"ngModel","change"],["file","ngModel"],["class","my-loading",3,"active",4,"ngIf"],["class","mb-3 mx-1 py-2",4,"ngIf"],["class","table-responsive content",4,"ngIf"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1"],[1,"me-3"],[1,"text-info"],["href","assets/modelos/modelo-importacao-pessoa.xlsx","download","modelo-importacao-pessoa.xlsx"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"my-loading"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"mb-3","mx-1","py-2"],[4,"ngIf"],[1,"text-danger"],[1,"table-responsive","content"],["styleClass","table table-stripped p-datatable-striped",3,"value","globalFilterFields","filterDelay","virtualScroll","scrollable","scrollHeight","virtualScrollItemSize","loading"],["pTemplate","header"],["pTemplate","body"],["class","grey",4,"ngIf"],[1,"grey"],[3,"field"],[3,"type","field","display","matchMode","showMatchModes","showAddButton","showOperator"],["dataTransacaoFilter",""],["pTemplate","filter"],[3,"type","field","display","matchMode","showMatchModes","showAddButton"],[1,"d-flex","align-items-center","justify-content-between"],[1,"me-auto"],[1,"td-actions"],["inputId","dataTransacao","dateFormat","dd/mm/yy",3,"ngModel","showIcon","ngModelChange","onClear","onBlur","onSelect"],[1,"d-flex","align-items-center"],[1,"me-2","flag","flag-text","flag-danger"],[3,"icon"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-small","btn-dark",3,"click"],["na",""],[1,"m-0"],["class","text-danger",4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div"),t.YNc(1,Ut,1,0,"ng-template",null,0,t.W1O),t.YNc(3,oe,27,6,"ng-template",null,1,t.W1O),t.qZA())},dependencies:[g.O5,N.BN,J.jx,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,U.iA,U.fz,U.xl,P.f,g.H9,g.uU],styles:[".input-file-container[_ngcontent-%COMP%]{width:99%;margin:10px 0;display:flex;flex-flow:column;padding:25px 20px;border:3px dashed rgb(var(--secondary));text-align:center;border-radius:27px;cursor:pointer;transition:.3s;position:relative}.input-file-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:60px;color:rgb(var(--primary));margin-bottom:15px}.input-file-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;margin-bottom:5px}.input-file-container[_ngcontent-%COMP%]:hover, .input-file-container[_ngcontent-%COMP%]:active{background-color:#0000000d}.input-file-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;opacity:0}.content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom}"]})}return o})();var ne=p(5861);const ie=["template"],se=["icon"];function re(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"path",3)(2,"path",4),t.qZA())}function le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",null,5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"label",9),t._uU(6,"Nome:"),t.qZA(),t._UZ(7,"input",10),t.qZA(),t.TgZ(8,"div",11)(9,"label",12),t._uU(10,"CPF:"),t.qZA(),t._UZ(11,"input",13),t.qZA()(),t.TgZ(12,"div",7)(13,"div",14)(14,"label",15),t._uU(15,"Data da Opera\xe7\xe3o:"),t.qZA(),t._UZ(16,"input",16),t.qZA(),t.TgZ(17,"div",14)(18,"label",17),t._uU(19,"Valor da Opera\xe7\xe3o:"),t.qZA(),t._UZ(20,"input",18),t.qZA()(),t.TgZ(21,"div",7)(22,"div",19)(23,"label",20),t._uU(24,"Limite Concedido:"),t.qZA(),t._UZ(25,"input",21),t.qZA(),t.TgZ(26,"div",19)(27,"label",22),t._uU(28,"Limite Utilizado:"),t.qZA(),t._UZ(29,"input",23),t.qZA(),t.TgZ(30,"div",19)(31,"label",24),t._uU(32,"Limite Atual:"),t.qZA(),t._UZ(33,"input",25),t.qZA(),t.TgZ(34,"div",26)(35,"label",27),t._uU(36,"Status Opera\xe7\xe3o:"),t.qZA(),t._UZ(37,"input",28),t.qZA()(),t.TgZ(38,"div",29)(39,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportarPDF())}),t.TgZ(40,"span",31),t.O4$(),t.TgZ(41,"svg",32),t._UZ(42,"path",33)(43,"path",34),t.qZA()(),t._uU(44," Exportar relat\xf3rio "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("value",e.objetoList.nomeCliente),t.xp6(4),t.Q6J("value",e.objetoList.cpfCliente),t.xp6(5),t.Q6J("value",e.objeto.data),t.xp6(4),t.Q6J("value",e.objetoList.valorOperacao),t.xp6(5),t.Q6J("value",e.objetoList.limiteConcedido),t.xp6(4),t.Q6J("value",e.objetoList.limiteUtilizado),t.xp6(4),t.Q6J("value",e.objetoList.limiteAtual),t.xp6(4),t.Q6J("value",e.objetoList.statusOperacao)}}let pe=(()=>{class o{constructor(e,a,n,i,l,r,m){this.activatedRoute=e,this.toastr=a,this.modal=n,this.crypto=i,this.datepipe=l,this.pessoaService=r,this.pessoaOperacaoService=m,this.faFile=v.gMD,this.modalOpen=!1,this.objeto=new w.fs,this.objetoList=new w.cU,this.loading=!1,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var u=this.modal.getOpen().subscribe(h=>this.modalOpen=h);this.subscription.push(u),this.modal.title.next("Detalhes"),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){var e=this,a=this.activatedRoute.params.subscribe(function(){var n=(0,ne.Z)(function*(i){if(i.operacao_id){if(e.objeto.id=e.crypto.decrypt(i.operacao_id),0==(l=e.pessoaOperacaoService.list.value).length)var l=yield(0,_.n)(e.pessoaOperacaoService.getList());if(e.objetoList=l.find(r=>r.id==e.objeto.id),!e.objetoList)return void e.voltar();e.objeto.data=e.datepipe.transform(new Date(e.objeto.data),"yyyy-MM-ddTHH:mm"),(0,_.n)(e.pessoaOperacaoService.get(e.objeto.id)).then(r=>{e.objeto=r}).catch(r=>{e.voltar()})}else e.voltar()});return function(i){return n.apply(this,arguments)}}());this.subscription.push(a),this.modal.template.next(this.template),this.modal.icon.next(this.icon),setTimeout(()=>{this.modal.setOpen(!0)},200)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}exportarPDF(){this.loading=!0,this.loading=!1}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(f.gz),t.Y36(I._W),t.Y36(M.u),t.Y36(E.w),t.Y36(g.uU),t.Y36(q.N),t.Y36(C.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-details"]],viewQuery:function(a,n){if(1&a&&(t.Gf(ie,5),t.Gf(se,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-post",2,"margin-top","-6px"],["d","M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"],["d","M4 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-7zm0-3a.5.5 0 0 1 .5-.5H7a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5z"],["form","ngForm"],[1,"px-2"],[1,"row"],[1,"form-group","col-lg-9","col-md-6","col-12"],["for","nome"],["type","text","id","nome","name","nome","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-3","col-md-6","col-12"],["for","cpfCliente"],["type","text","id","cpfCliente","name","cpfCliente","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-6","col-12"],["for","dataOperacao"],["type","datetime-local","id","dataOperacao","name","dataOperacao","readonly","",1,"form-control",3,"value"],["for","valorOperacao"],["type","text","id","valorOperacao","name","valorOperacao","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-4","col-md-6","col-sm-6","col-12"],["for","limiteConcedido"],["type","text","id","limiteConcedido","name","limiteConcedido","readonly","",1,"form-control",3,"value"],["for","limiteUtilizado"],["type","text","id","limiteUtilizado","name","limiteUtilizado","readonly","",1,"form-control",3,"value"],["for","limiteAtual"],["type","text","id","limiteAtual","name","limiteAtual","readonly","",1,"form-control",3,"value"],[1,"form-group","col-lg-6","col-md-6","col-sm-6","col-12"],["for","status"],["type","text","id","status","name","status","readonly","",1,"form-control",3,"value"],[1,"row","px-1","mt-2"],[1,"btn","btn-dark",3,"click"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-down"],["fill-rule","evenodd","d","M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"],["fill-rule","evenodd","d","M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"]],template:function(a,n){1&a&&(t.YNc(0,re,3,0,"ng-template",null,0,t.W1O),t.YNc(2,le,45,8,"ng-template",null,1,t.W1O))},dependencies:[d._Y,d.JL,d.F]})}return o})();const ce=["template"],de=["icon"];function me(o,s){1&o&&t._UZ(0,"img",2)}function _e(o,s){if(1&o&&(t.TgZ(0,"table",38)(1,"tbody")(2,"tr")(3,"td",39),t._uU(4),t.qZA(),t.TgZ(5,"td",39),t._uU(6,"Saldo atual: "),t.TgZ(7,"strong"),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"tr")(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14,"Situa\xe7\xe3o CPF: "),t.TgZ(15,"strong"),t._uU(16),t.qZA()()()()()),2&o){const e=s.$implicit;let a;t.xp6(4),t.Oqu(e.nome),t.xp6(4),t.Oqu(t.gM2(9,4,e.saldoAtual,"BRL","","1.2")),t.xp6(4),t.Oqu(e.cpf),t.xp6(4),t.Oqu(null!==(a=e.situacaoCPF)&&void 0!==a?a:"INDEFINIDO")}}function ue(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function ge(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ue,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(13);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function he(o,s){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function fe(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function xe(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,fe,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(35);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function ve(o,s){1&o&&(t.TgZ(0,"span",40),t._uU(1,"*"),t.qZA())}function Ze(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function Te(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Ze,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(42);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ce(o,s){1&o&&(t.TgZ(0,"p",40),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function be(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Ce,2,0,"p",23),t.qZA()),2&o){t.oxw();const e=t.MAs(55);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ae(o,s){if(1&o&&(t.TgZ(0,"p",40),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Me(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,Ae,2,1,"p",23),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.erro)}}function qe(o,s){1&o&&t._UZ(0,"span",42)}function we(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h6"),t._uU(3,"Escolha os dados que deseja exportar"),t.qZA()(),t.TgZ(4,"form",null,5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11,"Pessoa: "),t.qZA(),t.TgZ(12,"p-dropdown",11,12),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.pessoa_Id=n)}),t.YNc(14,_e,17,9,"ng-template",13),t.qZA(),t.YNc(15,ge,2,1,"div",14),t.qZA()()(),t.TgZ(16,"div",7)(17,"div",8)(18,"div",15)(19,"input",16,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(21,"label",18),t._uU(22,"Exportar base completa"),t.qZA()()()(),t.TgZ(23,"div",7)(24,"div",8)(25,"div",15)(26,"input",19,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(28,"label",20),t._uU(29,"Exportar por Per\xedodo"),t.qZA()(),t.TgZ(30,"div",21)(31,"label",22),t._uU(32,"De: "),t.YNc(33,he,2,0,"span",23),t.qZA(),t.TgZ(34,"input",24,25),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.de=n)}),t.qZA(),t.YNc(36,xe,2,1,"div",14),t.qZA(),t.TgZ(37,"div",21)(38,"label",26),t._uU(39,"At\xe9: "),t.YNc(40,ve,2,0,"span",23),t.qZA(),t.TgZ(41,"input",27,28),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.ate=n)}),t.qZA(),t.YNc(43,Te,2,1,"div",14),t.qZA()()(),t.TgZ(44,"div",7)(45,"div",8)(46,"div",15)(47,"input",29,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.datasFiltro=n)})("ngModelChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.datasChanged())}),t.qZA(),t.TgZ(49,"label",30),t._uU(50,"Exportar por Data"),t.qZA()(),t.TgZ(51,"div",9)(52,"label",31),t._uU(53,"Data:"),t.qZA(),t.TgZ(54,"input",32,33),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw();return t.KtG(i.filtro.data=n)}),t.qZA(),t.YNc(56,be,2,1,"div",14),t.qZA()()()(),t.TgZ(57,"div",4)(58,"div",34),t.YNc(59,Me,2,1,"div",35),t.TgZ(60,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportar())}),t.YNc(61,qe,1,0,"span",37),t.TgZ(62,"span"),t._uU(63,"Exportar"),t.qZA()()()()()()}if(2&o){const e=t.MAs(5),a=t.MAs(13),n=t.MAs(35),i=t.MAs(42),l=t.MAs(55),r=t.oxw();t.xp6(12),t.Q6J("options",r.pessoas)("ngModel",r.filtro.pessoa_Id)("styleClass","form-control "+(r.loadingPessoa?"form-control-loading":""))("showClear",!0)("filter",!0),t.xp6(3),t.Q6J("ngIf",a.touched&&a.errors),t.xp6(4),t.Q6J("value",void 0)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("value",!0)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",r.filtro.de)("required",1==r.datasFiltro||i.value)("disabled",!r.datasFiltro),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(4),t.Q6J("ngIf",n.value||i.value),t.xp6(1),t.Q6J("ngModel",r.filtro.ate)("required",1==r.datasFiltro||n.value)("disabled",!r.datasFiltro),t.xp6(2),t.Q6J("ngIf",i.touched&&i.errors),t.xp6(4),t.Q6J("value",!1)("ngModel",r.datasFiltro),t.xp6(7),t.Q6J("ngModel",r.filtro.data)("required",0==r.datasFiltro)("disabled",null==r.datasFiltro||r.datasFiltro),t.xp6(2),t.Q6J("ngIf",l.touched&&l.errors),t.xp6(3),t.Q6J("ngIf",r.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}let Ie=(()=>{class o{constructor(e,a,n,i,l,r){this.pessoaService=e,this.pessoaOperacaoService=a,this.activatedRoute=n,this.modal=i,this.toastr=l,this.datePipe=r,this.pessoas=[],this.loadingPessoa=!0,this.filtro=new Ue,this.subscription=[],this.erro="",this.loading=!1,(0,_.n)(this.pessoaService.getList()).then(m=>{this.loadingPessoa=!1,this.pessoas=m,setTimeout(()=>{this.modal.setOpen(!0)},200)})}ngAfterViewInit(){this.modal.template.next(this.template),this.modal.style.next({"max-width":"400px",overflow:"visible"}),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon),this.modal.title.next("Exportar Opera\xe7\xf5es"),this.modal.routerBack.next(["../"])}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.modal.routerBack.value,this.routeBackOptions)}datasChanged(){this.datasFiltro?delete this.filtro.data:0==this.datasFiltro?(delete this.filtro.de,delete this.filtro.ate):null==this.datasFiltro&&(delete this.filtro.data,delete this.filtro.de,delete this.filtro.ate)}exportar(){this.loading=!0,(0,_.n)(this.pessoaOperacaoService.exportacao(this.filtro)).then(e=>{var a=new Blob([e],{type:"application/pdf"});const n=window.URL.createObjectURL(a);var i=document.createElement("a");i.href=n,i.download=`Relatorio_Operacoes_${this.datePipe.transform(new Date,"yyyyMMddHHmmss")}`,i.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),this.loading=!1}).catch(e=>{this.loading=!1,this.toastr.error("N\xe3o foi poss\xedvel extrair relat\xf3rio."),this.erro="N\xe3o foi poss\xedvel extrair relat\xf3rio."})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(q.N),t.Y36(C.m),t.Y36(f.gz),t.Y36(M.u),t.Y36(I._W),t.Y36(g.uU))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-exportacao"]],viewQuery:function(a,n){if(1&a&&(t.Gf(ce,5),t.Gf(de,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.template=i.first),t.iGM(i=t.CRH())&&(n.icon=i.first)}},decls:5,vars:0,consts:[["icon",""],["template",""],["src","assets/img/icon-pdf.png"],[1,"px-2"],[1,"row"],["form","ngForm"],[1,"row","mt-2"],[1,"col-12","my-2"],[1,"bg-light","d-flex","flex-wrap","border","py-2"],[1,"form-group","col-12"],["for","pessoa_Id",1,"text-info"],["filterBy","nome, saldoAtual, cpf, situacaoCPF","name","pessoa_Id","inputId","pessoa_Id","optionLabel","nome","optionValue","id","placeholder","Todas",3,"options","ngModel","styleClass","showClear","filter","ngModelChange"],["pessoa_Id","ngModel"],["pTemplate","item"],[4,"ngIf"],[1,"col-12"],["type","radio","name","datas","id","nao",3,"value","ngModel","ngModelChange"],["datas","ngModel"],["for","nao",1,"mb-1","ms-2","text-info"],["type","radio","name","datas","id","intervalo",3,"value","ngModel","ngModelChange"],["for","intervalo",1,"mb-1","ms-2","text-info"],[1,"form-group","col-sm-6","col-12"],["for","de"],["class","text-danger",4,"ngIf"],["type","date","name","de","id","de",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["de","ngModel"],["for","ate"],["type","date","name","ate","id","ate",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["ate","ngModel"],["type","radio","name","datas","id","ou",3,"value","ngModel","ngModelChange"],["for","ou",1,"mb-1","ms-2","text-info"],["for","data"],["type","date","name","data","id","data",1,"form-control",3,"ngModel","required","disabled","ngModelChange"],["data","ngModel"],[1,"px-1","d-flex","justify-content-between","align-items-start"],["class","m-0 me-3",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"w-100"],[1,"pe-2"],[1,"text-danger"],[1,"m-0","me-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(a,n){1&a&&(t.TgZ(0,"div"),t.YNc(1,me,1,0,"ng-template",null,0,t.W1O),t.YNc(3,we,64,29,"ng-template",null,1,t.W1O),t.qZA())},dependencies:[g.O5,O.Lt,J.jx,d._Y,d.Fj,d._,d.JJ,d.JL,d.Q7,d.On,d.F,g.H9]})}return o})();class Ue{constructor(){this.pessoa_Id=void 0}}const ye=[{path:"",component:K,children:[{path:"cadastrar",component:D},{path:"exportar",component:Ie},{path:"importar",component:ae},{path:"editar/:operacao_id",component:D},{path:"detalhes/:operacao_id",component:pe},{path:"excluir/:operacao_id",component:At}]}];let Ee=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(ye),f.Bz]})}return o})();var Oe=p(6208);let Je=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.ez,Ee,N.uH,O.kW,d.u5,B.yI.forChild(),Oe.m,U.U$,P._8]})}return o})()}}]);
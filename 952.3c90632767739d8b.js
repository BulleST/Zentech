"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[952],{9952:(Y,O,i)=>{i.r(O),i.d(O,{BeneficiarioModule:()=>ne});var _=i(6814),b=i(5597),U=i(2352),m=i(6223),t=i(4685),u=i(1532),o=i(132),h=i(5861),T=i(9296),A=i(2832),S=i(708),I=i(590),e=i(9291),P=i(8787),y=i(6793),J=i(6434),R=i(5038),c=i(6599),Z=i(9901);function a(s,M){if(1&s&&(e.TgZ(0,"p",13)(1,"small"),e._uU(2,"Benefici\xe1rios cadastrados em "),e.TgZ(3,"strong"),e._uU(4),e.qZA()()()),2&s){const n=e.oxw();e.xp6(4),e.Oqu(n.empresaSelected.nome||"Empresa X")}}function p(s,M){1&s&&e._UZ(0,"span",14)}const d=function(){return["cadastrar"]};function v(s,M){1&s&&(e.TgZ(0,"div",15)(1,"a",16)(2,"span",17),e._uU(3," Cadastrar Benefici\xe1rio"),e.qZA()()()),2&s&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,d)))}let x=(()=>{class s{constructor(n,r,l,f){var F=this;this.table=n,this.beneficiarioService=r,this.accountService=l,this.empresaService=f,this.faUsers=I.FVb,this.maskType=A.O,this.list=[],this.tableLinks=[],this.columns=T.XM,this.subscription=[],this.loading=!1;var ae=this.beneficiarioService.list.subscribe(C=>this.list=Object.assign([],C));this.subscription.push(ae);var oe=this.beneficiarioService.loading.subscribe(C=>this.loading=C);this.subscription.push(oe);var re=this.empresaService.getEmpresa().subscribe(function(){var C=(0,h.Z)(function*(B){F.empresaSelected=B.empresa,B&&B.id&&(yield(0,S.n)(F.beneficiarioService.getList(!0)))});return function(B){return C.apply(this,arguments)}}());this.subscription.push(re);var le=this.table.selected.subscribe(C=>{C&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]}],3!=this.accountService.accountValue?.perfilAcesso_Id&&this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(le)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}getList(){(0,S.n)(this.beneficiarioService.getList(!0))}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(P.i),e.Y36(y.i),e.Y36(J.B),e.Y36(R.P))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-list"]],decls:18,vars:14,consts:[[1,"page"],[1,"page__header"],[1,"title-icon","align-items-center"],[3,"icon"],[1,"me-auto"],[1,"page__header-title"],["class","page__header-subtitle",4,"ngIf"],[1,"ms-auto","mt-auto",2,"margin-bottom","7px"],[1,"btn","btn-dark",3,"disabled","click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"page__body"],["topActions",""],[3,"list","topActions","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"page__header-subtitle"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"col-xl-4","col-lg-4","col-md-7","col-sm-6","col-12","mb-2","me-md-2","mx-md-1","px-0","ng-star-inserted"],[1,"btn","btn-primary","d-flex","align-items-center","align-baseline","justify-content-center","me-md-0","me-sm-1",2,"width","-1px",3,"routerLink"],[2,"margin-top","-1px","margin-bottom","1px"]],template:function(r,l){if(1&r&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Benefici\xe1rios"),e.qZA(),e.YNc(7,a,5,1,"p",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return l.getList()}),e.YNc(10,p,1,0,"span",9),e._uU(11,"Atualizar"),e.qZA()(),e._UZ(12,"app-empresa-selected"),e.qZA(),e.TgZ(13,"div",10),e.YNc(14,v,4,2,"ng-template",null,11,e.W1O),e._UZ(16,"app-list-shared",12),e.qZA()(),e._UZ(17,"router-outlet")),2&r){const f=e.MAs(15);e.xp6(3),e.Q6J("icon",l.faUsers),e.xp6(4),e.Q6J("ngIf",l.empresaSelected),e.xp6(2),e.Q6J("disabled",l.loading),e.xp6(1),e.Q6J("ngIf",l.loading),e.xp6(6),e.Q6J("list",l.list)("topActions",f)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",l.columns)("tableLinks",l.tableLinks)("selectable",!0)}},dependencies:[_.O5,o.lC,o.rH,b.BN,c.o,Z.j]})}return s})();var D=i(8902),L=i(2855),N=i(342),E=i(9324),g=i(2667);const G=["template"],j=["icon"];function H(s,M){if(1&s&&e._UZ(0,"fa-icon",2),2&s){const n=e.oxw();e.Q6J("icon",n.faTrash)}}function V(s,M){if(1&s&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2),e.qZA()()),2&s){const n=e.oxw(2);e.xp6(2),e.Oqu(n.erro)}}function z(s,M){1&s&&e._UZ(0,"span",9)}function X(s,M){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"p",3),e._uU(2,"Tem certeza que deseja excluir esse registro? "),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.YNc(5,V,3,1,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.send())}),e.YNc(7,z,1,0,"span",6),e.TgZ(8,"span"),e._uU(9,"Excluir"),e.qZA()()()}if(2&s){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.erro),e.xp6(2),e.Q6J("ngIf",n.loading)}}let $=(()=>{class s{constructor(n,r,l,f){this.activatedRoute=n,this.modalService=r,this.beneficiarioService=l,this.crypto=f,this.faTrash=I.$aW,this.id=0,this.erro="",this.loading=!1,this.subscription=[],this.modal=new L.u}ngAfterViewInit(){this.modal.id=0,this.modal.template=this.template,this.modal.icon=this.icon,this.modal.style={"max-width":"400px",overflow:"visible"},this.modal.activatedRoute=this.activatedRoute,this.modal.routerBackOptions={relativeTo:this.activatedRoute},this.modal.routerBack=["../../"],this.modal.title="Excluir registro";var n=this.activatedRoute.params.subscribe(r=>{if(r.beneficiario_id)try{this.id=this.crypto.decrypt(r.beneficiario_id),setTimeout(()=>{this.modal=this.modalService.addModal(this.modal,"delete beneficiario")},200)}catch{this.voltar()}else this.voltar()});this.subscription.push(n)}ngOnDestroy(){this.subscription.forEach(n=>n.unsubscribe())}voltar(){this.modalService.removeModal(this.modal)}send(){this.loading=!0,this.erro="",(0,S.n)(this.beneficiarioService.delete(this.id)).then(n=>{this.loading=!1,n.sucesso?(n.objeto?(0,E.Od)(this.beneficiarioService,n.objeto):(0,S.n)(this.beneficiarioService.getList()),this.voltar()):this.erro=n.mensagem}).catch(n=>{this.loading=!1,this.erro=(0,N.b)(n)})}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(o.gz),e.Y36(L.Z),e.Y36(y.i),e.Y36(g.w))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-delete"]],viewQuery:function(r,l){if(1&r&&(e.Gf(G,5),e.Gf(j,5)),2&r){let f;e.iGM(f=e.CRH())&&(l.template=f.first),e.iGM(f=e.CRH())&&(l.icon=f.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[1,"mt-2"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ms-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"m-0","mt-1"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(r,l){1&r&&(e.YNc(0,H,1,1,"ng-template",null,0,e.W1O),e.YNc(2,X,10,2,"ng-template",null,1,e.W1O))},dependencies:[_.O5,b.BN]})}return s})();var W=i(2996),K=i(2951),w=i(7280),Q=i(490),k=i(9742);const q=[{path:"",component:x,title:"Zentech - Benefici\xe1rios",children:[{path:"cadastrar",component:D.U,title:"Zentech - Cadastrar Benefici\xe1rio",data:{modalOrder:1},children:[{path:"banco",component:W.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:K.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}}]},{path:"editar/:beneficiario_id",title:"Zentech - Editar Benefici\xe1rio",component:D.U,data:{modalOrder:1},children:[{path:"banco",component:W.U,title:"Zentech - Cadastrar Banco",data:{modalOrder:2}},{path:"representante",component:K.U,title:"Zentech - Cadastrar Representante",data:{modalOrder:2}}]},{path:"excluir/:beneficiario_id",title:"Zentech - Excluir Benefici\xe1rio",component:$,data:{modalOrder:1,data:[Q.uU.Admin,Q.uU.Master]},canActivate:[k.p]},w.D]}];let ee=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({imports:[o.Bz.forChild(q),o.Bz]})}return s})();var te=i(5805),ie=i(3735),se=i(5096);let ne=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275mod=e.oAB({type:s});static#i=this.\u0275inj=e.cJS({providers:[(0,ie.e$)()],imports:[_.ez,ee,b.uH,U.kW,m.u5,te.m,t.U$,u._8,se.O]})}return s})()},9901:(Y,O,i)=>{i.d(O,{j:()=>R});var _=i(5861),b=i(708),U=i(490),m=i(5038),t=i(9291),u=i(6434),o=i(4939),h=i(8787),T=i(6814),A=i(6223),S=i(5219),I=i(2352);function e(c,Z){if(1&c&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&c){const a=t.oxw(3);t.xp6(1),t.Oqu(null==a.empresaSelected.empresa?null:a.empresaSelected.empresa.nome)}}function P(c,Z){if(1&c&&t.YNc(0,e,2,1,"span",7),2&c){const a=t.oxw(2);t.Q6J("ngIf",a.empresaSelected.id)}}function y(c,Z){if(1&c&&(t.TgZ(0,"p"),t._uU(1),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA()),2&c){const a=Z.$implicit;t.xp6(1),t.Oqu(a.nome),t.xp6(2),t.Oqu(a.logo)}}function J(c,Z){if(1&c){const a=t.EpF();t.TgZ(0,"div",1)(1,"label",2),t._uU(2,"Selecione a Empresa para carregar dados"),t.qZA(),t.TgZ(3,"p-dropdown",3,4),t.NdJ("ngModelChange",function(d){t.CHM(a);const v=t.oxw();return t.KtG(v.empresaChange(d))})("ngModelChange",function(d){t.CHM(a);const v=t.oxw();return t.KtG(v.empresaSelected.id=d)}),t.YNc(5,P,1,1,"ng-template",5),t.YNc(6,y,4,2,"ng-template",6),t.qZA()()}if(2&c){const a=t.oxw();t.xp6(3),t.Q6J("options",a.empresas)("ngModel",a.empresaSelected.id)("filter",!0)("showClear",!1)("required",!0)}}let R=(()=>{class c{constructor(a,p,d,v){var x=this;this.empresaService=a,this.accountService=p,this.colors=d,this.table=v,this.empresaSelected=new m.I,this.empresas=[],this.loading=!1,this.Role=U.uU,this.subscription=[];var D=this.accountService.accountSubject.subscribe(function(){var E=(0,_.Z)(function*(g){x.account=g,g&&(1==g.perfilAcesso_Id&&0==x.empresaService.list.value.length&&(yield(0,b.n)(x.empresaService.getList())),(1!=g.perfilAcesso_Id||!x.empresaService.getEmpresa().value.empresa)&&x.empresaService.setEmpresa({id:g.empresa_Id,empresa:g.empresa}))});return function(g){return E.apply(this,arguments)}}());this.subscription.push(D);var L=this.empresaService.getEmpresa().subscribe(E=>{this.empresaSelected=E,this.table.selected.next(void 0),this.table.selectedItems.next([]),E&&this.setColorsJquery()});this.subscription.push(L);var N=this.empresaService.list.subscribe(E=>{this.empresas=E});this.subscription.push(N)}ngOnDestroy(){this.subscription.forEach(a=>a.unsubscribe())}empresaChange(a){var p=this;return(0,_.Z)(function*(){if(p.accountService.accountValue&&1==p.accountService.accountValue?.perfilAcesso_Id&&a){0==p.empresas.length&&(yield(0,b.n)(p.empresaService.getList()));var d=p.empresas.find(v=>v.id==a);p.empresaService.setEmpresa({empresa:d,id:a})}})()}setColorsJquery(){this.colors.setColorsJquery(this.empresaSelected.empresa)}static#e=this.\u0275fac=function(p){return new(p||c)(t.Y36(m.P),t.Y36(u.B),t.Y36(o.w),t.Y36(h.i))};static#t=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-empresa-selected"]],decls:1,vars:1,consts:[["class","form-group ms-2",4,"ngIf"],[1,"form-group","ms-2"],["for","empresa_Id"],["name","empresa_Id","id","empresa_Id","optionValue","id","filterBy","nome","styleClass","form-control","placeholder","Selecione uma empresa",3,"options","ngModel","filter","showClear","required","ngModelChange"],["empresa_Id","ngModel"],["pTemplate","selectedItem"],["pTemplate","item"],[4,"ngIf"]],template:function(p,d){1&p&&t.YNc(0,J,7,5,"div",0),2&p&&t.Q6J("ngIf",d.account&&1==(null==d.account?null:d.account.perfilAcesso_Id))},dependencies:[T.O5,A.JJ,A.Q7,A.On,S.jx,I.Lt]})}return c})()},9324:(Y,O,i)=>{function _(m,t,u="list"){var o=JSON.parse(JSON.stringify(m[u].value));o=o.filter(h=>!t.includes(h.id)),m[u].next(o)}function b(m,t,u="list"){var o=JSON.parse(JSON.stringify(m[u].value)),h=o.findIndex(T=>T.id==t.id);o.splice(h,1),m[u].next(o)}function U(m,t,u="list"){var o=JSON.parse(JSON.stringify(m[u].value));if(console.log("list",o),console.log("id",t.id),t.id){var h=o.findIndex(T=>T.id==t.id);console.log("index",h),-1==h&&o.push(t),o.splice(h,1,t)}else o.push(t);console.log("list",o),m[u].next(o)}i.d(O,{Od:()=>b,UB:()=>_,fb:()=>U})}}]);
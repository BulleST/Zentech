"use strict";(self.webpackChunkZenTech=self.webpackChunkZenTech||[]).push([[901],{2901:(St,N,r)=>{r.r(N),r.d(N,{UsuariosModule:()=>wt});var g=r(6814),_=r(132),T=r(5861),m=r(708),u=r(2832),q=r(5219);class v{constructor(){this.id=0,this.perfilAcesso=void 0,this.perfilAcesso_Id=void 0,this.name="",this.email="",this.telefoneCelular=""}}var D=[{field:"id",header:"Id",filterType:u.vA.text,filterDisplay:u.w2.menu},{field:"name",header:"Nome",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.substring,substringLength:22},{field:"email",header:"E-mail",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.substring,substringLength:30},{field:"telefoneCelular",header:"Telefone/Celular",filterType:u.vA.text,filterDisplay:u.w2.menu,maskType:u.O.telefoneCelular},{field:"perfilAcesso.perfil",header:"Tipo de Acesso",filterType:u.vA.text,filterDisplay:u.w2.menu},{field:"ativo",header:"Ativo",maskType:u.O.boolean,filterType:u.vA.text,filterDisplay:u.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:q.a6.CONTAINS,booleanValues:{true:"ativo",false:"inativo"}}],t=r(9291),U=r(9862),I=r(5619),J=r(9397),k=r(2096),L=r(553),y=r(697),O=r(8787),x=r(2425),Z=r(2667),A=r(3229);let b=(()=>{class i{constructor(e,o,n,s,p){this.table=e,this.http=o,this.toastr=n,this.crypto=s,this.accountService=p,this.url=L.N.url,this.list=new I.X([]),this.objeto=new I.X(void 0),this.account=new y.mR,this.perfilAcesso=new I.X([]),this.accountService.account.subscribe(l=>this.account=l??new y.mR)}getObject(){var e=localStorage.getItem("usuario");return e&&this.setObject(this.crypto.decrypt(e)??new v),this.objeto}setObject(e){localStorage.setItem("usuario",this.crypto.encrypt(e)??""),this.objeto.next(e)}getList(){return this.table.loading.next(!0),this.http.get(`${this.url}/usuario/all/`,{headers:new U.WM({loading:"false"})}).pipe((0,J.b)({next:e=>(e=e.map(o=>(o.ativo=!o.dataDesativado,o)),this.list.next(e),(0,k.of)(e)),error:e=>this.toastr.error("N\xe3o foi poss\xedvel carregar usu\xe1rios.")}))}get(e){return this.http.get(`${this.url}/usuario/${e}`,{headers:new U.WM({loading:"true"})})}getPerfilAcesso(){return this.http.get(`${this.url}/perfilAcesso/getAll`).pipe((0,J.b)({next:e=>(this.perfilAcesso.next(e),e),error:e=>this.toastr.error("N\xe3o foi poss\xedvel carregar perfil.")}))}create(e){return this.http.post(`${this.url}/usuario`,e)}edit(e){return this.http.put(`${this.url}/usuario`,e)}delete(e){return this.http.delete(`${this.url}/usuario/${e}`)}deactivated(e,o){return this.http.patch(`${this.url}/usuario/${e}/${o}`,{})}resetPassword(e){return this.http.patch(`${this.url}/usuario/reset-password/${e}`,{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(O.i),t.LFG(U.eN),t.LFG(x._W),t.LFG(Z.w),t.LFG(A.B))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var F=r(8008);const B=["template"],R=["icon"];function P(i,a){1&i&&(t.TgZ(0,"span",6),t._uU(1,"desabilitar"),t.qZA())}function G(i,a){1&i&&(t.TgZ(0,"span",6),t._uU(1,"habilitar"),t.qZA())}function $(i,a){1&i&&(t.TgZ(0,"p",7),t._uU(1,"Voc\xea automaticamente ser\xe1 deslogado e n\xe3o poder\xe1 acessar o Planner."),t.qZA())}function H(i,a){1&i&&(t.TgZ(0,"p",7),t._uU(1,"Ap\xf3s isso, o usu\xe1rio n\xe3o poder\xe1 acessar o Planner."),t.qZA())}function z(i,a){1&i&&t._UZ(0,"span",8)}function V(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"Desabilitar"),t.qZA())}function W(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"Habilitar"),t.qZA())}function K(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p"),t._uU(1,"Tem certeza que deseja "),t.YNc(2,P,2,0,"span",1),t.YNc(3,G,2,0,"span",1),t._uU(4," esse registro?\n"),t.qZA(),t.YNc(5,$,2,0,"p",2),t.YNc(6,H,2,0,"p",2),t.TgZ(7,"button",3),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.send())}),t.YNc(8,z,1,0,"span",4),t.YNc(9,V,2,0,"span",5),t.YNc(10,W,2,0,"span",5),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.objeto.ativo),t.xp6(1),t.Q6J("ngIf",!e.objeto.ativo),t.xp6(2),t.Q6J("ngIf",e.isUser&&e.objeto.ativo&&e.objeto.email==(null==e.account?null:e.account.email)),t.xp6(1),t.Q6J("ngIf",e.isUser&&e.objeto.ativo&&e.objeto.email!=(null==e.account?null:e.account.email)),t.xp6(2),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.objeto.ativo),t.xp6(1),t.Q6J("ngIf",!e.objeto.ativo)}}let Y=(()=>{class i{constructor(e,o,n,s,p){this.activatedRoute=e,this.userService=o,this.accountService=n,this.modal=s,this.crypto=p,this.erro="",this.loading=!1,this.objeto=new v,this.subscription=[],this.routerBack=["../../"],this.title="",this.isUser=!1,this.routeBackOptions={relativeTo:this.activatedRoute};var l=e.params.subscribe(c=>{c.usuario_id?(this.objeto.id=this.crypto.decrypt(c.usuario_id),(0,m.n)(this.userService.get(this.objeto.id)).then(d=>{this.objeto=d,this.title=(this.objeto.ativo?"Desabilitar":"Habilitar")+"usu\xe1rio",setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(d=>this.voltar()).finally(()=>{})):this.voltar()});this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.modal.title.next(this.title),this.modal.template.next(this.template),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute),this.modal.icon.next(this.icon)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){var e=this;this.loading=!0,this.erro="",(0,m.n)(this.userService.deactivated(this.objeto.id,!!this.objeto.dataDesativado)).then(function(){var n=(0,T.Z)(function*(s){e.isUser&&s.dataDesativado&&s.email==e.account?.email&&e.accountService.logout(),yield(0,m.n)(e.userService.getList()),e.voltar()});return function(s){return n.apply(this,arguments)}}()).finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(_.gz),t.Y36(b),t.Y36(A.B),t.Y36(F.u),t.Y36(Z.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-deactivated"]],viewQuery:function(o,n){if(1&o&&(t.Gf(B,5),t.Gf(R,5)),2&o){let s;t.iGM(s=t.CRH())&&(n.template=s.first),t.iGM(s=t.CRH())&&(n.icon=s.first)}},decls:2,vars:0,consts:[["content",""],["class","font-weight-bold",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[4,"ngIf"],[1,"font-weight-bold"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){1&o&&t.YNc(0,K,11,7,"ng-template",null,0,t.W1O)},dependencies:[g.O5]})}return i})();var M=r(590),E=r(342);function X(i,a){1&i&&(t._UZ(0,"p",15),t.ALo(1,"json")),2&i&&t.Q6J("innerHTML",t.lcZ(1,1,a.$implicit),t.oJD)}function tt(i,a){if(1&i&&(t.TgZ(0,"div",13),t.YNc(1,X,2,3,"p",14),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.erro)}}function et(i,a){1&i&&t._UZ(0,"span",16)}let it=(()=>{class i{constructor(e,o,n,s,p){this.activatedRoute=e,this.toastr=o,this.modal=n,this.userService=s,this.crypto=p,this.faTimes=M.NBC,this.modalOpen=!1,this.erro="",this.loading=!1,this.objeto=new v,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var l=this.modal.getOpen().subscribe(d=>this.modalOpen=d);this.subscription.push(l);var c=this.activatedRoute.params.subscribe(d=>{d.usuario_id?this.objeto.id=this.crypto.decrypt(d.usuario_id):this.voltar()});this.subscription.push(c),setTimeout(()=>{this.modal.setOpen(!0)},200)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){var e=this;this.loading=!0,(0,m.n)(this.userService.delete(this.objeto.id)).then(function(){var o=(0,T.Z)(function*(n){yield(0,m.n)(e.userService.getList()),e.voltar(),e.userService.setObject(new v)});return function(n){return o.apply(this,arguments)}}()).catch(o=>this.erro=(0,E.b)(o)).finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(_.gz),t.Y36(x._W),t.Y36(F.u),t.Y36(b),t.Y36(Z.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete"]],decls:22,vars:4,consts:[[1,"modal"],[1,"modal__bg",3,"click"],[1,"modal__inner",2,"max-width","600px"],[1,"modal__content"],[1,"modal__header","pb-2"],[1,"text-orange"],[1,"modal__header-close","btn-close",3,"click"],[1,"modal__body","mt-0"],[1,"mt-2"],[1,"text-info"],["class","m-0  mt-1",4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"m-0","mt-1"],["class","text-danger",3,"innerHTML",4,"ngFor","ngForOf"],[1,"text-danger",3,"innerHTML"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.voltar()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Excluir registro"),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return n.voltar()}),t._UZ(8,"span")(9,"span"),t.qZA()(),t.TgZ(10,"div",7)(11,"p",8),t._uU(12,"Tem certeza que deseja excluir esse registro? Ele n\xe3o poder\xe1 ser recuperado."),t.qZA(),t.TgZ(13,"p"),t._uU(14,"O usu\xe1rio n\xe3o ter\xe1 acesso mais ao planner."),t.qZA(),t.TgZ(15,"p",9),t._uU(16,"Obs.: Se esse usu\xe1rio estiver relacionado a um planner, n\xe3o poder\xe1 ser exclu\xeddo."),t.qZA(),t.YNc(17,tt,2,1,"div",10),t.TgZ(18,"button",11),t.NdJ("click",function(){return n.send()}),t.YNc(19,et,1,0,"span",12),t.TgZ(20,"span"),t._uU(21,"Excluir"),t.qZA()()()()()()),2&o&&(t.ekj("active",n.modalOpen),t.xp6(17),t.Q6J("ngIf",n.erro),t.xp6(2),t.Q6J("ngIf",n.loading))},dependencies:[g.sg,g.O5,g.Ts]})}return i})();var f=r(490),ot=r(6599),j=r(5597);const nt=function(){return["cadastrar"]};let st=(()=>{class i{constructor(e,o,n){this.userService=e,this.table=o,this.accountService=n,this.faUsers=M.FVb,this.Role=f.u,this.columns=D,this.list=[],this.tableLinks=[],this.account=new y.mR,this.menuTable=!0,this.subscription=[],this.create=(c=this.userService)=>{c.setObject(new v)},(0,m.n)(this.userService.getList());var s=this.accountService.account.subscribe(c=>this.account=c??new y.mR),p=this.userService.list.subscribe(c=>this.list=c);this.table.currentPage.next(1);var l=this.table.selected.subscribe(c=>{c&&((this.account.perfilAcesso_Id==f.u.Admin||this.account.perfilAcesso_Id==f.u.Master&&c.perfilAcesso_Id!=f.u.Admin)&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:c.ativo?"Desabilitar":"Habilitar",routePath:[c.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]},{label:"Resetar senha",routePath:["reset-password"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}]),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(s),this.subscription.push(p),this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}canMenu(){return`(${this.account.perfilAcesso_Id} == ${f.u.Admin}) || (${this.account.perfilAcesso_Id} == ${f.u.Master} && item.perfilAcesso_Id != ${f.u.Admin})`}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(b),t.Y36(O.i),t.Y36(A.B))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],decls:10,vars:14,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"span",2),t._UZ(3,"fa-icon",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6,"Usu\xe1rios"),t.qZA()()(),t.TgZ(7,"div",6),t._UZ(8,"app-list-shared",7),t.qZA()(),t._UZ(9,"router-outlet")),2&o&&(t.xp6(3),t.Q6J("icon",n.faUsers),t.xp6(5),t.Q6J("createLink",t.DdM(13,nt))("onCreate",n.create)("canCreate",!0)("list",n.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",n.canMenu())("columns",n.columns)("tableLinks",n.tableLinks)("selectable",!0))},dependencies:[_.lC,ot.o,j.BN]})}return i})();function at(i,a){1&i&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Tem certeza que deseja resetar sua senha?"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Ao resetar sua senha, voc\xea ser\xe1 automaticamente deslogado para realizar novo login."),t.qZA(),t.TgZ(5,"p",11)(6,"small"),t._uU(7,"Voc\xea receber\xe1 um email informando dessa altera\xe7\xe3o."),t.qZA()()())}function rt(i,a){1&i&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Tem certeza que deseja resetar a senha desse usu\xe1rio? "),t.qZA(),t.TgZ(3,"p",11)(4,"small"),t._uU(5,"Esse usu\xe1rio receber\xe1 um email o informando dessa altera\xe7\xe3o."),t.qZA()()())}function lt(i,a){1&i&&t._UZ(0,"span",12)}let ct=(()=>{class i{constructor(e,o,n,s,p){this.activatedRoute=e,this.modal=o,this.userService=n,this.accountService=s,this.crypto=p,this.faTimes=M.NBC,this.modalOpen=!1,this.erro="",this.loading=!1,this.objeto=new v,this.subscription=[],this.routerBack=["../../"],this.userLogado=this.accountService.accountValue,this.routeBackOptions={relativeTo:this.activatedRoute};var l=this.modal.getOpen().subscribe(d=>this.modalOpen=d);this.subscription.push(l);var c=this.activatedRoute.params.subscribe(d=>{d.usuario_id?(this.objeto.id=this.crypto.decrypt(d.usuario_id),(0,m.n)(this.userService.get(this.objeto.id)).then(Q=>{this.objeto=Q,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(Q=>{this.voltar()})):this.voltar()});this.subscription.push(c)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(){this.loading=!0,(0,m.n)(this.userService.resetPassword(this.objeto.id)).then(e=>{this.voltar(),this.objeto.email==this.userLogado?.email&&this.accountService.logout()}).catch().finally(()=>this.loading=!1)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(_.gz),t.Y36(F.u),t.Y36(b),t.Y36(A.B),t.Y36(Z.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-reset-password"]],decls:17,vars:5,consts:[[1,"modal"],[1,"modal__bg",3,"click"],[1,"modal__inner",2,"max-width","600px"],[1,"modal__content"],[1,"modal__header","pb-2"],[1,"text-orange"],[1,"modal__header-close","btn-close",3,"click"],[1,"modal__body","mt-0"],[4,"ngIf"],[1,"btn","btn-grey","ml-auto","d-flex","mt-2",3,"click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"text-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.voltar()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"Resetar senha"),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return n.voltar()}),t._UZ(8,"span")(9,"span"),t.qZA()(),t.TgZ(10,"div",7),t.YNc(11,at,8,0,"div",8),t.YNc(12,rt,6,0,"div",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return n.send()}),t.YNc(14,lt,1,0,"span",10),t.TgZ(15,"span"),t._uU(16," Resetar"),t.qZA()()()()()()),2&o&&(t.ekj("active",n.modalOpen),t.xp6(11),t.Q6J("ngIf",(null==n.userLogado?null:n.userLogado.email)==n.objeto.email),t.xp6(1),t.Q6J("ngIf",(null==n.userLogado?null:n.userLogado.email)!=n.objeto.email),t.xp6(2),t.Q6J("ngIf",n.loading))},dependencies:[g.O5]})}return i})();var ut=r(5592);let C=(()=>{class i{constructor(e,o,n,s){this.accountService=e,this.userService=o,this.router=n,this.toastr=s}canActivate(e,o){return new ut.y(n=>{this.userService.objeto.subscribe(s=>{var p=this.accountService.accountValue;n.next(p?.perfilAcesso_Id!=f.u.Master||s?.perfilAcesso_Id!=f.u.Admin)})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(A.B),t.LFG(b),t.LFG(_.F0),t.LFG(x._W))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var h=r(6223),w=r(8839);const pt=["template"],dt=["icon"];function mt(i,a){if(1&i&&t._UZ(0,"fa-icon",2),2&i){const e=t.oxw();t.Q6J("icon",e.faUsers)}}function ht(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function ft(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"Remova os espa\xe7os antes e depois do texto."),t.qZA())}function gt(i,a){if(1&i&&(t.TgZ(0,"p",8),t.YNc(1,ft,2,0,"span",11),t.qZA()),2&i){t.oxw(2);const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf","^\\S(.*\\S)?$"==e.errors.pattern.requiredPattern)}}function _t(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ht,2,0,"p",28),t.YNc(2,gt,2,1,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.pattern)}}function vt(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function bt(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Telefone/celular inv\xe1lido"),t.qZA())}function Tt(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,vt,2,0,"p",28),t.YNc(2,bt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(17);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.mask)}}function xt(i,a){if(1&i&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("ngValue",e.id),t.xp6(1),t.Oqu(e.perfil)}}function Zt(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function At(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Zt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(25);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function Ct(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Este campo \xe9 obrigat\xf3rio."),t.qZA())}function yt(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"E-mail inv\xe1lido"),t.qZA())}function Ft(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ct,2,0,"p",28),t.YNc(2,yt,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(36);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.email)}}function Mt(i,a){if(1&i&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.erro)}}function Ut(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para salvar."),t.qZA())}function It(i,a){if(1&i&&(t.TgZ(0,"div",29),t.YNc(1,Mt,2,1,"p",28),t.YNc(2,Ut,2,0,"p",28),t.qZA()),2&i){t.oxw();const e=t.MAs(1),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.erro),t.xp6(1),t.Q6J("ngIf",e.invalid&&!o.erro)}}function Et(i,a){1&i&&t._UZ(0,"span",30)}function jt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",3,4),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.MAs(1),s=t.oxw();return t.KtG(s.send(n))}),t.TgZ(2,"div",5)(3,"div",6)(4,"label",7),t._uU(5,"Nome: "),t.TgZ(6,"span",8),t._uU(7,"*"),t.qZA()(),t.TgZ(8,"input",9,10),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.objeto.name=n)})("change",function(){t.CHM(e);const n=t.MAs(9),s=t.oxw();return t.KtG(s.objeto.name=n.value.trim())}),t.qZA(),t.YNc(10,_t,3,2,"div",11),t.qZA(),t.TgZ(11,"div",6)(12,"label",12),t._uU(13,"Telefone/Celular: "),t.TgZ(14,"span",8),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"input",13,14),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.objeto.telefoneCelular=n)}),t.qZA(),t.YNc(18,Tt,3,2,"div",11),t.qZA(),t.TgZ(19,"div",6)(20,"label",15),t._uU(21,"Perfil: "),t.TgZ(22,"span",8),t._uU(23,"*"),t.qZA()(),t.TgZ(24,"select",16,17),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.objeto.perfilAcesso_Id=n)}),t.TgZ(26,"option",18),t._uU(27,"Selecione"),t.qZA(),t.YNc(28,xt,2,2,"option",19),t.qZA(),t.YNc(29,At,2,1,"div",11),t.qZA(),t.TgZ(30,"div",20)(31,"label",21),t._uU(32,"E-mail: "),t.TgZ(33,"span",8),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"input",22,23),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.objeto.email=n)}),t.qZA(),t.YNc(37,Ft,3,2,"div",11),t.qZA()(),t.TgZ(38,"div",24),t.YNc(39,It,3,2,"div",25),t.TgZ(40,"button",26),t.YNc(41,Et,1,0,"span",27),t._uU(42," Salvar "),t.qZA()()()}if(2&i){const e=t.MAs(1),o=t.MAs(9),n=t.MAs(17),s=t.MAs(25),p=t.MAs(36),l=t.oxw();t.xp6(8),t.Q6J("ngModel",l.objeto.name),t.xp6(2),t.Q6J("ngIf",o.touched&&o.errors),t.xp6(6),t.Q6J("ngModel",l.objeto.telefoneCelular),t.xp6(2),t.Q6J("ngIf",n.touched&&n.errors),t.xp6(6),t.ekj("form-control-loading",l.loadingPerfil),t.Q6J("ngModel",l.objeto.perfilAcesso_Id),t.xp6(2),t.Q6J("ngValue",void 0),t.xp6(2),t.Q6J("ngForOf",l.perfil),t.xp6(1),t.Q6J("ngIf",s.touched&&s.errors),t.xp6(6),t.Q6J("email",!0)("ngModel",l.objeto.email)("readonly",l.isEditPage)("pattern",l.emailPattern),t.xp6(2),t.Q6J("ngIf",p.touched&&p.errors),t.xp6(2),t.Q6J("ngIf",l.erro||e.invalid),t.xp6(1),t.Q6J("disabled",e.invalid||l.loading),t.xp6(1),t.Q6J("ngIf",l.loading)}}let S=(()=>{class i{constructor(e,o,n,s,p){this.activatedRoute=e,this.toastr=o,this.modal=n,this.userService=s,this.crypto=p,this.faUsers=M.FVb,this.modalOpen=!1,this.objeto=new v,this.erro="",this.loading=!1,this.subscription=[],this.routerBack=["../"],this.isEditPage=!1,this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,this.title="",this.perfil=[],this.loadingPerfil=!0,this.routeBackOptions={relativeTo:this.activatedRoute},(0,m.n)(this.userService.getPerfilAcesso()).then(c=>this.perfil=c).catch().finally(()=>this.loadingPerfil=!1);var l=e.params.subscribe(c=>{c.usuario_id?(this.isEditPage=!0,this.title="Editar usu\xe1rio",this.objeto.id=this.crypto.decrypt(c.usuario_id),this.routerBack=["../../"],(0,m.n)(this.userService.get(this.objeto.id)).then(d=>{this.objeto=d,setTimeout(()=>{this.modal.setOpen(!0)},200)}).catch(d=>this.voltar()).finally(()=>this.loading=!1)):(this.isEditPage=!1,this.routerBack=["../"],this.title="Cadastrar usu\xe1rio",setTimeout(()=>{this.modal.setOpen(!0)},200))});this.subscription.push(l)}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}ngAfterViewInit(){this.modal.title.next(this.title),this.modal.template.next(this.template),this.modal.icon.next(this.icon),this.modal.style.next({"max-width":"600px"}),this.modal.routerBack.next(this.routerBack),this.modal.activatedRoute.next(this.activatedRoute),setTimeout(()=>{this.modal.setOpen(!0)},200)}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}send(e){var o=this;this.loading=!0,this.erro="",this.isEditPage?(0,m.n)(this.userService.edit(this.objeto)).then(function(){var n=(0,T.Z)(function*(s){return yield o.then(s)});return function(s){return n.apply(this,arguments)}}()).catch(n=>this.erro=(0,E.b)(n)).finally(()=>this.loading=!1):(0,m.n)(this.userService.create(this.objeto)).then(function(){var n=(0,T.Z)(function*(s){return yield o.then(s)});return function(s){return n.apply(this,arguments)}}()).catch(n=>this.erro=(0,E.b)(n)).finally(()=>this.loading=!1)}then(e){var o=this;return(0,T.Z)(function*(){o.modal.voltar(o.routerBack,o.routeBackOptions),yield(0,m.n)(o.userService.getList())})()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(_.gz),t.Y36(x._W),t.Y36(F.u),t.Y36(b),t.Y36(Z.w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],viewQuery:function(o,n){if(1&o&&(t.Gf(pt,5),t.Gf(dt,5)),2&o){let s;t.iGM(s=t.CRH())&&(n.template=s.first),t.iGM(s=t.CRH())&&(n.icon=s.first)}},decls:4,vars:0,consts:[["icon",""],["template",""],[3,"icon"],[3,"ngSubmit"],["form","ngForm"],[1,"row","form-row"],[1,"form-group","col-xl-4","col-lg-4","col-md-6","col-sm-6","col-12"],["for","name"],[1,"text-danger"],["type","text","name","name","id","name","required","","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngModelChange","change"],["name","ngModel"],[4,"ngIf"],["for","telefoneCelular"],["type","text","name","telefoneCelular","id","telefoneCelular","mask","(00) 0000-0000||(00) 0.0000-0000","pattern","^\\(?[1-9]{2}\\)? ?(?:[0-9]|9[0-9])[0-9]{3}\\-?[0-9]{4}$","placeholder","(11) x.0000-0000","required","",1,"form-control",3,"ngModel","ngModelChange"],["telefoneCelular","ngModel"],["for","perfilAcesso_Id"],["name","perfilAcesso_Id","id","perfilAcesso_Id","required","",1,"form-control",3,"ngModel","ngModelChange"],["perfilAcesso_Id","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","col-xl-12","col-lg-12","col-md-6","col-sm-6","col-12","email-container"],["for","email"],["type","email","name","email","id","email","placeholder","example@hotmail.com","required","",1,"form-control",3,"email","ngModel","readonly","pattern","ngModelChange"],["email","ngModel"],[1,"d-flex","align-items-start","flex-wrap","p-0","mt-1","px-2"],["class","m-0",4,"ngIf"],[1,"btn","btn-primary","mr-0","ml-auto",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"m-0"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){1&o&&(t.YNc(0,mt,1,1,"ng-template",null,0,t.W1O),t.YNc(2,jt,43,18,"ng-template",null,1,t.W1O))},dependencies:[g.sg,g.O5,h._Y,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.JL,h.Q7,h.c5,h.on,h.On,h.F,j.BN,w.hx],styles:["@media (max-width: 768px){.email-container[_ngcontent-%COMP%], .senha-container[_ngcontent-%COMP%]{order:1}}"]})}return i})();const Nt=[{path:"",component:st,title:"ZenTech - Usu\xe1rios",children:[{path:"minha-conta",loadComponent:()=>r.e(688).then(r.bind(r,6688)).then(i=>i.MyAccountComponent)},{path:"cadastrar",component:S,title:"ZenTech - Cadastrar usu\xe1rio"},{path:"editar/:usuario_id",component:S,title:"ZenTech - Editar usu\xe1rio",canActivate:[C]},{path:"excluir/:usuario_id",component:it,title:"ZenTech - Excluir usu\xe1rio",canActivate:[C]},{path:"reset-password/:usuario_id",component:ct,title:"ZenTech - Resetar senha",canActivate:[C]},{path:"habilitar/:usuario_id",component:Y,title:"ZenTech - Habilitar usu\xe1rio",canActivate:[C]},{path:"desabilitar/:usuario_id",component:Y,title:"ZenTech - Desabilitar usu\xe1rio",canActivate:[C]}]}];let Jt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(Nt),_.Bz]})}return i})();var Ot=r(6208),Yt=r(4685);let wt=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[g.ez,Jt,h.u5,x.Rh,Ot.m,j.uH,Yt.U$,w.yI.forChild()]})}return i})()}}]);